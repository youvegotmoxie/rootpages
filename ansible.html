

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Ansible &mdash; Root Pages 2018.04.01 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Root Pages 2018.04.01 documentation" href="index.html"/>
        <link rel="next" title="Authentication" href="authentication.html"/>
        <link rel="prev" title="Welcome to Root Pages!" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Root Pages
          

          
          </a>

          
            
            
              <div class="version">
                2018.04.01
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Ansible</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#editions">Editions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#main">Main</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-3">Python 3</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#command-usage">Command Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#playbooks">Playbooks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#directory-structure">Directory Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-tuning">Performance Tuning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#inventory">Inventory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#production-and-staging">Production and Staging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variables">Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vault-encryption">Vault Encryption</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dynamic">Dynamic</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#modules">Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#main-modules">Main Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#assert">Assert</a></li>
<li class="toctree-l4"><a class="reference internal" href="#async">Async</a></li>
<li class="toctree-l4"><a class="reference internal" href="#block">Block</a></li>
<li class="toctree-l4"><a class="reference internal" href="#check-mode">Check Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debug">Debug</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gather-facts">Gather Facts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#handlers-and-notify">Handlers and Notify</a></li>
<li class="toctree-l4"><a class="reference internal" href="#meta">Meta</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pause">Pause</a></li>
<li class="toctree-l4"><a class="reference internal" href="#roles">Roles</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-once">Run Once</a></li>
<li class="toctree-l4"><a class="reference internal" href="#serial">Serial</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategy">Strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tags">Tags</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tasks">Tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wait-for">Wait For</a></li>
<li class="toctree-l4"><a class="reference internal" href="#when">When</a></li>
<li class="toctree-l4"><a class="reference internal" href="#errors">Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#includes">Includes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#loops-ansible-2-5">Loops (Ansible &lt; 2.5)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Variables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#unix-modules">UNIX Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#command-and-shell">Command and Shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="#copy-file-synchronize-and-template">Copy, File, Synchronize, and Template</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cron">Cron</a></li>
<li class="toctree-l4"><a class="reference internal" href="#expect">Expect</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-url">Get URL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#git">Git</a></li>
<li class="toctree-l4"><a class="reference internal" href="#service">Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mysql-database-and-user">MySQL Database and User</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stat">Stat</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uri">URI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#package-managers">Package Managers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#windows-modules">Windows Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">Command and Shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="#file-management">File Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installations">Installations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#registry">Registry</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scheduled-task">Scheduled Task</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user">User</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-development">Module Development</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id4">Roles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#galaxy">Galaxy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#community-roles">Community Roles</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#jinja2">Jinja2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filters">Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#comments">Comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#blocks">Blocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loops">Loops</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#python-api">Python API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#containers">Containers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ansible-container">Ansible Container</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dashboards">Dashboards</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ansible-tower-3">Ansible Tower 3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#gui">GUI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#security">Security</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#awx">AWX</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#install">Install</a></li>
<li class="toctree-l4"><a class="reference internal" href="#update">Update</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uninstall">Uninstall</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rundeck">Rundeck</a></li>
<li class="toctree-l3"><a class="reference internal" href="#semaphore">Semaphore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tensor">Tensor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#errata">Errata</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bibliography">Bibliography</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="bootloaders.html">Bootloaders</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_and_c++.html">C and C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="databases.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustering.html">Clustering and High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="dns_servers.html">DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_systems.html">File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="http_servers.html">HTTP Servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="mail_servers.html">Mail Servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring.html">Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="openstack.html">OpenStack Queens</a></li>
<li class="toctree-l1"><a class="reference internal" href="operating_systems.html">Operating Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="packages.html">Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtualization.html">Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="wine.html">Wine</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Root Pages</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Ansible</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/ansible.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ansible">
<h1><a class="toc-backref" href="#id6">Ansible</a><a class="headerlink" href="#ansible" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#ansible" id="id6">Ansible</a><ul>
<li><a class="reference internal" href="#introduction" id="id7">Introduction</a><ul>
<li><a class="reference internal" href="#editions" id="id8">Editions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation" id="id9">Installation</a></li>
<li><a class="reference internal" href="#configuration" id="id10">Configuration</a><ul>
<li><a class="reference internal" href="#main" id="id11">Main</a></li>
<li><a class="reference internal" href="#python-3" id="id12">Python 3</a></li>
</ul>
</li>
<li><a class="reference internal" href="#command-usage" id="id13">Command Usage</a></li>
<li><a class="reference internal" href="#playbooks" id="id14">Playbooks</a><ul>
<li><a class="reference internal" href="#directory-structure" id="id15">Directory Structure</a></li>
<li><a class="reference internal" href="#performance-tuning" id="id16">Performance Tuning</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inventory" id="id17">Inventory</a><ul>
<li><a class="reference internal" href="#production-and-staging" id="id18">Production and Staging</a></li>
<li><a class="reference internal" href="#variables" id="id19">Variables</a></li>
<li><a class="reference internal" href="#vault-encryption" id="id20">Vault Encryption</a></li>
<li><a class="reference internal" href="#dynamic" id="id21">Dynamic</a></li>
</ul>
</li>
<li><a class="reference internal" href="#modules" id="id22">Modules</a><ul>
<li><a class="reference internal" href="#main-modules" id="id23">Main Modules</a><ul>
<li><a class="reference internal" href="#assert" id="id24">Assert</a></li>
<li><a class="reference internal" href="#async" id="id25">Async</a></li>
<li><a class="reference internal" href="#block" id="id26">Block</a></li>
<li><a class="reference internal" href="#check-mode" id="id27">Check Mode</a></li>
<li><a class="reference internal" href="#debug" id="id28">Debug</a></li>
<li><a class="reference internal" href="#gather-facts" id="id29">Gather Facts</a></li>
<li><a class="reference internal" href="#handlers-and-notify" id="id30">Handlers and Notify</a></li>
<li><a class="reference internal" href="#meta" id="id31">Meta</a></li>
<li><a class="reference internal" href="#pause" id="id32">Pause</a></li>
<li><a class="reference internal" href="#roles" id="id33">Roles</a></li>
<li><a class="reference internal" href="#run-once" id="id34">Run Once</a></li>
<li><a class="reference internal" href="#serial" id="id35">Serial</a></li>
<li><a class="reference internal" href="#strategy" id="id36">Strategy</a></li>
<li><a class="reference internal" href="#tags" id="id37">Tags</a></li>
<li><a class="reference internal" href="#tasks" id="id38">Tasks</a></li>
<li><a class="reference internal" href="#wait-for" id="id39">Wait For</a></li>
<li><a class="reference internal" href="#when" id="id40">When</a></li>
<li><a class="reference internal" href="#errors" id="id41">Errors</a><ul>
<li><a class="reference internal" href="#any-errors-fatal" id="id42">Any Errors Fatal</a></li>
<li><a class="reference internal" href="#fail" id="id43">Fail</a></li>
<li><a class="reference internal" href="#failed-when" id="id44">Failed When</a></li>
<li><a class="reference internal" href="#ignore-errors" id="id45">Ignore Errors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#includes" id="id46">Includes</a><ul>
<li><a class="reference internal" href="#import-playbook" id="id47">Import Playbook</a></li>
<li><a class="reference internal" href="#import-and-include-role" id="id48">Import and Include Role</a></li>
<li><a class="reference internal" href="#import-and-include-tasks" id="id49">Import and Include Tasks</a></li>
<li><a class="reference internal" href="#include" id="id50">Include</a></li>
<li><a class="reference internal" href="#include-variables" id="id51">Include Variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#loops-ansible-2-5" id="id52">Loops (Ansible &lt; 2.5)</a><ul>
<li><a class="reference internal" href="#with-first-found" id="id53">With First Found</a></li>
<li><a class="reference internal" href="#with-flattened" id="id54">With Flattened</a></li>
<li><a class="reference internal" href="#with-items" id="id55">With Items</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1" id="id56">Variables</a><ul>
<li><a class="reference internal" href="#prompts" id="id57">Prompts</a></li>
<li><a class="reference internal" href="#register" id="id58">Register</a></li>
<li><a class="reference internal" href="#set-fact" id="id59">Set Fact</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#unix-modules" id="id60">UNIX Modules</a><ul>
<li><a class="reference internal" href="#command-and-shell" id="id61">Command and Shell</a></li>
<li><a class="reference internal" href="#copy-file-synchronize-and-template" id="id62">Copy, File, Synchronize, and Template</a></li>
<li><a class="reference internal" href="#cron" id="id63">Cron</a></li>
<li><a class="reference internal" href="#expect" id="id64">Expect</a></li>
<li><a class="reference internal" href="#get-url" id="id65">Get URL</a></li>
<li><a class="reference internal" href="#git" id="id66">Git</a></li>
<li><a class="reference internal" href="#service" id="id67">Service</a></li>
<li><a class="reference internal" href="#mysql-database-and-user" id="id68">MySQL Database and User</a></li>
<li><a class="reference internal" href="#stat" id="id69">Stat</a></li>
<li><a class="reference internal" href="#uri" id="id70">URI</a></li>
<li><a class="reference internal" href="#package-managers" id="id71">Package Managers</a><ul>
<li><a class="reference internal" href="#apt" id="id72">Apt</a></li>
<li><a class="reference internal" href="#yum" id="id73">Yum</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#windows-modules" id="id74">Windows Modules</a><ul>
<li><a class="reference internal" href="#id2" id="id75">Command and Shell</a></li>
<li><a class="reference internal" href="#file-management" id="id76">File Management</a><ul>
<li><a class="reference internal" href="#copy" id="id77">Copy</a></li>
<li><a class="reference internal" href="#file" id="id78">File</a></li>
<li><a class="reference internal" href="#robocopy" id="id79">Robocopy</a></li>
<li><a class="reference internal" href="#shortcut" id="id80">Shortcut</a></li>
<li><a class="reference internal" href="#template" id="id81">Template</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installations" id="id82">Installations</a><ul>
<li><a class="reference internal" href="#chocolatey" id="id83">Chocolatey</a></li>
<li><a class="reference internal" href="#feature" id="id84">Feature</a></li>
<li><a class="reference internal" href="#msi" id="id85">MSI</a></li>
<li><a class="reference internal" href="#package" id="id86">Package</a></li>
<li><a class="reference internal" href="#updates" id="id87">Updates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#registry" id="id88">Registry</a></li>
<li><a class="reference internal" href="#scheduled-task" id="id89">Scheduled Task</a></li>
<li><a class="reference internal" href="#id3" id="id90">Service</a></li>
<li><a class="reference internal" href="#user" id="id91">User</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-development" id="id92">Module Development</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4" id="id93">Roles</a><ul>
<li><a class="reference internal" href="#galaxy" id="id94">Galaxy</a><ul>
<li><a class="reference internal" href="#dependencies" id="id95">Dependencies</a></li>
<li><a class="reference internal" href="#community-roles" id="id96">Community Roles</a><ul>
<li><a class="reference internal" href="#network-interface" id="id97">Network Interface</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#jinja2" id="id98">Jinja2</a><ul>
<li><a class="reference internal" href="#id5" id="id99">Variables</a></li>
<li><a class="reference internal" href="#filters" id="id100">Filters</a></li>
<li><a class="reference internal" href="#comments" id="id101">Comments</a></li>
<li><a class="reference internal" href="#blocks" id="id102">Blocks</a></li>
<li><a class="reference internal" href="#loops" id="id103">Loops</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-api" id="id104">Python API</a></li>
<li><a class="reference internal" href="#containers" id="id105">Containers</a><ul>
<li><a class="reference internal" href="#ansible-container" id="id106">Ansible Container</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dashboards" id="id107">Dashboards</a><ul>
<li><a class="reference internal" href="#ansible-tower-3" id="id108">Ansible Tower 3</a><ul>
<li><a class="reference internal" href="#gui" id="id109">GUI</a></li>
<li><a class="reference internal" href="#security" id="id110">Security</a><ul>
<li><a class="reference internal" href="#authentication" id="id111">Authentication</a></li>
<li><a class="reference internal" href="#acls" id="id112">ACLs</a></li>
<li><a class="reference internal" href="#ssl" id="id113">SSL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api" id="id114">API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#awx" id="id115">AWX</a><ul>
<li><a class="reference internal" href="#install" id="id116">Install</a></li>
<li><a class="reference internal" href="#update" id="id117">Update</a></li>
<li><a class="reference internal" href="#uninstall" id="id118">Uninstall</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rundeck" id="id119">Rundeck</a></li>
<li><a class="reference internal" href="#semaphore" id="id120">Semaphore</a></li>
<li><a class="reference internal" href="#tensor" id="id121">Tensor</a></li>
</ul>
</li>
<li><a class="reference internal" href="#errata" id="id122">Errata</a></li>
<li><a class="reference internal" href="#bibliography" id="id123">Bibliography</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id7">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Ansible is a simple utility for automating system administration tasks
via SSH for UNIX-like operating systems. The only requirements are a SSH
connection from a control node to a managed node and Python on both
nodes. Ansible uses YAML syntax and does not require any knowledge of
programming. [1]</p>
<p>There is also support for Windows modules. Ansible is executed on a
control node that runs on Linux, using Python. A remote connection to
WinRM (via HTTPS, by default) is made and then modules are executed
remotely using PowerShell commands. [33]</p>
<p>The official documentation can be found here:</p>
<ul class="simple">
<li>Latest stable: <a class="reference external" href="http://docs.ansible.com/ansible/latest/index.html">http://docs.ansible.com/ansible/latest/index.html</a></li>
<li>Development: <a class="reference external" href="http://docs.ansible.com/ansible/devel/index.html">http://docs.ansible.com/ansible/devel/index.html</a></li>
</ul>
<div class="section" id="editions">
<h3><a class="toc-backref" href="#id8">Editions</a><a class="headerlink" href="#editions" title="Permalink to this headline">¶</a></h3>
<p>There are two editions of Ansible available. There is the upstream
Ansible community project that gets frequent updates and there is also
Red Hat Ansible Engine, which is an enterprise solution. Ansible Engine
is designed to provide a downstream version that is more stable, secure,
and reliable. Support is provided that includes covers Core modules,
priority bug and feature updates, documentation, and more. [42]</p>
</div>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id9">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>The Ansible community edition 2.4 requires Python 2.6, 2.7, or &gt;= 3.5 on
both the control and managed nodes. [1] Python 3 support is still in
development but should be stable within the next few releases. [19]</p>
<p>RHEL:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo yum install epel-release
$ sudo yum install ansible
</pre></div>
</div>
<p>Debian:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get install software-properties-common
$ sudo apt-add-repository ppa:ansible/ansible
$ sudo apt-get update
$ sudo apt-get install ansible
</pre></div>
</div>
<p>Source code:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ git clone git://github.com/ansible/ansible.git
$ <span class="nb">cd</span> ./ansible/
$ git branch -a <span class="p">|</span> grep stable
$ git checkout remotes/origin/stable-2.4
$ git submodule update --init --recursive
$ <span class="nb">source</span> ./hacking/env-setup
</pre></div>
</div>
<p>Updating source code installations:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ git pull --rebase
$ git submodule update --init --recursive
</pre></div>
</div>
<p>[18]</p>
<p>For managing Windows servers, the “winrm” Python library is required on
the Ansible control node. The remote Windows servers need PowerShell &gt;=
3.0 installed and WinRM enabled. [33]</p>
</div>
<div class="section" id="configuration">
<h2><a class="toc-backref" href="#id10">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="main">
<h3><a class="toc-backref" href="#id11">Main</a><a class="headerlink" href="#main" title="Permalink to this headline">¶</a></h3>
<p>All of the possible configuration files are listed below in the order
that they are read. The last file overrides any previous settings.</p>
<p>Configuration files:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">$ANSIBLE_CONFIG</span></code> = A command line variable containing the Ansible
configuration settings.</li>
<li><code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code> = If it is in the current directory, it will be used.</li>
<li><code class="docutils literal notranslate"><span class="pre">~/.ansible.cfg</span></code> = The configuration file in a user’s home
directory.</li>
<li><code class="docutils literal notranslate"><span class="pre">/etc/ansible/ansible.cfg</span></code> = The global configuration file.</li>
</ul>
<p>Common settings:</p>
<ul class="simple">
<li>[default]<ul>
<li>ansible_managed = String. The phrase that will be assigned to the
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">ansible_managed</span> <span class="pre">}}</span></code> variable. This should generally reside
at the top of a template file to indicate that the file is managed
by Ansible.</li>
<li>ask_pass = Boolean. Default: False. Prompt the user for the SSH
password.</li>
<li>ask_sudo_pass = Boolean. Default: False. Prompt the user for the
sudo password.</li>
<li>ask_vault_pass = Boolean. Default: False. Prompt the user for
the Ansible vault password.</li>
<li>command_warnings = Boolean. Default: True. Inform the user an
Ansible module can be used instead of running certain commands.</li>
<li>deprecation_warnings = Boolean. Default: True. Show deprecated
messages about features that will be removed in a future release
of Ansible.</li>
<li>display_skipped_hosts = Boolean. Default: True. Show tasks that
a skipped host would have run.</li>
<li>executable = String. Default: /bin/bash. The shell executable to
use.</li>
<li>forks = Integer. Default: 5. The number of parallel processes used
to run tasks on remote hosts. This is not how many hosts a
Playbook or module can run on, that is handled by the “serial”
module. This helps to increase the performance of many operations
across a large number of remote hosts.</li>
<li>host_key_checking = Boolean. Default: True. Do not automatically
accept warnings about leaving SSH fingerprints on a connection to
a new host.</li>
<li>internal_poll_interval = Float. Default: 0.001. The number of
seconds to wait before checking on the status of a module that is
being executed.</li>
<li>inventory = String. Default: /etc/ansible/hosts. The default
inventory file to find hosts from.</li>
<li>log_path = String. Default: none. The file to log Ansible’s
operations.</li>
<li>nocolor. Boolean. Default: 0. Do not format Ansible output with
color.</li>
<li>nocows = Boolean. Default: 0. If the <code class="docutils literal notranslate"><span class="pre">cowsay</span></code> binary is present,
a Playbook will output information using a cow.</li>
<li>hosts = String. Default: *. The hosts to run a Playbook on if no
host is specified. The default is to run on all hosts.</li>
<li>private_key_file = String. The private SSH key file to use.</li>
<li>remote_port = Integer. Default: 22. The SSH port used for remote
connections.</li>
<li>remote_tmp = String. Default: ~/.ansible/tmp. The temporary
directory on the remote server to save information to.</li>
<li>remote_user = String. Default: root. The default <code class="docutils literal notranslate"><span class="pre">ansible_user</span></code>
to use for SSH access.</li>
<li>roles_path = String. The path to the location of installed roles.</li>
<li>sudo_exe = String. Default: sudo. The binary to run to execute
commands as a non-privileged user.</li>
<li>sudo_user = String. Default: root. The user that sudo should run
as.</li>
<li>timeout = Integer. Default: 10. The amount of time, in seconds, to
wait for a SSH connection to a remote host.</li>
<li>vault_password_file = String. The default file to use for the
Vault password.</li>
</ul>
</li>
<li>[privilege_escalation]<ul>
<li>become = Boolean. Default: False. This specifies if root level
commands should be run by a privileged user.</li>
<li>become_method = String. Default: sudo. The method to run root
tasks.</li>
<li>become_user = String. Default: root. The user to change to to run
root tasks.</li>
<li>become_ask_pass = Boolean. Default: False. Ask the end-user for
a password for the become method.</li>
</ul>
</li>
<li>[ssh_connection]<ul>
<li>ssh_args = String. Additional SSH arguments.</li>
<li>retries = Integer. Default: 0 (keep retrying). How many times
should an SSH connection attempt to reconnect after a failure.</li>
<li>pipelining = Boolean. Default: False. Ansible modules can be
combined and sent to the remote host via SSH to help save time and
improve performance. This is disabled by default because <code class="docutils literal notranslate"><span class="pre">sudo</span></code>
accounts usually have the “requiretty” option enabled that is not
compatible with pipelining.</li>
<li>ansible_ssh_executable = String. Default: ssh (found in the
$PATH environment variable). The path to the <code class="docutils literal notranslate"><span class="pre">ssh</span></code> binary.</li>
</ul>
</li>
</ul>
<p>[29]</p>
</div>
<div class="section" id="python-3">
<h3><a class="toc-backref" href="#id12">Python 3</a><a class="headerlink" href="#python-3" title="Permalink to this headline">¶</a></h3>
<p>Python 3 is supported on the control node and managed nodes. For using
Python 3 on the managed nodes, the <code class="docutils literal notranslate"><span class="pre">ansible_python_interpreter</span></code>
variable needs to be set to reference the path to the managed nodes’
Python 3.</p>
<p>Example:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ /usr/bin/python3 /usr/bin/ansible -e <span class="s2">&quot;ansible_python_interpreter=/usr/bin/python3&quot;</span> -m setup localhost
</pre></div>
</div>
<p>Documentation on how to create Ansible modules for Python 3 with
backwards compatibility with Python 2 can be found here:
<a class="reference external" href="http://docs.ansible.com/ansible/latest/dev_guide/developing_python3.html">http://docs.ansible.com/ansible/latest/dev_guide/developing_python3.html</a></p>
<p>[43]</p>
</div>
</div>
<div class="section" id="command-usage">
<h2><a class="toc-backref" href="#id13">Command Usage</a><a class="headerlink" href="#command-usage" title="Permalink to this headline">¶</a></h2>
<p>Refer to Root Page’s “Linux Commands” guide in the “Deployment” section.</p>
</div>
<div class="section" id="playbooks">
<h2><a class="toc-backref" href="#id14">Playbooks</a><a class="headerlink" href="#playbooks" title="Permalink to this headline">¶</a></h2>
<p>Playbooks organize tasks into one or more YAML files. It can be a
self-contained file or a large project organized in a directory.
Official examples can he found here at
<a class="reference external" href="https://github.com/ansible/ansible-examples">https://github.com/ansible/ansible-examples</a>.</p>
<div class="section" id="directory-structure">
<h3><a class="toc-backref" href="#id15">Directory Structure</a><a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h3>
<p>A Playbook can be self-contained entirely into one file. However,
especially for large projects, each segment of the Playbook should be
split into separate files and directories.</p>
<p>Layout:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── production/
│   ├── group_vars/
│   ├── host_vars/
│   └── inventory
├── staging/
│   ├── group_vars/
│   ├── host_vars/
│   └── inventory
├── roles/
│   └── general/
│       ├── defaults/
│       │   └── main.yml
│       ├── files/
│       ├── handlers/
│       │   └── main.yml
│       ├── meta/
│       │   └── main.yml
│       ├── tasks/
│       │   └── main.yml
│       ├── templates/
│       └── vars/
│           └── main.yml
└── site.yml
</pre></div>
</div>
<p>Layout Explained:</p>
<ul class="simple">
<li>production/ = A directory that contains information about the
Ansible-controlled hosts and inventory variables. This should be used
for deploying to live production environments. Alternatively, simple
Playbooks can use a “production” file to list all of the inventory
servers there.<ul>
<li>group_vars/ = Group specific variables. A file named “all” can be
used to define global variables for all hosts.</li>
<li>host_vars/ = Host specific variables.</li>
<li>inventory = The main “production” inventory file.</li>
</ul>
</li>
<li>staging/ = The same as the “production/” directory except this is
designed for running Playbooks in testing environments.</li>
<li>roles/ = This directory should contain all of the different roles.<ul>
<li>general/ = A role name. This can be anything.<ul>
<li>defaults/ = Define default variables. If any variables are
defined elsewhere, these will be overridden.<ul>
<li>main.yml = Each main.yml file is executed as the first file.
Additional separation of operations can be split into
different files that can be accessed via “include:”
statements.</li>
</ul>
</li>
<li>files/ = Store static files that are not modified.</li>
<li>handlers/ = Specify alias commands that can be called using the
“notify:” method.<ul>
<li>main.yml</li>
</ul>
</li>
<li>meta/ = Specify role dependencies and Playbook information such
as author, version, etc. These can be other roles and/or
Playbooks.<ul>
<li>main.yml</li>
</ul>
</li>
<li>tasks/<ul>
<li>main.yml = The tasks’ main file is executed first for the
entire role.</li>
</ul>
</li>
<li>templates/ = Store dynamic files that will be generated based
on variables.</li>
<li>vars/ = Define role-specific variables.<ul>
<li>main.yml</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>site.yml = This is typically the default Playbook file to execute.
Any name and any number of Playbook files can be used here to include
different roles.</li>
</ul>
<p>Examples:</p>
<ul>
<li><p class="first">site.yml = This is generally the main Playbook file. It should
include all other Playbook files required if more than one is used.
[5]</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="c1"># File: site.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">include</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx.yml</span>
<span class="l l-Scalar l-Scalar-Plain">include</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">php-fpm.yml</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="c1"># File: nginx.yml</span>
<span class="p p-Indicator">-</span>  <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">webnodes</span>
   <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
     <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">common</span>
     <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
</pre></div>
</div>
</li>
<li><p class="first">roles/<code class="docutils literal notranslate"><span class="pre">&lt;ROLENAME&gt;</span></code>/vars/main.yml = Global variables for a role.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="c1"># File: vars/main.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">memcache_hosts</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">192.168.1.11</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">192.168.1.12</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">192.168.1.13</span>
<span class="l l-Scalar l-Scalar-Plain">ldap_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">192.168.10.1</span>
</pre></div>
</div>
</li>
<li><p class="first">group_vars/ and host_vars/ = These files define variables for hosts
and/or groups. Details about this can be found in the
<a class="reference external" href="#configuration---inventory---variables">Variables</a> section.</p>
</li>
<li><p class="first">templates/ = Template configuration files for services. The files in
here end with a “.j2” suffix to signify that it uses the Jinja2
template engine. [1]</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>My domain name is {{ domain }}<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="performance-tuning">
<h3><a class="toc-backref" href="#id16">Performance Tuning</a><a class="headerlink" href="#performance-tuning" title="Permalink to this headline">¶</a></h3>
<p>A few configuration changes can help to speed up the runtime of Ansible
modules and Playbooks.</p>
<ul class="simple">
<li>ansible.cfg<ul>
<li>[defaults]<ul>
<li>forks = The number of parallel processes that are spun up for
remote connections. The default is 5. This should be increased
to a larger number to handle . The recommended number is
<code class="docutils literal notranslate"><span class="pre">forks</span> <span class="pre">=</span> <span class="pre">(processor_cores</span> <span class="pre">*</span> <span class="pre">5)</span></code>. [35]</li>
<li>pipelining = Enable pipelining to bundle commands together that
do not require a file transfer. This is disabled by default
because most sudo users are enforced to use the <code class="docutils literal notranslate"><span class="pre">requiretty</span></code>
sudo option that pipelining is incompatible with. [28]</li>
<li>gathering = Set this to “explicit” to only gather the necessary
facts when/if they are required by the Playbook. [29]</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Fact caching will help to cache host information. By only gathering the
setup facts information once, this helps to speed up execution time if
Ansible will need to run Playbooks on hosts multiple times. The
supported types of fact caching are currently memory (none), file
(json), and Redis.</p>
<p>All:</p>
<ul class="simple">
<li>ansible.cfg<ul>
<li>[defaults]<ul>
<li>gathering = smart</li>
<li>fact_caching = 86400<ul>
<li>This will set the cache time to 1 day.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>File (JSON):</p>
<ul class="simple">
<li>ansible.cfg<ul>
<li>[defaults]<ul>
<li>fact_caching = jsonfile</li>
<li>fact_caching_connection =
<code class="docutils literal notranslate"><span class="pre">&lt;TEMPORARY_DIRECTORY_TO_AUTOMATICALLY_CREATE&gt;</span></code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Redis:</p>
<ul class="simple">
<li>ansible.cfg<ul>
<li>[defaults]<ul>
<li>fact_caching = redis<ul>
<li>As of Ansible 2.3, there is still no way of defining a
custom IP and/or port of a Redis server. It is assumed to be
running on localhost with the default port.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>[4]</p>
</div>
</div>
<div class="section" id="inventory">
<h2><a class="toc-backref" href="#id17">Inventory</a><a class="headerlink" href="#inventory" title="Permalink to this headline">¶</a></h2>
<p>Default file: /etc/ansible/hosts</p>
<p>The hosts file is referred to as the “inventory” for Ansible. Here
servers and groups of servers are defined. Ansible can then be used to
execute commands and/or Playbooks on these hosts. There are two groups
that are automatically created by Ansible. The “all” group is every
defined host and “ungrouped” is a group of hosts that do not belong to
any groups. User defined groups are created by using brackets “[” and
“]” to specify the name.</p>
<p>Syntax:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">&lt;SERVER1NAME&gt; ansible_host</span><span class="o">=</span><span class="s">&lt;SERVER1_HOSTNAME&gt;</span>

<span class="k">[&lt;GROUPNAME&gt;]</span>
<span class="na">&lt;SERVER1NAME&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[dns-us]</span>
<span class="na">dns-us01</span>
<span class="na">dns-us02</span>
<span class="na">dns-us03</span>
</pre></div>
</div>
<p>A sequence of letters “[a:z]” or numbers “[0:9]” can be used to
dynamically define a large number of hosts.</p>
<p>Example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[dns-us]</span>
<span class="na">dns-us[01:03]</span>
</pre></div>
</div>
<p>A group can also be created from other groups by using the “:children”
tag.</p>
<p>Example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[dns-global:children]</span>
<span class="na">dns-us</span>
<span class="na">dns-ca</span>
<span class="na">dns-mx</span>
</pre></div>
</div>
<p>Variables are created for a host and/or group using the tag “:vars”.
Then any custom variable can be defined and associated with a string. A
host specifically can also have it’s variables defined on the same line
as it’s Ansible inventory variables. [3] A few examples are listed
below. These can also be defined in separate files as explained in the “Variables” chapter.</p>
<p>Example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">examplehost ansible_user</span><span class="o">=</span><span class="s">toor ansible_host=192.168.0.1 custom_var_here=True</span>
</pre></div>
</div>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[examplegroup:vars]</span>
<span class="na">domain_name</span><span class="o">=</span><span class="s">examplehost.tld</span>
<span class="na">domain_ip</span><span class="o">=</span><span class="s">192.168.7.7</span>
</pre></div>
</div>
<p>There are a large number of customizations that can be used to suit most
server’s access requirements.</p>
<p>Common inventory options:</p>
<ul class="simple">
<li>ansible_host = The IP address or hostname of the server.</li>
<li>ansible_port = A custom SSH port (i.e., if not using the standard
port 22).</li>
<li>ansible_connection = These options specify how to log in to execute
tasks.<ul>
<li>chroot = Run commands in a directory using chroot.</li>
<li>local = Run on the local system.</li>
<li>ssh = Run commands over a remote SSH connection (default).</li>
<li>winrm = Use the Windows Remote Management (WinRM) protocols to
connect to Windows servers.</li>
</ul>
</li>
<li>ansible_winrm_server_cert_validation<ul>
<li>ignore = Ignore self-signed certificates for SSL/HTTPS connections
via WinRM.</li>
</ul>
</li>
<li>ansible_user = The SSH user.</li>
<li>ansible_pass = The SSH user’s password. This is very insecure to
keep passwords in plain text files so it is recommended to use SSH
keys or pass the “–ask-pass” option to ansible when running tasks.</li>
<li>ansible_ssh_private_key_file = Specify the private SSH key to use
for accessing the server(s).</li>
<li>ansible_ssh_common_args = Append additional SSH command-line
arguments for sftp, scp, and ssh.</li>
<li>ansible_{sftp|scp|ssh}_extra_args = Append arguments for the
specified utility.</li>
<li>ansible_python_interpreter = This will force Ansible to run on
remote systems using a different Python binary. Ansible only supports
Python 2 so on server’s where only Python 3 is available a custom
install of Python 2 can be used instead. [3]</li>
<li>ansible_vault_password_file = Specify the file to read the Vault
password from. [21]</li>
<li>ansible_become = Set to “true” or “yes” to become a different user
than the ansible_user once logged in.<ul>
<li>ansible_become_method = Pick a method for switching users. Valid
options are: sudo, su, pbrun, pfexec, doas, or dzdo.</li>
<li>ansible_become_user = Specify the user to become.</li>
<li>ansible_become_pass = Optionally use a password to change users.
[13]</li>
</ul>
</li>
</ul>
<p>Examples:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">localhost ansible_connection</span><span class="o">=</span><span class="s">local</span>
<span class="na">dns1 ansible_host</span><span class="o">=</span><span class="s">192.168.1.53 ansible_port=2222 ansible_become=true ansible_become_user=root ansible_become_method=sudo</span>
<span class="na">dns2 ansible_host</span><span class="o">=</span><span class="s">192.168.1.54</span>
<span class="na">/home/user/ubuntu1604 ansible_connection</span><span class="o">=</span><span class="s">chroot</span>
</pre></div>
</div>
<p>[4]</p>
<div class="section" id="production-and-staging">
<h3><a class="toc-backref" href="#id18">Production and Staging</a><a class="headerlink" href="#production-and-staging" title="Permalink to this headline">¶</a></h3>
<p>Ansible best practices suggest having a separation between a production
and staging inventory. Changes should be tested in the staging
environment and then eventually ran on the production server(s).</p>
<p>Scenario #1 - Use the Same Variables</p>
<p>A different inventory file can be created if all of the variables are
the exact same in the production and staging environments. This will run
the same Playbook roles on a different server.</p>
<p>Syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── production
├── staging
├── group_vars
│   ├── &lt;GROUP&gt;
├── host_vars
│   ├── &lt;HOST&gt;
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-playbook -i production &lt;PLAYBOOK&gt;.yml
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-playbook -i staging &lt;PLAYBOOK&gt;.yml
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── production
├── staging
├── group_vars
│   ├── web
│   ├── db
│   ├── all
├── host_vars
│   ├── web1
│   ├── web2
│   ├── db1
│   ├── db2
│   ├── db3
</pre></div>
</div>
<p>Scenario #2 - Use Different Variables</p>
<p>In more complex scenarios, the inventory and variables will be different
in production and staging. This requires further separation. Instead of
using a “production” or “staging” inventory file, they can be split into
directories. These directories contain their own group and host
variables.</p>
<p>Syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── production
│   ├── group_vars
│   │   ├── &lt;GROUP&gt;
│   ├── host_vars
│   │   ├── &lt;HOST&gt;
│   └── inventory
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── staging
│   ├── group_vars
│   │   ├── &lt;GROUP&gt;
│   ├── host_vars
│   │   ├── &lt;HOST&gt;
│   └── inventory
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-playbook -i production &lt;PLAYBOOK&gt;.yml
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-playbook -i staging &lt;PLAYBOOK&gt;.yml
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── production
│   ├── group_vars
│   │   ├── web
│   │   ├── db
│   │   ├── all
│   ├── host_vars
│   │   ├── web1
│   │   ├── web2
│   │   ├── db1
│   │   ├── db2
│   │   ├── db3
│   └── inventory
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── staging
│   ├── group_vars
│   │   ├── web
│   │   ├── db
│   │   ├── all
│   ├── host_vars
│   │   ├── web1
│   │   ├── web2
│   │   ├── db1
│   │   ├── db2
│   │   ├── db3
│   └── inventory
</pre></div>
</div>
<p>[5][22]</p>
</div>
<div class="section" id="variables">
<h3><a class="toc-backref" href="#id19">Variables</a><a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h3>
<p>Variables that Playbooks will use can be defined for specific hosts
and/or groups. The file that stores the variables should reflect the
name of the host and/or group. Global variables can be found in the
<code class="docutils literal notranslate"><span class="pre">/etc/ansible/</span></code> directory. [3]</p>
<p>Inventory variable directories and files:</p>
<ul class="simple">
<li>host_vars/</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&lt;HOST&gt;</span></code> = Variables for a host defined in the inventory file.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>group_vars/</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&lt;GROUP&gt;</span></code>/</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>vars = Variables for this group.</li>
<li>vault = Encrypted Ansible Vault variables. [5]</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>all = This file contains variables for all hosts.</li>
<li>ungrouped = This file contains variables for all hosts that are not defined in any groups.</li>
</ul>
</div></blockquote>
<p>It is assumed that the inventory variable files are in YAML format. Here
is an example for a host variable file.</p>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">domain_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">examplehost.tld</span>
<span class="l l-Scalar l-Scalar-Plain">domain_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">192.168.10.1</span>
<span class="l l-Scalar l-Scalar-Plain">hello_string</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Hello World!</span>
</pre></div>
</div>
<p>In the Playbook and/or template files, these variables can then be
referenced when enclosed by double braces “{{” and “}}”. [4]</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Hello world from {{ domain_name }}!
</pre></div>
</div>
<p>Variables from other hosts or groups can also be referenced.</p>
<p>Syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">groupvars</span><span class="p">[</span><span class="s1">&#39;&lt;GROUPNAME&gt;&#39;</span><span class="p">][</span><span class="s1">&#39;&lt;VARIABLE&gt;&#39;</span><span class="p">]</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="n">hostvars</span><span class="p">[</span><span class="s1">&#39;&lt;HOSTNAME&gt;&#39;</span><span class="p">][</span><span class="s1">&#39;&lt;VARIABLE&gt;&#39;</span><span class="p">]</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">groupvars</span><span class="o">.&lt;</span><span class="n">HOSTNAME</span><span class="o">&gt;.&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;</span><span class="p">}}</span>
<span class="p">{{</span> <span class="n">hostvars</span><span class="o">.&lt;</span><span class="n">HOSTNAME</span><span class="o">&gt;.&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;</span> <span class="p">}}</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">command</span><span class="p">:</span> <span class="n">echo</span> <span class="p">{{</span> <span class="n">hostvars</span><span class="o">.</span><span class="n">db3</span><span class="o">.</span><span class="n">hostname</span> <span class="p">}}</span>
</pre></div>
</div>
<p>The order that variables take precedence in is listed below. The bottom
locations get overridden by anything above them.</p>
<ul class="simple">
<li>extra vars</li>
<li>task vars</li>
<li>block vars</li>
<li>role and include vars</li>
<li>set_facts</li>
<li>registered vars</li>
<li>play vars_files</li>
<li>play vars_prompt</li>
<li>play vars</li>
<li>host facts</li>
<li>playbook host_vars</li>
<li>playbook group_vars</li>
<li>inventory host_vars</li>
<li>inventory group_vars</li>
<li>inventory vars</li>
<li>role defaults</li>
</ul>
<p>[5]</p>
</div>
<div class="section" id="vault-encryption">
<h3><a class="toc-backref" href="#id20">Vault Encryption</a><a class="headerlink" href="#vault-encryption" title="Permalink to this headline">¶</a></h3>
<p>Any file in a Playbook can be encrypted. This is useful for storing
sensitive username and passwords securely. A password is used to open
these files after encryption. All encrypted files in a Playbook should
use the same password.</p>
<p>Vault Usage:</p>
<ul>
<li><p class="first">Create a new encrypted file.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-vault create &lt;FILE&gt;.yml
</pre></div>
</div>
</li>
<li><p class="first">Encrypt an existing plaintext file.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-vault encrypt &lt;FILE&gt;.yml
</pre></div>
</div>
</li>
<li><p class="first">Viewing the contents of the file.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-vault view &lt;FILE&gt;.yml
</pre></div>
</div>
</li>
<li><p class="first">Edit the encrypted file.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-vault edit &lt;FILE&gt;.yml
</pre></div>
</div>
</li>
<li><p class="first">Change the password.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-vault rekey &lt;FILE&gt;.yml
</pre></div>
</div>
</li>
<li><p class="first">Decrypt to plaintext.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-vault decrypt &lt;FILE&gt;.yml
</pre></div>
</div>
</li>
</ul>
<p>Playbook Usage:</p>
<ul>
<li><p class="first">Run a Playbook, prompting the user for the Vault password.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-playbook --ask-vault-pass &lt;PLAYBOOK&gt;.yml
</pre></div>
</div>
</li>
<li><p class="first">Run the Playbook, reading the file for the vault password.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-playbook --vault-password-file &lt;PATH_TO_VAULT_PASSWORD_FILE&gt; &lt;PLAYBOOK&gt;.yml
</pre></div>
</div>
</li>
</ul>
<p>[21]</p>
</div>
<div class="section" id="dynamic">
<h3><a class="toc-backref" href="#id21">Dynamic</a><a class="headerlink" href="#dynamic" title="Permalink to this headline">¶</a></h3>
<p>Dynamic inventory can be used to automatically obtain information about
hosts from various infrastructure platforms and tools. Community
provided scripts be be found here:
<a class="reference external" href="https://github.com/ansible/ansible/tree/devel/contrib/inventory">https://github.com/ansible/ansible/tree/devel/contrib/inventory</a>.</p>
</div>
</div>
<div class="section" id="modules">
<h2><a class="toc-backref" href="#id22">Modules</a><a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="main-modules">
<h3><a class="toc-backref" href="#id23">Main Modules</a><a class="headerlink" href="#main-modules" title="Permalink to this headline">¶</a></h3>
<p>Root Pages refers to generic Playbook-related modules as the “main
modules.” This is not to be confused with official naming of “core
modules” which is a mixture of both the main and regular modules
mentioned in this guide.</p>
<div class="section" id="assert">
<h4><a class="toc-backref" href="#id24">Assert</a><a class="headerlink" href="#assert" title="Permalink to this headline">¶</a></h4>
<p>Assert is used to check if one or more statements is True. The module
will fail if any statement returns False. Optionally, a message can be
displayed if any operator comparisons return False.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">assert</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">that</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;&lt;VALUE1&gt;</span><span class="nv"> </span><span class="s">&lt;COMPARISON_OPERATOR&gt;</span><span class="nv"> </span><span class="s">&lt;VALUE2&gt;&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">msg</span><span class="p p-Indicator">:</span> <span class="s">&quot;&lt;MESSAGE&gt;&quot;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">cmd</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/usr/bin/date</span>
  <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">date_command</span>
  <span class="l l-Scalar l-Scalar-Plain">ignore_errors</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">assert</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">that</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;date_command.rc</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">0&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;&#39;2017&#39;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">date_command.stdout&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">msg</span><span class="p p-Indicator">:</span> <span class="s">&quot;Date</span><span class="nv"> </span><span class="s">either</span><span class="nv"> </span><span class="s">failed</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">did</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">return</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">correct</span><span class="nv"> </span><span class="s">year.&quot;</span>
</pre></div>
</div>
<p>[45]</p>
</div>
<div class="section" id="async">
<h4><a class="toc-backref" href="#id25">Async</a><a class="headerlink" href="#async" title="Permalink to this headline">¶</a></h4>
<p>The “async” function can be used to start a detached task on a remote
system. Ansible will then poll the server periodically to see if the
task is complete (by default, it checks every 10 seconds). Optionally a
custom poll time can be set. [15]</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">async</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;SECONDS_TO_RUN&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">command</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bash /usr/local/bin/example.sh</span>
   <span class="l l-Scalar l-Scalar-Plain">async</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">15</span>
   <span class="l l-Scalar l-Scalar-Plain">poll</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
</pre></div>
</div>
</div>
<div class="section" id="block">
<h4><a class="toc-backref" href="#id26">Block</a><a class="headerlink" href="#block" title="Permalink to this headline">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">block</span></code> is used to handle logic for executing tasks. A set of tasks
can be run, for example, if a condition is met. This also handles errors
in a <code class="docutils literal notranslate"><span class="pre">try/except</span></code> fashion. If the code from the <code class="docutils literal notranslate"><span class="pre">block</span></code> fails then
it proceeds to run the tasks in the <code class="docutils literal notranslate"><span class="pre">rescue</span></code> section. There is also a
final <code class="docutils literal notranslate"><span class="pre">always</span></code> section that will execute whether the block failed or
not.</p>
<p>Syntax (minimal):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">block</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Syntax (full):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">block</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">&lt;ACTIONS&gt;</span>
<span class="l l-Scalar l-Scalar-Plain">rescue</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">&lt;ACTIONS&gt;</span>
<span class="l l-Scalar l-Scalar-Plain">always</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">&lt;ACTIONS&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Installing docker</span>
  <span class="l l-Scalar l-Scalar-Plain">block</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">package</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">docker</span>
        <span class="l l-Scalar l-Scalar-Plain">state</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">latest</span>
  <span class="l l-Scalar l-Scalar-Plain">rescue</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">msg</span><span class="p p-Indicator">:</span> <span class="s">&quot;Unable</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">properly</span><span class="nv"> </span><span class="s">install</span><span class="nv"> </span><span class="s">docker.</span><span class="nv"> </span><span class="s">Cleaning</span><span class="nv"> </span><span class="s">up</span><span class="nv"> </span><span class="s">now.&quot;</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">file</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">dest</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/custom/docker/files</span>
        <span class="l l-Scalar l-Scalar-Plain">state</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">absent</span>
  <span class="l l-Scalar l-Scalar-Plain">always</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">msg</span><span class="p p-Indicator">:</span> <span class="s">&quot;Continuing</span><span class="nv"> </span><span class="s">onto</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">next</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">tasks...&quot;</span>
</pre></div>
</div>
<p>[53]</p>
</div>
<div class="section" id="check-mode">
<h4><a class="toc-backref" href="#id27">Check Mode</a><a class="headerlink" href="#check-mode" title="Permalink to this headline">¶</a></h4>
<p>A Playbook can run in a test mode with <code class="docutils literal notranslate"><span class="pre">--check</span></code>. No changes will be
made. Optionally, the <code class="docutils literal notranslate"><span class="pre">--diff</span></code> argument can also be added to show
exactly what would be changed.</p>
<p>Syntax:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-playbook --check site.yml
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-playbook --check --diff site.yml
</pre></div>
</div>
<p>In Ansible 2.1, the <code class="docutils literal notranslate"><span class="pre">ansible_check_mode</span></code> variable was added to verify
if check mode is on or off. This can be used to forcefully run tasks
even if check mode is on.</p>
<p>Examples:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">command</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;Hello world&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">when</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">not ansible_check_mode</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Continue if this fails when check_mode is enabled</span>
   <span class="l l-Scalar l-Scalar-Plain">stat</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">path=/etc/neutron/neutron.conf</span>
   <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">neutron_conf</span>
   <span class="l l-Scalar l-Scalar-Plain">ignore_errors</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ansible_check_mode</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<p>In Ansible 2.2, the <code class="docutils literal notranslate"><span class="pre">check_mode</span></code> module can be forced to run during a
check mode. [31]</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">check_mode</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">no</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Install the EPEL repository</span>
  <span class="l l-Scalar l-Scalar-Plain">yum</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">epel-release</span>
    <span class="l l-Scalar l-Scalar-Plain">state</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">latest</span>
  <span class="l l-Scalar l-Scalar-Plain">check_mode</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">no</span>
</pre></div>
</div>
</div>
<div class="section" id="debug">
<h4><a class="toc-backref" href="#id28">Debug</a><a class="headerlink" href="#debug" title="Permalink to this headline">¶</a></h4>
<p>The debug module is used for helping facilitate troubleshooting. It
prints out specified information to standard output.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Common options:</p>
<ul class="simple">
<li>msg = Display a message.</li>
<li>var = Display a variable.</li>
<li>verbosity = Show more verbose information. The higher the number, the
more verbose the information will be. [45]</li>
</ul>
<p>Example:</p>
<ul class="simple">
<li>Print Ansible’s hostname of the current server that the script is
being run on.</li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">msg</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">The inventory host name is {{ inventory_hostname }}</span>
</pre></div>
</div>
</div>
<div class="section" id="gather-facts">
<h4><a class="toc-backref" href="#id29">Gather Facts</a><a class="headerlink" href="#gather-facts" title="Permalink to this headline">¶</a></h4>
<p>By default, Ansible will connect to all hosts related to a Playbook and
cache information about them. This includes hostnames, IP addresses, the
operating system version, etc.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">gather_facts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;BOOLEAN&gt;</span>
</pre></div>
</div>
<p>If these variables are not required then gather_facts and be set to
“False” to speed up a Playbook’s run time. [23]</p>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">gather_facts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
</pre></div>
</div>
<p>In other situations, information about other hosts may be required that
are not being used in the Playbook. Facts can be gather about them
before the roles in a Playbook are executed.</p>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">squidproxy1,squidproxy2,squidproxy3</span>
  <span class="l l-Scalar l-Scalar-Plain">gather_facts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">monitor1,monitor2</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">common</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">haproxy</span>
</pre></div>
</div>
</div>
<div class="section" id="handlers-and-notify">
<h4><a class="toc-backref" href="#id30">Handlers and Notify</a><a class="headerlink" href="#handlers-and-notify" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">notify</span></code> function will run a handler defined in the
<code class="docutils literal notranslate"><span class="pre">handlers/main.yml</span></code> file within a role if the state of the module it’s
tied to changes. Optionally, a “listen” directive can be given to
multiple handlers. This will allow them all to be executed at once (in
the order that they were defined). Handlers cannot have the same name,
only the same listen name. This is useful for checking if a
configuration file changed and, if it did, then restart the service.</p>
<p>Handlers only execute when a Playbook successfully completes. For
executing handlers sooner, refer to the “meta” main module’s
documentation.</p>
<p>Syntax (handlers/main.yml):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">handlers</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;HANDLER_NAME&gt;</span>
    <span class="l l-Scalar l-Scalar-Plain">&lt;MODULE&gt;</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;ARGS&gt;</span>
    <span class="l l-Scalar l-Scalar-Plain">listen</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;LISTEN_HANDLER_NAME&gt;</span>
</pre></div>
</div>
<p>Syntax (tasks/main.yml):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;MODULE&gt;</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;ARGS&gt;</span>
  <span class="l l-Scalar l-Scalar-Plain">notify</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;HANDLER_NAME&gt;</span>
</pre></div>
</div>
<p>Example (handlers/main.yml):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">handlers</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">restart nginx</span>
    <span class="l l-Scalar l-Scalar-Plain">service</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=nginx state=restarted</span>
    <span class="l l-Scalar l-Scalar-Plain">listen</span><span class="p p-Indicator">:</span> <span class="s">&quot;restart</span><span class="nv"> </span><span class="s">stack&quot;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">restart php-fpm</span>
    <span class="l l-Scalar l-Scalar-Plain">service</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=php-fpm state=restarted</span>
    <span class="l l-Scalar l-Scalar-Plain">listen</span><span class="p p-Indicator">:</span> <span class="s">&quot;restart</span><span class="nv"> </span><span class="s">stack&quot;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">restart mariadb</span>
    <span class="l l-Scalar l-Scalar-Plain">service</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=mariadb state=restarted</span>
    <span class="l l-Scalar l-Scalar-Plain">listen</span><span class="p p-Indicator">:</span> <span class="s">&quot;restart</span><span class="nv"> </span><span class="s">stack&quot;</span>
</pre></div>
</div>
<p>Example (tasks/main.yml):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">template</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">src=nginx.conf.j2 dest=/etc/nginx/nginx.conf</span>
  <span class="l l-Scalar l-Scalar-Plain">notify</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">restart stack</span>
</pre></div>
</div>
<p>[2]</p>
</div>
<div class="section" id="meta">
<h4><a class="toc-backref" href="#id31">Meta</a><a class="headerlink" href="#meta" title="Permalink to this headline">¶</a></h4>
<p>The meta module handles some aspects of the Ansible Playbooks execution.</p>
<p>All options (free form):</p>
<ul class="simple">
<li>clear_facts = Removes all of the gathered facts about the Playbook
hosts.</li>
<li>clear_host_errors = Removes hosts from being in a failed state to
continue running the Playbook.</li>
<li>end_play = End the Playbook instantly and mark it as successfully
unless there were any failures.</li>
<li>flush_handlers = Any handlers that have been notified will be run.</li>
<li>noop = Do no operations. This is mainly for Ansible developers and
debugging purposes.</li>
<li>refresh_inventory = Reload the inventory files. This is useful when
using dynamic inventory scripts.</li>
<li>reset_connection = Closes the current connections to the hosts and
start a new connection.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">meta</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">meta</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">flush_handlers</span>
</pre></div>
</div>
<p>[45]</p>
</div>
<div class="section" id="pause">
<h4><a class="toc-backref" href="#id32">Pause</a><a class="headerlink" href="#pause" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">pause</span></code> module is used to temporarily pause an entire Playbook. If
no time argument is specified, the end-user will need to hit <code class="docutils literal notranslate"><span class="pre">CTRL+c</span></code>
then <code class="docutils literal notranslate"><span class="pre">c</span></code> to continue or hit <code class="docutils literal notranslate"><span class="pre">CTRL+c</span></code> and then <code class="docutils literal notranslate"><span class="pre">a</span></code> to abort the
Playbook.</p>
<p>All options:</p>
<ul class="simple">
<li>minutes</li>
<li>prompt = An optional text to display to the end-user.</li>
<li>seconds</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">pause</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">pause</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">minutes</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
    <span class="l l-Scalar l-Scalar-Plain">prompt</span><span class="p p-Indicator">:</span> <span class="s">&quot;The</span><span class="nv"> </span><span class="s">new</span><span class="nv"> </span><span class="s">program</span><span class="nv"> </span><span class="s">needs</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">finish</span><span class="nv"> </span><span class="s">initializing.&quot;</span>
</pre></div>
</div>
<p>[45]</p>
</div>
<div class="section" id="roles">
<h4><a class="toc-backref" href="#id33">Roles</a><a class="headerlink" href="#roles" title="Permalink to this headline">¶</a></h4>
<p>A Playbook consists of roles. Each role that needs to be run needs to be
specified in a list. Additional roles can be added within a role
dynamically or statically using “include_role” or “import_role.” [49]</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;ROLE1&gt;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;ROLE2&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">common</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">httpd</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">sql</span>
</pre></div>
</div>
</div>
<div class="section" id="run-once">
<h4><a class="toc-backref" href="#id34">Run Once</a><a class="headerlink" href="#run-once" title="Permalink to this headline">¶</a></h4>
<p>In some situations a command should only need to be run on one node. An
example is when using a MariaDB Galera cluster where database changes
will get synced to all nodes.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">run_once</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
<p>This can also be assigned to a specific host.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">run_once</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="l l-Scalar l-Scalar-Plain">delegate_to</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;HOST&gt;</span>
</pre></div>
</div>
<p>[14]</p>
</div>
<div class="section" id="serial">
<h4><a class="toc-backref" href="#id35">Serial</a><a class="headerlink" href="#serial" title="Permalink to this headline">¶</a></h4>
<p>By default, Ansible will only run tasks on 5 hosts at once. This limit
can be modified to run on a different number of hosts or a percentage of
the amount of hosts. This is useful for running Playbooks on a large
amount of servers. [14]</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">serial</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;NUMBER_OR_PERCENTAGE&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">web</span>
  <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Installing Nginx</span>
      <span class="l l-Scalar l-Scalar-Plain">package</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=nginx state=present</span>
      <span class="l l-Scalar l-Scalar-Plain">serial</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">50%</span>
</pre></div>
</div>
</div>
<div class="section" id="strategy">
<h4><a class="toc-backref" href="#id36">Strategy</a><a class="headerlink" href="#strategy" title="Permalink to this headline">¶</a></h4>
<p>By default, a Playbook strategy is set to “linear” meaning that it will
only move onto the next task once it completes on all hosts. This can be
changed to “free” so that once a task completes on a host, that host
will instantly move onto the next available task.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">strategy</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">free</span>
</pre></div>
</div>
<p>Example (site.yml):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">all</span>
  <span class="l l-Scalar l-Scalar-Plain">strategy</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">free</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">gitlab</span>
</pre></div>
</div>
<p>[38]</p>
</div>
<div class="section" id="tags">
<h4><a class="toc-backref" href="#id37">Tags</a><a class="headerlink" href="#tags" title="Permalink to this headline">¶</a></h4>
<p>Each task in a tasks file can have a tag associated to it. This should
be appended to the end of the task. This is useful for debugging and
separating tasks into specific groups. Here is the syntax:</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">tags</span><span class="p p-Indicator">:</span>
 <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;TAG1&gt;</span>
 <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;TAG2&gt;</span>
 <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;TAG3&gt;</span>
</pre></div>
</div>
<p>Run only tasks that include specific tags.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-playbook --tags <span class="s2">&quot;&lt;TAG1&gt;,&lt;TAG2&gt;,&lt;TAG3&gt;&quot;</span>
</pre></div>
</div>
<p>Alternatively, skip specific tags.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-playbook --skip-tags <span class="s2">&quot;&lt;TAG1&gt;,&lt;TAG2&gt;,&lt;TAG3&gt;&quot;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="c1"># File: webserver.yaml</span>
 <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">package</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=nginx state=latest</span>
   <span class="l l-Scalar l-Scalar-Plain">tags</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">yum</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">rpm</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-playbook --tags <span class="s2">&quot;yum&quot;</span> site.yml webnode1
</pre></div>
</div>
<p>[8]</p>
</div>
<div class="section" id="tasks">
<h4><a class="toc-backref" href="#id38">Tasks</a><a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h4>
<p>Playbooks can include specific task files or define and run tasks in the
Playbook file itself. In Ansible 2.0, loops, variables, and other
dynamic elements now work correctly.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;HOSTS&gt;</span>
  <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;MODULE&gt;</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">jenkins</span>
  <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span>
       <span class="l l-Scalar l-Scalar-Plain">msg</span><span class="p p-Indicator">:</span> <span class="s">&quot;Warning:</span><span class="nv"> </span><span class="s">This</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">modify</span><span class="nv"> </span><span class="s">ALL</span><span class="nv"> </span><span class="s">Jenkins</span><span class="nv"> </span><span class="s">servers.&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">common</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">docker</span>
</pre></div>
</div>
<p>[45]</p>
</div>
<div class="section" id="wait-for">
<h4><a class="toc-backref" href="#id39">Wait For</a><a class="headerlink" href="#wait-for" title="Permalink to this headline">¶</a></h4>
<p>A condition can be searched for before continuing on to the next task.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">wait_for</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">wait_for</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">timeout</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="l l-Scalar l-Scalar-Plain">delegate_to</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">localhost</span>
</pre></div>
</div>
<p>Common options:</p>
<ul class="simple">
<li>delay = How long to wait (in seconds) before running the wait_for
check.</li>
<li>path = A file to check.</li>
<li>host = A host to check a connection to.</li>
<li>port = A port to check on the specified host.</li>
<li>connect_timeout = How long to wait (in seconds) before retrying the
connection.</li>
<li>search_regex = A regular expression string to match from either a
port or file.</li>
<li>state<ul>
<li>started = Check for a open port.</li>
<li>stopped = Check for a closed port.</li>
<li>drained = Check for active connections to the port.</li>
<li>present = Check for a file.</li>
<li>absent = Verify a file does not exist.</li>
</ul>
</li>
<li>timeout = How long to wait (in seconds) before continuing on.</li>
</ul>
<p>[45]</p>
</div>
<div class="section" id="when">
<h4><a class="toc-backref" href="#id40">When</a><a class="headerlink" href="#when" title="Permalink to this headline">¶</a></h4>
<p>The “when” function can be used to specify that a sub-task should only
run if the condition returns turn. This is similar to an “if” statement
in programming languages. It is usually the last line to a sub-task. [11]</p>
<p>“When” Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">package</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=httpd state=latest</span>
   <span class="l l-Scalar l-Scalar-Plain">when</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible_os_family == &quot;CentOS&quot;</span>
</pre></div>
</div>
<p>“Or” example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">when</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible_os_family == &quot;CentOS&quot; or when</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible_os_family == &quot;Debian&quot;</span>
</pre></div>
</div>
<p>“And” example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">when</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">(ansible_os_family == &quot;Fedora&quot;) and</span>
      <span class="l l-Scalar l-Scalar-Plain">(ansible_distribution_major_version == &quot;26&quot;)</span>
</pre></div>
</div>
</div>
<div class="section" id="errors">
<h4><a class="toc-backref" href="#id41">Errors</a><a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h4>
<p>These modules handle Playbook errors.</p>
<div class="section" id="any-errors-fatal">
<h5><a class="toc-backref" href="#id42">Any Errors Fatal</a><a class="headerlink" href="#any-errors-fatal" title="Permalink to this headline">¶</a></h5>
<p>By default, a Playbook will continue to run on all of the hosts that do
not have any failures reported by modules. It is possible to stop the
Playbook from running on all hosts once an error has occurred. [12]</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">any_errors_fatal</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">nfs_servers</span>
  <span class="l l-Scalar l-Scalar-Plain">any_errors_fatal</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nfs</span>
</pre></div>
</div>
</div>
<div class="section" id="fail">
<h5><a class="toc-backref" href="#id43">Fail</a><a class="headerlink" href="#fail" title="Permalink to this headline">¶</a></h5>
<p>The simple <code class="docutils literal notranslate"><span class="pre">fail</span></code> module will make a Playbook fail. This is useful
when checking if a certain condition has to exist to continue on.</p>
<p>All options:</p>
<ul class="simple">
<li>msg = An optional message to provide the end-user.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">fail</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">fail</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">msg</span><span class="p p-Indicator">:</span> <span class="s">&quot;Unexpected</span><span class="nv"> </span><span class="s">return</span><span class="nv"> </span><span class="s">code.&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">when</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">(command_variable.rc != 0) or (command_variable.rc != 900)</span>
</pre></div>
</div>
<p>[45]</p>
</div>
<div class="section" id="failed-when">
<h5><a class="toc-backref" href="#id44">Failed When</a><a class="headerlink" href="#failed-when" title="Permalink to this headline">¶</a></h5>
<p>In some situations, a error from a command or module may not be reported
properly. This module can be used to force a failure based on a certain
condition. [12]</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">failed_when</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;CONDITION&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">command</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;Testing a failure. 123.&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">cmd</span>
  <span class="l l-Scalar l-Scalar-Plain">failed_when</span><span class="p p-Indicator">:</span> <span class="s">&quot;&#39;123&#39;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">cmd.stdout&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="ignore-errors">
<h5><a class="toc-backref" href="#id45">Ignore Errors</a><a class="headerlink" href="#ignore-errors" title="Permalink to this headline">¶</a></h5>
<p>Playbooks, by default, will stop running on a host if it fails to run a
module. Sometimes a module will report a false-positive or an error will
be expected. This will allow the Playbook to continue onto the next
step. [12]</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">ignore_errors</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>- name: Even though this will fail, the Playbook will keep running.
  package: <span class="nv">name</span><span class="o">=</span>does-not-exist <span class="nv">state</span><span class="o">=</span>present
  ignore_errors: yes
</pre></div>
</div>
</div>
</div>
<div class="section" id="includes">
<h4><a class="toc-backref" href="#id46">Includes</a><a class="headerlink" href="#includes" title="Permalink to this headline">¶</a></h4>
<p>Include and import modules allow other elements of a Playbook to be
called and executed.</p>
<div class="section" id="import-playbook">
<h5><a class="toc-backref" href="#id47">Import Playbook</a><a class="headerlink" href="#import-playbook" title="Permalink to this headline">¶</a></h5>
<p>The proper way to use other Playbooks in a Playbook is to use the
<code class="docutils literal notranslate"><span class="pre">import_playbook</span></code>. Before Ansible 2.4 this was handled via the
<code class="docutils literal notranslate"><span class="pre">include</span></code> module. There is also no <code class="docutils literal notranslate"><span class="pre">include_playbook</span></code> module, only
<code class="docutils literal notranslate"><span class="pre">import_playbook</span></code>.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">import_playbook</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;PLAYBOOK&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">import_playbook</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx.yml</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">import_playbook</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">phpfpm.yml</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">import_playbook</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mariadb.yml</span>
</pre></div>
</div>
<p>[49][58]</p>
</div>
<div class="section" id="import-and-include-role">
<h5><a class="toc-backref" href="#id48">Import and Include Role</a><a class="headerlink" href="#import-and-include-role" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">import_role</span></code> is a static inclusion of a role that cannot be used
in loops. This is loaded on runtime of the Playbook</p>
<p>The <code class="docutils literal notranslate"><span class="pre">include_role</span></code> is a dynamic inclusion of a role that can be used
in loops. Tags will not automatically be shown with the <code class="docutils literal notranslate"><span class="pre">--list-tags</span></code>
Ansible Playbook argument. This can be loaded dynamically based on
conditions. [49][58]</p>
<p>All options:</p>
<ul class="simple">
<li>allow_duplicates = Allow a role to be used more than once. Default:
True.</li>
<li>defaults_from = A default variable file to load from the role’s
“default” directory.</li>
<li><strong>name</strong> = The name of the role to import.</li>
<li>private = All of the “default” an “vars” variables in the role are
private and not accessible via the rest of the Playbook.</li>
<li>tasks_from = A task file to load from the role’s “tasks” directory.</li>
<li>vars_from = A variables file to load from the role’s “vars”
directory.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">import_role</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;ROLE_NAME&gt;</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">include_role</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;ROLE_NAME&gt;</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Run only the install.yml task from the openshift role</span>
  <span class="l l-Scalar l-Scalar-Plain">import_role</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">openshift</span>
    <span class="l l-Scalar l-Scalar-Plain">tasks_from</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">install</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Run the Nagios role</span>
  <span class="l l-Scalar l-Scalar-Plain">include_role</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">nagios</span>
  <span class="l l-Scalar l-Scalar-Plain">vars</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">listen_port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
</pre></div>
</div>
<p>[45]</p>
</div>
<div class="section" id="import-and-include-tasks">
<h5><a class="toc-backref" href="#id49">Import and Include Tasks</a><a class="headerlink" href="#import-and-include-tasks" title="Permalink to this headline">¶</a></h5>
<p>Use the <code class="docutils literal notranslate"><span class="pre">import_tasks</span></code> to statically include tasks at a Playbook’s
runtime or <code class="docutils literal notranslate"><span class="pre">include_tasks</span></code> to dynamically run tasks once the Playbook
gets to it.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">import_tasks</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;TASK_FILE&gt;.yml</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">include_tasks</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;TASK_FILE&gt;.yml</span>
</pre></div>
</div>
<p>[49]</p>
</div>
<div class="section" id="include">
<h5><a class="toc-backref" href="#id50">Include</a><a class="headerlink" href="#include" title="Permalink to this headline">¶</a></h5>
<p><strong>Deprecated in: 2.4 Replaced by: include_tasks, import_plays,
import_tasks</strong></p>
<p>Other task files and Playbooks can be included. The functions in them
will immediately run. Variables can be defined for the inclusion as
well. [49]</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">include</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">include</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;TASK&gt;.yml &lt;VAR1&gt;=&lt;VAULE1&gt; &lt;VAR2&gt;=&lt;VALUE2&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">include</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">wine.yml wine_version=1.8.0 compression_format=xz download_util=wget</span>
</pre></div>
</div>
<p>[45]</p>
</div>
<div class="section" id="include-variables">
<h5><a class="toc-backref" href="#id51">Include Variables</a><a class="headerlink" href="#include-variables" title="Permalink to this headline">¶</a></h5>
<p>Additional variables can be defined within a Playbook file. These can be
openly added to the <code class="docutils literal notranslate"><span class="pre">include_vars</span></code> module via YAML syntax.</p>
<p>Common options:</p>
<ul class="simple">
<li>file = Specify a filename to source variables from.</li>
<li>name = Store variables from a file into a specified variable.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">include_vars</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;VARIABLE&gt;</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">all</span>
  <span class="l l-Scalar l-Scalar-Plain">include_vars</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">gateway</span><span class="p p-Indicator">:</span> <span class="s">&quot;192.168.0.1&quot;</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">netmask</span><span class="p p-Indicator">:</span> <span class="s">&quot;255.255.255.0&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">addressing</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">all</span>
  <span class="l l-Scalar l-Scalar-Plain">include_vars</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">file=monitor_vars.yml</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nagios</span>
</pre></div>
</div>
<p>[45]</p>
</div>
</div>
<div class="section" id="loops-ansible-2-5">
<h4><a class="toc-backref" href="#id52">Loops (Ansible &lt; 2.5)</a><a class="headerlink" href="#loops-ansible-2-5" title="Permalink to this headline">¶</a></h4>
<p>Loops can be used to iterate through lists and/or dictionaries. The most
commonly used loop is “with_items.”</p>
<p>Valid loops:</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#do-until-loops">Until</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#looping-over-hashes">WithDict[ionary]</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#finding-first-matched-files">With First
Found</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#flattening-a-list">With
Flattened</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#looping-over-files">With
File</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#id4">With
Fileglob</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#looping-over-filetrees">With
Filetree</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#looping-over-a-list-with-an-index">With Indexed
Items</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#using-ini-file-with-a-loop">With
INI</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#looping-over-the-inventory">With Inventory
Hostnames</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#standard-loops">With
Items</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#iterating-over-the-results-of-a-program-execution">With
Lines</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#nested-loops">With
Nested</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#random-choices">With Random
Choice</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#looping-over-integer-sequences">With
Sequence</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#looping-over-subelements">With
Subelements</a></li>
<li><a class="reference external" href="http://docs.ansible.com/ansible/2.4/playbooks_loops.html#looping-over-parallel-sets-of-data">With
Together</a></li>
</ul>
<div class="section" id="with-first-found">
<h5><a class="toc-backref" href="#id53">With First Found</a><a class="headerlink" href="#with-first-found" title="Permalink to this headline">¶</a></h5>
<p>Multiple file locations can be checked to see what file exists. The
first file found in a given list will be returned to the task. [[10]</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">with_first_round</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;FILE1&gt;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;FILE2&gt;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;FILE3&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Copy over the first Nova configuration that is found</span>
  <span class="l l-Scalar l-Scalar-Plain">copy</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">src={{ item }} dest=/etc/nova/ remote_src=true</span>
  <span class="l l-Scalar l-Scalar-Plain">with_first_found</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="s">&quot;/root/nova.conf&quot;</span>
   <span class="p p-Indicator">-</span> <span class="s">&quot;/etc/nova_backup/nova.conf&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="with-flattened">
<h5><a class="toc-backref" href="#id54">With Flattened</a><a class="headerlink" href="#with-flattened" title="Permalink to this headline">¶</a></h5>
<p>Lists and dictionaries can be converted into one long string. This
allows a task to run once with all of the arguments. This is especially
useful for installing multiple packages at once. [[10]</p>
<p>Loop syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">with_flattened</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;LIST_OR_DICT&gt;</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;LIST_OR_DICT&gt;</span>
</pre></div>
</div>
<p>Variable syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">item</span> <span class="p">}}</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">set_fact</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack_client_packages=&quot;[ &#39;python2-cinderclient&#39;, &#39;python2-glanceclient&#39;, python2-keystoneclient&#39;, &#39;python2-novaclient&#39;, &#39;python2-neutronclient&#39; ]&quot;</span>

<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">service</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name={{ item }} state=restarted</span>
  <span class="l l-Scalar l-Scalar-Plain">with_flattened</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">openstack_client_packages</span><span class="nv"> </span><span class="s">}}&quot;</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">python2-heatclient</span>
   <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span> <span class="s">&#39;python2-manilaclient&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;python2-troveclient&#39;</span> <span class="p p-Indicator">]</span>
</pre></div>
</div>
</div>
<div class="section" id="with-items">
<h5><a class="toc-backref" href="#id55">With Items</a><a class="headerlink" href="#with-items" title="Permalink to this headline">¶</a></h5>
<p>A task can be re-used with items in a list and/or dictionary. [[10]</p>
<p>Loop syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">with_items</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;ITEM1&gt;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;ITEM2&gt;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;ITEM3&gt;</span>
</pre></div>
</div>
<p>List variable syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">item</span> <span class="p">}}</span>
</pre></div>
</div>
<p>Dictionary variable syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">item</span><span class="o">.&lt;</span><span class="n">INDEX_STARTING_AT_0</span><span class="o">&gt;</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">item</span><span class="o">.&lt;</span><span class="n">KEY</span><span class="o">&gt;</span> <span class="p">}}</span>
</pre></div>
</div>
<p>List example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">service</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name={{ item }} state=started enabled=true</span>
  <span class="l l-Scalar l-Scalar-Plain">with_items</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">php-fpm</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">mysql</span>
</pre></div>
</div>
<p>Dictionary example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">user</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name={{ item.name }} group={{ item.group }} password={{ item.2 }} state=present</span>
  <span class="l l-Scalar l-Scalar-Plain">with_items</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;bob&quot;</span><span class="p p-Indicator">,</span> <span class="nv">group</span><span class="p p-Indicator">:</span> <span class="s">&quot;colab&quot;</span><span class="p p-Indicator">,</span> <span class="nv">passwd</span><span class="p p-Indicator">:</span> <span class="s">&quot;123456&quot;</span> <span class="p p-Indicator">}</span>
   <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;sam&quot;</span><span class="p p-Indicator">,</span> <span class="nv">group</span><span class="p p-Indicator">:</span> <span class="s">&quot;colab&quot;</span><span class="p p-Indicator">,</span> <span class="nv">passwd</span><span class="p p-Indicator">:</span> <span class="s">&quot;654321&quot;</span> <span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id1">
<h4><a class="toc-backref" href="#id56">Variables</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>These are modules relating to defining new variables.</p>
<div class="section" id="prompts">
<h5><a class="toc-backref" href="#id57">Prompts</a><a class="headerlink" href="#prompts" title="Permalink to this headline">¶</a></h5>
<p>Prompts can be used to assign a user’s input as a variable. [9] Note
that this module is not compatible with Ansible Tower and that a Survey
should be created within Tower instead. [40]</p>
<p>Common options:</p>
<ul class="simple">
<li>confirm = Prompt the user twice and then verify that the input is the
same.</li>
<li>encrypt = Encrypt the text.<ul>
<li>md5_crypt</li>
<li>sha256_crypt</li>
<li>sha512_crypt</li>
</ul>
</li>
<li>salt = Specify a string to use as a salt for encrypting.</li>
<li>salt_size = Specify the length to use for a randomly generated salt.
The default is 8.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">vars_prompt</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;&lt;VARIABLE&gt;&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">prompt</span><span class="p p-Indicator">:</span> <span class="s">&quot;&lt;PROMPT</span><span class="nv"> </span><span class="s">TEXT&gt;&quot;</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">vars_prompt</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;zipcode&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">prompt</span><span class="p p-Indicator">:</span> <span class="s">&quot;Enter</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">zipcode.&quot;</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">vars_prompt</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;pw&quot;</span>
     <span class="l l-Scalar l-Scalar-Plain">prompt</span><span class="p p-Indicator">:</span> <span class="s">&quot;Password:&quot;</span>
     <span class="l l-Scalar l-Scalar-Plain">encrypt</span><span class="p p-Indicator">:</span> <span class="s">&quot;sha512_crypt&quot;</span>
     <span class="l l-Scalar l-Scalar-Plain">salt_size</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">12</span>
</pre></div>
</div>
<p>[9]</p>
</div>
<div class="section" id="register">
<h5><a class="toc-backref" href="#id58">Register</a><a class="headerlink" href="#register" title="Permalink to this headline">¶</a></h5>
<p>The output of modules and commands can be saved to a variable.</p>
<p>Variable return values [32]:</p>
<ul class="simple">
<li>backup_file = String. If a module creates a backup file, this is
that file’s name.</li>
<li>changed = Boolean. If something was changed after the module runs,
this would be set to “true.”</li>
<li>failed = Boolean. Shows if the module failed.</li>
<li>invocation = Dictionary. This describes the module used to run the
operation as well as all of the arguments.</li>
<li>msg = String. A message that is optionally given to the end-user.</li>
<li>rc = Integer. The return code of a command, shell, or similar module.</li>
<li>stderr = String. The standard error of the command.</li>
<li>stderr_lines = List. The standard output of the command is separated
by the newline characters into a list.</li>
<li>stdout = String. The standard output of the command.</li>
<li>stdout_lines = List.</li>
<li>results = List of dictionaries. If a loop was used, the results for
each loop are stored as a new list item.</li>
<li>skipped = Boolean. If this module was skipped or not.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;NEW_VARIABLE&gt;</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">command</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">echo Hello World</span>
   <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">hello</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">msg=&quot;We heard you&quot;</span>
   <span class="l l-Scalar l-Scalar-Plain">when</span><span class="p p-Indicator">:</span> <span class="s">&quot;&#39;Hello</span><span class="nv"> </span><span class="s">World&#39;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">hello.stdout&quot;</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">copy</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">src=example.conf dest=/etc/example.conf</span>
  <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">copy_example</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">msg=&quot;Copying example.conf failed.&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">when</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">copy_example|failed</span>
</pre></div>
</div>
<p>[12]</p>
</div>
<div class="section" id="set-fact">
<h5><a class="toc-backref" href="#id59">Set Fact</a><a class="headerlink" href="#set-fact" title="Permalink to this headline">¶</a></h5>
<p>New variables can be defined set the “set_fact” module. These are added
to the available variables/facts tied to a inventory host. [45]</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">set_fact</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">&lt;VARIABLE_NAME1&gt;</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;VARIABLE_VALUE1&gt;</span>
  <span class="l l-Scalar l-Scalar-Plain">&lt;VARIABLE_NAME2&gt;</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;VARIABLE_VALUE2&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">set_fact</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">is_installed</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
    <span class="l l-Scalar l-Scalar-Plain">sql_server</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mariadb</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="unix-modules">
<h3><a class="toc-backref" href="#id60">UNIX Modules</a><a class="headerlink" href="#unix-modules" title="Permalink to this headline">¶</a></h3>
<div class="section" id="command-and-shell">
<h4><a class="toc-backref" href="#id61">Command and Shell</a><a class="headerlink" href="#command-and-shell" title="Permalink to this headline">¶</a></h4>
<p>Both the command and shell modules provide the ability to run command
line programs. The big difference is that shell provides a full shell
environment where operand redirection and pipping works, along with
loading up all of the shell variables. Conversely, command will not load
a full shell environment so it will lack in features and functionality
but it makes up for that by being faster and more efficient. [6]</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">command</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">shell</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Common options:</p>
<ul class="simple">
<li>executable = Set the executable shell binary.</li>
<li>chdir = Change directories before running the command.</li>
</ul>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">shell</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;Hello world&quot; &gt;&gt; /tmp/hello_world.txt</span>
  <span class="l l-Scalar l-Scalar-Plain">args</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">executable</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/bin/bash</span>
</pre></div>
</div>
</div>
<div class="section" id="copy-file-synchronize-and-template">
<h4><a class="toc-backref" href="#id62">Copy, File, Synchronize, and Template</a><a class="headerlink" href="#copy-file-synchronize-and-template" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">copy</span></code>, <code class="docutils literal notranslate"><span class="pre">file</span></code>, <code class="docutils literal notranslate"><span class="pre">synchronize</span></code>, and <code class="docutils literal notranslate"><span class="pre">template</span></code> modules
provide ways for creating and modifying various files. The <code class="docutils literal notranslate"><span class="pre">file</span></code>
module is used to handle file creation/modification on the remote host.
<code class="docutils literal notranslate"><span class="pre">template</span></code>s are to be used when a file contains variables that will
be rendered out by Jinja2. <code class="docutils literal notranslate"><span class="pre">copy</span></code> is used for copying files and
folders either from the role or on the remote host. <code class="docutils literal notranslate"><span class="pre">synchronize</span></code> is
used as a wrapper around rsync to provide a more robust copy
functionality. Most of the options and usage are the same between these
four modules.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">copy</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">file</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">synchronize</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">template</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Common options:</p>
<ul class="simple">
<li>src = Define the source file or template. If a full path is not
given, Ansible will check in the roles/<code class="docutils literal notranslate"><span class="pre">&lt;ROLENAME&gt;</span></code>/files/
directory for a file or roles/<code class="docutils literal notranslate"><span class="pre">&lt;ROLENAME&gt;</span></code>/templates/ for a
template. If the src path ends with a “/” then only the files within
that directory will be copied (not the directory itself).</li>
<li>dest (or path) = This is the full path to where the file should be
copied to on the destination server.</li>
<li>owner = Set the user owner.</li>
<li>group = Set the group owner.</li>
<li>setype = Set SELinux file permissions.</li>
</ul>
<p>Copy, file, and template options:</p>
<ul class="simple">
<li>mode = Set the octal or symbolic permissions. If using octal, it has
to be four digits. The first digit is generally the flag “0” to
indicate no special permissions.</li>
</ul>
<p>Copy options:</p>
<p>remote_src = If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the source file will be found on the
server Ansible is running tasks on (not the local machine). The default
is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>File options:</p>
<ul class="simple">
<li>state = Specify the state the file should be created in.<ul>
<li>file = Copy the file.</li>
<li>link = Create a soft link shortcut.</li>
<li>hard = Create a hard link reference.</li>
<li>touch = Create an empty file.</li>
<li>directory = Create all subdirectories in the destination folder.</li>
<li>absent = Delete destination folders.</li>
</ul>
</li>
</ul>
<p>Synchronize options:</p>
<ul class="simple">
<li>archive = Preserve all of the original file permissions. The default
is <code class="docutils literal notranslate"><span class="pre">yes</span></code>.</li>
<li>delete = Remove files in the destination directory that do not exist
in the source directory.</li>
<li>mode<ul>
<li>push = Default. Copy files from the source to the destination
directory.</li>
<li>pull = Copy files from the destination to the source directory.</li>
</ul>
</li>
<li>recursive = Recursively copy contents of all sub-directories. The
default is <code class="docutils literal notranslate"><span class="pre">no</span></code>.</li>
<li>rsync_opts = Provide additional <code class="docutils literal notranslate"><span class="pre">rsync</span></code> command line arguments.</li>
</ul>
<p>Example:</p>
<ul class="simple">
<li>Copy a template from roles/<code class="docutils literal notranslate"><span class="pre">&lt;ROLE&gt;</span></code>/templates/ and set the
permissions for the file.</li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">template</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">src=example.conf.j2 dst=/etc/example/example.conf mode=0644 owner=root group=nobody</span>
</pre></div>
</div>
<p>[46]</p>
</div>
<div class="section" id="cron">
<h4><a class="toc-backref" href="#id63">Cron</a><a class="headerlink" href="#cron" title="Permalink to this headline">¶</a></h4>
<p>The cron module is used to manage crontab entries. Crons are
scheduled/automated tasks that run on Unix-like systems.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">cron</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Common options:</p>
<ul class="simple">
<li>user = Modify the specified user’s crontab.</li>
<li>job = Provide a command to run when the cron reaches the correct</li>
<li>minute</li>
<li>hour</li>
<li>weeekday = Specify the weekday as a number 0 through 6 where 0 is
Sunday and 6 is Saturday.</li>
<li>month</li>
<li>day = Specify the day number in the 30 day month.</li>
<li>backup = Backup the existing crontab. The “backup_file” variable
provides the backed up file name.<ul>
<li>yes</li>
<li>no</li>
</ul>
</li>
<li>state<ul>
<li>present = add the crontab</li>
<li>absent = remove an existing entry</li>
</ul>
</li>
<li>special_time<ul>
<li>reboot</li>
<li>yearly or annually</li>
<li>monthly</li>
<li>weekly</li>
<li>daily</li>
<li>hourly</li>
</ul>
</li>
</ul>
<p>Example #1:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">cron</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">job=&quot;/usr/bin/wall This actually works&quot; minute=&quot;*/1&quot; user=ubuntu</span>
</pre></div>
</div>
<p>Example #2:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">cron</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">job=&quot;/usr/bin/yum -y update&quot; weekday=0 hour=6 backup=yes</span>
</pre></div>
</div>
<p>[55]</p>
</div>
<div class="section" id="expect">
<h4><a class="toc-backref" href="#id64">Expect</a><a class="headerlink" href="#expect" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">expect</span></code> module executes a command, searches for a regular
expression pattern and, if found, it will provide standard input back to
the command.</p>
<p>All options:</p>
<ul class="simple">
<li>chdir = Change into a different directory before running the command.</li>
<li><strong>command</strong> = The command to execute.</li>
<li>creates = A path to a file which should be created after the command
executes properly.</li>
<li>echo = Show the response strings that were used.</li>
<li>removes = A path to a file which should not exist after the command
executes properly.</li>
<li><strong>responses</strong> = A dictionary of patterns to search for and responses
that they should provide back.</li>
<li>timeout = The time, in seconds, to wait for finding the pattern.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">expect</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">command</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;COMMAND&gt;</span>
  <span class="l l-Scalar l-Scalar-Plain">responses</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">&lt;PATTERN&gt;</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;RESPONSE_TO_USE&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Find all of the available fruit</span>
  <span class="l l-Scalar l-Scalar-Plain">expect</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">command</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mysql -u dave -p -e &#39;SELECT fruit_name FROM food.fruits;&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">responses</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">mysql_pass_dave</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<p>[6]</p>
</div>
<div class="section" id="get-url">
<h4><a class="toc-backref" href="#id65">Get URL</a><a class="headerlink" href="#get-url" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">get_url</span></code> module is used to download files from online.</p>
<p>Common options:</p>
<ul class="simple">
<li>backup = Backup the destination file if it already exists. Default:
no.</li>
<li>checksum = Specify a checksum method to use and the hash that is
expected.</li>
<li><strong>dest</strong> = Where the downloaded file should be saved to</li>
<li>timeout = The time, in seconds, to wait for a connection to the URL
before failing. Default: 10.</li>
<li>{group|mode|owner} = Specify the permissions for the downloaded
file.</li>
<li><strong>url</strong> = The URL to download.</li>
<li><ul class="first">
<li>use_proxy = Use the proxy settings from the environment
variables. Default: yes.</li>
</ul>
</li>
<li>validate_certs = Validate SSL certificates. Default: yes.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">get_url</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Downloading a configuration file</span>
  <span class="l l-Scalar l-Scalar-Plain">get_url</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">url</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">https://internal.domain.tld/configs/nginx/nginx.conf</span>
    <span class="l l-Scalar l-Scalar-Plain">dest</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/nginx/nginx.conf</span>
    <span class="l l-Scalar l-Scalar-Plain">owner</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
    <span class="l l-Scalar l-Scalar-Plain">group</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
    <span class="l l-Scalar l-Scalar-Plain">mode</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0644</span>
    <span class="l l-Scalar l-Scalar-Plain">validate_certs</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">no</span>
</pre></div>
</div>
<p>[54]</p>
</div>
<div class="section" id="git">
<h4><a class="toc-backref" href="#id66">Git</a><a class="headerlink" href="#git" title="Permalink to this headline">¶</a></h4>
<p>Git is a utility used for provisioning and versioning software. Ansible
has built-in support for handling most Git-related tasks.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">git</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Common options:</p>
<ul class="simple">
<li>repo = The full path of the repository.</li>
<li>dest = The path to place/use the repository</li>
<li>update = Pull the latest version from the Git server. The default is
“yes.”</li>
<li>version = Switch to a different branch or tag.</li>
<li>ssh_opts = If using SSH, specify custom SSH options.</li>
<li>force = Override local changes. The default is “yes.”</li>
</ul>
<p>[7]</p>
</div>
<div class="section" id="service">
<h4><a class="toc-backref" href="#id67">Service</a><a class="headerlink" href="#service" title="Permalink to this headline">¶</a></h4>
<p>The service module is used to handle system services.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">service</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Common options:</p>
<ul class="simple">
<li>name = Specify the service name.</li>
<li>enabled = Enable the service to start on boot or not. Valid options
are “yes” or “no.”</li>
<li>sleep = When restarted a service, specify the amount of time (in
seconds) to wait before starting a service after stopping it.</li>
<li>state = Specify what state the service should be in.</li>
<li>started = Start the service.</li>
<li>stopped = Stop the service.</li>
<li>restarted = Stop and then start the service.</li>
<li>reloaded = If supported by the service, it will reload it’s
configuration file without restarting it’s main thread. [55]</li>
</ul>
<p>Example:</p>
<ul>
<li><p class="first">Restart the Apache service “httpd.”</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">service</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=httpd state=restarted sleep=3</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="mysql-database-and-user">
<h4><a class="toc-backref" href="#id68">MySQL Database and User</a><a class="headerlink" href="#mysql-database-and-user" title="Permalink to this headline">¶</a></h4>
<p>MySQL databases and users can be managed via Ansible. It requires the
“MySQLdb” Python library and the “mysql” and “mysqldump” binaries.</p>
<p>MySQL database syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">mysql_db</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>MySQL user syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">mysql_user</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Options:</p>
<ul class="simple">
<li>name = Specify the database name. The word “all” can be used to
control all databases.</li>
<li>state</li>
<li>present = Create the database.</li>
<li>absent = Delete the database.</li>
<li>dump = Backup the database.</li>
<li>import = Import a database.</li>
<li>target = Specify a dump or import location.</li>
<li>config_file = Specify the user configuration file. Default:
“~/.my.cnf.” Alternatively, login credentials can be manually
specified.</li>
<li>login_host = The MySQL server’s IP or hostname. Default:
“localhost.”</li>
<li>login_user = The MySQL username to login as.</li>
<li>login_password = The MySQL user’s password.</li>
<li>login_port = The MySQL port to connect to. Default: “3306.”</li>
<li>login_unix_socket = On Unix, a socket file can be used to connect
to MySQL instead of a host and port.</li>
<li>connection_timeout = How long to wait (in seconds) before closing
the MySQL connection. The default is “30.” [16]</li>
<li>priv (mysql_user) = The privileges for the MySQL user. [17]</li>
</ul>
<p>Example #1:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">mysql_db</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=toorsdb state=present config_file=/secrets/.my.cnf</span>
</pre></div>
</div>
<p>Example #2:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">mysql_user</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=toor login_user=root login_password=supersecret priv=somedb.*:ALL state=present</span>
</pre></div>
</div>
<p>Example #3:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">mysql_user</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=maxscale host=&quot;10.0.0.%&quot; priv=&quot;*.*:REPLICATION CLIENT,SELECT&quot; password=supersecure123 state=present</span>
</pre></div>
</div>
</div>
<div class="section" id="stat">
<h4><a class="toc-backref" href="#id69">Stat</a><a class="headerlink" href="#stat" title="Permalink to this headline">¶</a></h4>
<p>This module provides detailed information about a file, directory, or
link. It was designed to be similar to the Unix command <code class="docutils literal notranslate"><span class="pre">stat</span></code>. All
the information from this module can be saved to a variable and accessed
as a from new <code class="docutils literal notranslate"><span class="pre">&lt;VARIABLE&gt;.stat</span></code> dictionary.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">stat</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">path=&lt;FILE&gt;</span>
<span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;STAT_VARIABLE&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">stat</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">path=/root/.ssh/id_rsa</span>
  <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">id_rsa</span>

<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">file</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">path=/root/.ssh/id_rsa mode=0600 owner=root group=root</span>
  <span class="l l-Scalar l-Scalar-Plain">when</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">id_rsa.stat.mode is not &quot;0600&quot;</span>
</pre></div>
</div>
<p>Common options:</p>
<ul class="simple">
<li>checksum_algorithm = The algorithm to use for finding the checksum.<ul>
<li>sha1 (Default)</li>
<li>sha224</li>
<li>sha256</li>
<li>sha384</li>
<li>sha512</li>
</ul>
</li>
<li>follow = Follow symbolic links.</li>
<li>get_checksum = If the SHA checksum should be generated.</li>
<li>get_md5 = Boolean. If the MD5 checksum should be generated.</li>
<li>path = Required. String. The full path to the file.</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">stat</span></code> dictionary values:</p>
<ul class="simple">
<li>{a|c|m}time = Float. The last time the file was either accessed,
the metadata was created, or modified.</li>
<li>attributes = List. All of the file attributes.</li>
<li>charset = String. The text file encoding format.</li>
<li>checksum = String. The has of the path.</li>
<li>dev = Integer. The device the inode exists on.</li>
<li>{executable|readable|writeable} = Boolean. If the file is
executable, readable, or writeable by the remote user that Ansible is
running as.</li>
<li>exists = Boolean. If the file exists or not.</li>
<li>{gr|pw}_name = String. The name of the group or user owner.</li>
<li>isblk = Boolean. If the file is a block device.</li>
<li>ischr = Boolean. If the file is a character device for standard input
or output.</li>
<li>isdir = Boolean. If the file is a directory.</li>
<li>isfifo = Boolean. If the file is a named pipe.</li>
<li>islink = Boolean. If the file is a symbolic link.</li>
<li>inode = Integer. The Unix inode number of the file.</li>
<li>isreg = Boolean. If the file is a regular file.</li>
<li>issock. Boolean. If the file is a Unix socket.</li>
<li>is{uid|gid} = Boolean. If the file is owned by the user or group
that the remote Ansible user is running as.</li>
<li>lnk_source = String. The original path of the symbolic link.</li>
<li>md5 = String. The MD5 hash of the file.</li>
<li>mime_type = The “magic data” that specifies the file type.</li>
<li>mode = Octal Unix file permissions.</li>
<li>nlink. Integer. The number of links that are used to redirect to the
original inode.</li>
<li>path = String. The full path to the file.</li>
<li>{r|w|x}usr = Boolean. If the user owner has readable, writeable, or
executable permissions.</li>
<li>{r|w|x}grp = Boolean. If the group owner has readable, writeable,
or executable permissions.</li>
<li>{r|w|x}oth = Boolean. If other users have readable, writeable, or
executable permissions.</li>
<li>size = Integer. The size, in bytes, of the file.</li>
<li>{uid|gid} = Integer. The ID of user or group owner of the file.</li>
</ul>
<p>[46]</p>
</div>
<div class="section" id="uri">
<h4><a class="toc-backref" href="#id70">URI</a><a class="headerlink" href="#uri" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">uri</span></code> module is used for handling HTTP requests.</p>
<p>Common options:</p>
<ul class="simple">
<li>HEADER_* = Modify different types of header content.</li>
<li>body = The body of the request to send.</li>
<li>body_format = The format to uses for the body. Default: raw.<ul>
<li>json</li>
<li>raw</li>
</ul>
</li>
<li>dest = A path to where a file should be downloaded to.</li>
<li>follow_redirects = Default: safe.<ul>
<li>all = Follo wall redirects.</li>
<li>none = Do not follow any redirects.</li>
<li>safe = Follow the first redirect only.</li>
</ul>
</li>
<li>method = The HTTP method type to use. Default: GET.<ul>
<li>CONNECT</li>
<li>DELETE</li>
<li>GET</li>
<li>HEAD</li>
<li>OPTIONS</li>
<li>PATCH</li>
<li>POST</li>
<li>PUT</li>
<li>REFRESH</li>
<li>TRACE</li>
</ul>
</li>
<li>password = The password to use for basic HTTP authentication.</li>
<li>status_code = The expected status code from the request. Default:
200.</li>
<li>timeout = When a connection to a URL should time out if it’s
unreachable.</li>
<li><strong>url</strong> = The HTTP URL to connect to.</li>
<li>user = The username to use for basic HTTP authentication.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">uri</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Authenticate with OpenStack&#39;s Keystone v3 service</span>
  <span class="l l-Scalar l-Scalar-Plain">uri</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">HEADER_Content-Type=&quot;application/json&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">body_format</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
    <span class="l l-Scalar l-Scalar-Plain">body</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">&gt;</span>
<span class="p p-Indicator">{</span>
    <span class="s">&quot;auth&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span>
        <span class="s">&quot;identity&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span>
            <span class="s">&quot;methods&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span>
                <span class="s">&quot;password&quot;</span>
            <span class="p p-Indicator">],</span>
            <span class="s">&quot;password&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span>
                <span class="s">&quot;user&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span>
                    <span class="s">&quot;domain&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span>
                        <span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;Default&quot;</span>
                    <span class="p p-Indicator">},</span>
                    <span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;admin&quot;</span><span class="p p-Indicator">,</span>
                    <span class="s">&quot;password&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">admin_pass</span><span class="nv"> </span><span class="s">}}&quot;</span>
                <span class="p p-Indicator">}</span>
            <span class="p p-Indicator">}</span>
        <span class="p p-Indicator">},</span>
        <span class="s">&quot;scope&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span>
            <span class="s">&quot;project&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span>
                <span class="s">&quot;domain&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span>
                    <span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;Default&quot;</span>
                <span class="p p-Indicator">},</span>
                <span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;demo&quot;</span>
            <span class="p p-Indicator">}</span>
        <span class="p p-Indicator">}</span>
    <span class="p p-Indicator">}</span>
<span class="p p-Indicator">}</span>
    <span class="l l-Scalar l-Scalar-Plain">method</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">POST</span>
    <span class="l l-Scalar l-Scalar-Plain">url</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">https://openstack.tld:5000/v3/auth/tokens</span>
<span class=" -Error">  </span><span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">os_token_request</span>
</pre></div>
</div>
<p>[54]</p>
</div>
<div class="section" id="package-managers">
<h4><a class="toc-backref" href="#id71">Package Managers</a><a class="headerlink" href="#package-managers" title="Permalink to this headline">¶</a></h4>
<p>Ansible has the ability to add, remove, or update software packages.
Almost every popular package manager is supported. This can
generically be handled by the “package” module or the specific module
for the operating system’s package manager.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">package</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Common options:</p>
<ul class="simple">
<li>name = Specify the package name.</li>
<li>state = Specify how to change the package state.</li>
<li>present = Install the package.</li>
<li>latest = Update the package (or install, if necessary).</li>
<li>absent = Uninstall the package.</li>
<li>use = Specify the package manager to use.</li>
<li>auto = Automatically detect the package manager to use. This is the
default.</li>
<li>apt = Use Debian’s Apt package manager.</li>
<li>yum = Use Red Hat’s yum package manager.</li>
</ul>
<p>Example:</p>
<ul class="simple">
<li>Update the MariaDB package.</li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">package</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=mariadb state=latest</span>
</pre></div>
</div>
<p>[47]</p>
<div class="section" id="apt">
<h5><a class="toc-backref" href="#id72">Apt</a><a class="headerlink" href="#apt" title="Permalink to this headline">¶</a></h5>
<p>Apt is used to install and manage packages on Debian based operating
systems.</p>
<p>Common options:</p>
<ul class="simple">
<li>name = The package name.</li>
<li>state<ul>
<li>present = Install the package.</li>
<li>latest = Update the package.</li>
<li>absent = Uninstall the package.</li>
<li>build-dep = Install the build dependencies for the source code.</li>
</ul>
</li>
<li>update_cache = Update the Apt cache (apt-get update). Default: no.</li>
<li>deb = Install a specified *.deb file.</li>
<li>autoremove = Remove all dependencies that are no longer required.</li>
<li>purge = Delete configuration files.</li>
<li>install_recommends = Install recommended packages.</li>
<li>upgrade<ul>
<li>no = Do not upgrade any system packages (default).</li>
<li>yes = Update all of the system packages (apt-get upgrade).</li>
<li>full = Update all of the system packages and uninstall older,
conflicting packages (apt-get full-upgrade).</li>
<li>dist = Upgrade the operating system (apt-get dist-upgrade).</li>
</ul>
</li>
</ul>
<p>[47]</p>
</div>
<div class="section" id="yum">
<h5><a class="toc-backref" href="#id73">Yum</a><a class="headerlink" href="#yum" title="Permalink to this headline">¶</a></h5>
<p>There are two commands to primarily handle Red Hat’s Yum package
manager: “yum” and “yum_repository.”</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">yum</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Common options:</p>
<ul class="simple">
<li>name = Specify the package name.</li>
<li>state = Specify the package state.</li>
<li>{present|installed|latest} = Any of these will install the package.</li>
<li>{absent|removed} = Any of these will uninstall the package.</li>
<li>enablerepo = Temporarily enable a repository.</li>
<li>disablerepo = Temporarily disable a repository.</li>
<li>disable_gpg_check = Disable the GPG check. The default is “no”.</li>
<li>conf_file = Specify a Yum configuration file to use.</li>
</ul>
<p>Example:</p>
<ul class="simple">
<li>Install the “wget” package with the EPEL repository enabled and
disable GPG validation checks.</li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">yum</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=wget state=installed enablerepo=epel disable_gpg_check=yes</span>
</pre></div>
</div>
<p>Yum repository syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">yum_repository</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Common options:</p>
<ul class="simple">
<li>baseurl = Provide the URL of the repository.</li>
<li><strong>description</strong> = Required if <code class="docutils literal notranslate"><span class="pre">state=present</span></code>. Provide a
description of the repository.</li>
<li>enabled = Enable the repository permanently to be active. The default
is “yes.”</li>
<li>exclude = List packages that should be excluded from being accessed
from this repository.</li>
<li>gpgcheck = Validate the RPMs with a GPG check. The default is “no.”</li>
<li>gpgkey = Specify a URL to the GPG key.</li>
<li>includepkgs = A space separated list of packages that can be used
from this repository. This is an explicit allow list.</li>
<li>mirrorlist = Provide a URL to a mirrorlist repository instead of the
baseurl.</li>
<li><strong>name</strong> = Required. Specify a name for the repository. This is only
required if the file is being created (state=present) or deleted
(state=absent).</li>
<li>reposdir = The directory to store the Yum configuration files.
Default: <code class="docutils literal notranslate"><span class="pre">/etc/yum.repos.d/</span></code>.</li>
<li>state = Specify a state for the repository file.</li>
<li>present = Install the Yum repository file. This is the default.</li>
<li>absent = Delete the repository file.</li>
</ul>
<p>Example:</p>
<ul class="simple">
<li>Install the RepoForge Yum repository.</li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">yum_repository</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=repoforge baseurl=http://apt.sw.be/redhat/el7/en/x86_64/rpmforge/ enabled=no description=&quot;Third-party RepoForge packages&quot;</span>
</pre></div>
</div>
<p>[47]</p>
</div>
</div>
</div>
<div class="section" id="windows-modules">
<h3><a class="toc-backref" href="#id74">Windows Modules</a><a class="headerlink" href="#windows-modules" title="Permalink to this headline">¶</a></h3>
<p>These modules are specific to managing Windows servers and are not
related to the normal modules designed for UNIX-like operating systems.
These module names start with the “win_” prefix.</p>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id75">Command and Shell</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>Windows commands can be executed via a console. The <code class="docutils literal notranslate"><span class="pre">command</span></code> module
uses the DOS “cmd” binary and shell, by default, uses PowerShell.</p>
<p>All similar <code class="docutils literal notranslate"><span class="pre">command</span></code> and <code class="docutils literal notranslate"><span class="pre">shell</span></code> options:</p>
<ul class="simple">
<li>chdir = Change the current working directory on the remote server
before executing a command.</li>
<li>creates = A path (optionally with a regular expression pattern) to a
file. If this file already exists, this module will be marked as
“skipped.”</li>
<li>removes = If a path does not exist then this module will be marked as
“skipped.”</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">shell</span></code> options:</p>
<ul class="simple">
<li>executable = The binary to use for executing commands. By default
this is PowerShell. Use “cmd” for running DOS commands.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_command</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_shell</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">win_shell</span><span class="p">:</span> <span class="s2">&quot;echo Hello World &gt; c:\hello.txt&quot;</span>
  <span class="n">chdir</span><span class="p">:</span> <span class="s2">&quot;c:</span><span class="se">\&quot;</span>
  <span class="n">creates</span><span class="p">:</span> <span class="s2">&quot;c:\hello.txt&quot;</span>
</pre></div>
</div>
<p>[48]</p>
</div>
<div class="section" id="file-management">
<h4><a class="toc-backref" href="#id76">File Management</a><a class="headerlink" href="#file-management" title="Permalink to this headline">¶</a></h4>
<div class="section" id="copy">
<h5><a class="toc-backref" href="#id77">Copy</a><a class="headerlink" href="#copy" title="Permalink to this headline">¶</a></h5>
<p>Copy files from the Playbook to the remote server.</p>
<p>All options:</p>
<ul class="simple">
<li>content = Instead of using <code class="docutils literal notranslate"><span class="pre">src</span></code>, specify the text that should
exist in the destination file.</li>
<li><strong>dest</strong> = The destination to copy the file to.</li>
<li>force = Replace files in the destination path if there is a conflict.
Default: True.</li>
<li>remote_src = Copy a file from one location on the remote server to
another on the same server.</li>
<li><strong>src</strong> = The source file to copy.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_copy</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Copying a configuration file</span>
  <span class="l l-Scalar l-Scalar-Plain">win_copy</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">C:\Windows\example.conf</span>
    <span class="l l-Scalar l-Scalar-Plain">dest</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">C:\temp\</span>
    <span class="l l-Scalar l-Scalar-Plain">remote_src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
<p>[48]</p>
</div>
<div class="section" id="file">
<h5><a class="toc-backref" href="#id78">File</a><a class="headerlink" href="#file" title="Permalink to this headline">¶</a></h5>
<p>All options:</p>
<ul class="simple">
<li><strong>path</strong> = The full path to the file on the remote server that should
be created, removed, and/or checked.</li>
<li>state<ul>
<li>absent = Delete the file.</li>
<li>directory = Create a directory.</li>
<li>file = Check to see if a file exists. Do not create a file if it
does not exist.</li>
<li>touch = Create a file if it does not exist.</li>
</ul>
</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_file</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">win_file</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">C:\Users\admin\runtime_files</span>
    <span class="l l-Scalar l-Scalar-Plain">state</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">directory</span>
</pre></div>
</div>
<p>[48]</p>
</div>
<div class="section" id="robocopy">
<h5><a class="toc-backref" href="#id79">Robocopy</a><a class="headerlink" href="#robocopy" title="Permalink to this headline">¶</a></h5>
<p>Robocopy is a CLI utility, available on the latest versions of Windows,
for synchronizing directories.</p>
<p>All options:</p>
<ul class="simple">
<li><strong>dest</strong> = The destination directory.</li>
<li>flags = Provide additional arguments to the robocopy command.</li>
<li>purge = Delete files in the destination that do not exist in the
source directory.</li>
<li>recurse = Recursively copy subdirectories.</li>
<li><strong>src</strong> = The source directory to copy from.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_robocopy</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_robocopy</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">C:\tmp\</span>
  <span class="l l-Scalar l-Scalar-Plain">dest</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">C:\tmp_old\</span>
  <span class="l l-Scalar l-Scalar-Plain">recurse</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
<p>[48]</p>
</div>
<div class="section" id="shortcut">
<h5><a class="toc-backref" href="#id80">Shortcut</a><a class="headerlink" href="#shortcut" title="Permalink to this headline">¶</a></h5>
<p>Manage Windows shortcuts.</p>
<p>All options:</p>
<ul class="simple">
<li>args = Arguments to provide to the source executable.</li>
<li>description = A description about the shortcut.</li>
<li><strong>dest</strong> = The path and file name of the shortcut. For executables
use the extension <code class="docutils literal notranslate"><span class="pre">.lnk</span></code> and for URLs use <code class="docutils literal notranslate"><span class="pre">.url</span></code>.</li>
<li>directory = The work directory for the executable.</li>
<li>hotkey = The combination of keys to virtually press when the shortcut
is executed.</li>
<li>icon = A <code class="docutils literal notranslate"><span class="pre">.ico</span></code> icon file to use as the shortcut image.</li>
<li>src = The executable or URL that the shortcut should open.</li>
<li>state<ul>
<li>absent = Delete the shortcut.</li>
<li>present = Create the shortcut.</li>
</ul>
</li>
<li>windowstyle = How the program’s window is sized during launch.<ul>
<li>default</li>
<li>maximized</li>
<li>minimized</li>
</ul>
</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_shortcut</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_shortcut</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">C:\Program Files (x86)\game\game.exe</span>
  <span class="l l-Scalar l-Scalar-Plain">dest</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">C:\Users\Ben\Desktop\game.lnk</span>
</pre></div>
</div>
<p>[48]</p>
</div>
<div class="section" id="template">
<h5><a class="toc-backref" href="#id81">Template</a><a class="headerlink" href="#template" title="Permalink to this headline">¶</a></h5>
<p>The Windows Jinja2 template module uses the same options as the normal
<code class="docutils literal notranslate"><span class="pre">template</span></code> module.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_template</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>[48]</p>
</div>
</div>
<div class="section" id="installations">
<h4><a class="toc-backref" href="#id82">Installations</a><a class="headerlink" href="#installations" title="Permalink to this headline">¶</a></h4>
<div class="section" id="chocolatey">
<h5><a class="toc-backref" href="#id83">Chocolatey</a><a class="headerlink" href="#chocolatey" title="Permalink to this headline">¶</a></h5>
<p>Chocolatey is an unofficial package manager for Windows. Packages can be
installed from a public or private Chocolatey repository.</p>
<p>Common options:</p>
<ul class="simple">
<li>force = Reinstall an existing package.</li>
<li>install_args = Arguments to pass to Chocolatey during installation.</li>
<li>ignore_dependencies = Ignore dependencies of a package. Default: no.</li>
<li><strong>name</strong> = The name of a package to manage.</li>
<li>source = The Chocolatey repository to use.</li>
<li>state = Default: present.<ul>
<li>absent = Uninstall the package.</li>
<li>present = Install the package.</li>
<li>latest = Update the package.</li>
</ul>
</li>
<li>timeout = The number of seconds to wait for Chocolatey to complete
it’s action. Default: 2700.</li>
<li>version = The exact version of a package that should be installed.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_chocolatey</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_chocolatey</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=&quot;libreoffice&quot; state=&quot;upgrade&quot; version=&quot;5.4.0&quot;</span>
</pre></div>
</div>
<p>[48]</p>
</div>
<div class="section" id="feature">
<h5><a class="toc-backref" href="#id84">Feature</a><a class="headerlink" href="#feature" title="Permalink to this headline">¶</a></h5>
<p>Manage official features and roles in Windows.</p>
<p>All options:</p>
<ul class="simple">
<li>include_management_tools = Install related management tools. This
only works in Windows Server &gt;= 2012.</li>
<li>include_sub_features = Install all subfeatures related to the main
feature.</li>
<li><strong>name</strong> = The name of the feature or role.</li>
<li>restart = Restart the server after installation.</li>
<li>source = The path to the local package of the feature. This only
works in Windows Server &gt;= 2012.</li>
<li>state<ul>
<li>absent = Uninstall the feature.</li>
<li>present = Install the feature.</li>
</ul>
</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_feature</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Install the IIS HTTP web server</span>
  <span class="l l-Scalar l-Scalar-Plain">win_feature</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Web-Server</span>
    <span class="l l-Scalar l-Scalar-Plain">state</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">present</span>
</pre></div>
</div>
<p>[48]</p>
<p>On Windows, all of the available features can be found via PowerShell.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; Get-WindowsFeature
</pre></div>
</div>
<p>If part of the name is known, a PowerShell wildcard can be used to
narrow it down.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; Get-WindowsFeature -Name &lt;PART_OF_A_NAME&gt;*
</pre></div>
</div>
<p>[39]</p>
</div>
<div class="section" id="msi">
<h5><a class="toc-backref" href="#id85">MSI</a><a class="headerlink" href="#msi" title="Permalink to this headline">¶</a></h5>
<p><strong>Deprecated in: 2.3 Replaced by: ``win_package``</strong></p>
<p>The MSI module is used to install executable packages. [48]</p>
</div>
<div class="section" id="package">
<h5><a class="toc-backref" href="#id86">Package</a><a class="headerlink" href="#package" title="Permalink to this headline">¶</a></h5>
<p>Manage official Microsoft packages for Windows. Examples of these
include the .NET Framework, Remote Desktop Connection Manager, Visual
C++ Redistributable, and more.</p>
<p>All options:</p>
<ul class="simple">
<li>arguments = Arguments will be passed to the package during
installation.</li>
<li>expected_return_code = The return code number that is expected
after the installation is complete. Default: 0.</li>
<li>name = Optionally provide a friendly name for the package for Ansible
logging purposes.</li>
<li><strong>path</strong> = The file path or HTTP URL to a package.</li>
<li><strong>product_id</strong> = For verifying installation, the product ID is
required to lookup in the registry if it is installed already.<ul>
<li>Note: This can be found at:<ul>
<li>64-bit:
<code class="docutils literal notranslate"><span class="pre">HKLM:Software\Microsoft\Windows\CurrentVersion\Uninstall</span></code></li>
<li>32-bit:
<code class="docutils literal notranslate"><span class="pre">HKLM:Software\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall</span></code></li>
</ul>
</li>
</ul>
</li>
<li>state<ul>
<li>absent = Uninstall the package.</li>
<li>present = Install the package.</li>
</ul>
</li>
<li>user_{name|password} = Specify the username and password to access
a SMB/CIFS share that contains the package.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_package</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="s">&#39;Microsoft</span><span class="nv"> </span><span class="s">.NET</span><span class="nv"> </span><span class="s">Framework</span><span class="nv"> </span><span class="s">4.5.1&#39;</span>
  <span class="l l-Scalar l-Scalar-Plain">win_package</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">https://download.microsoft.com/download/1/6/7/167F0D79-9317-48AE-AEDB-17120579F8E2/NDP451-KB2858728-x86-x64-AllOS-ENU.exe</span>
    <span class="l l-Scalar l-Scalar-Plain">productid</span><span class="p p-Indicator">:</span> <span class="s">&#39;{7DEBE4EB-6B40-3766-BB35-5CBBC385DA37}&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">arguments</span><span class="p p-Indicator">:</span> <span class="s">&#39;/q</span><span class="nv"> </span><span class="s">/norestart&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">ensure</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">present</span>
    <span class="c1"># Return code &quot;3010&quot; means that Windows requires a reboot</span>
    <span class="l l-Scalar l-Scalar-Plain">expected_return_code</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3010</span>
</pre></div>
</div>
<p>[48]</p>
</div>
<div class="section" id="updates">
<h5><a class="toc-backref" href="#id87">Updates</a><a class="headerlink" href="#updates" title="Permalink to this headline">¶</a></h5>
<p>Windows Updates can be managed by Ansible.</p>
<p>All options:</p>
<ul class="simple">
<li>category_names = A list of categories to manage updates for. Valid
categories are:<ul>
<li>Application</li>
<li>Connectors</li>
<li>CriticalUpdates (default)</li>
<li>DefinitionUpdates</li>
<li>DeveloperKits</li>
<li>FeaturePacks</li>
<li>Guidance</li>
<li>SecurityUpdates (default)</li>
<li>ServicePacks</li>
<li>Tools</li>
<li>UpdateRollups (default)</li>
<li>Updates</li>
</ul>
</li>
<li>log_path = The path to a custom log file.</li>
<li>state<ul>
<li>installed = Search for and install updates.</li>
<li>searched = Only search for updates.</li>
</ul>
</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_updates</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_updates</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">category_names=[&#39;CriticalUpdates&#39;] state=searched log_path=&quot;c:\tmp\win_updates_log.txt&quot;</span>
</pre></div>
</div>
<p>[48]</p>
</div>
</div>
<div class="section" id="registry">
<h4><a class="toc-backref" href="#id88">Registry</a><a class="headerlink" href="#registry" title="Permalink to this headline">¶</a></h4>
<p>The registry can be viewed and edited using the
<a class="reference external" href="http://docs.ansible.com/ansible/latest/win_regedit_module.html">win_regedit</a>
and
<a class="reference external" href="http://docs.ansible.com/ansible/latest/win_reg_stat_module.html">win_reg_stat</a>
modules.</p>
</div>
<div class="section" id="scheduled-task">
<h4><a class="toc-backref" href="#id89">Scheduled Task</a><a class="headerlink" href="#scheduled-task" title="Permalink to this headline">¶</a></h4>
<p>Manage scheduled tasks in Windows.</p>
<p>All options:</p>
<ul class="simple">
<li>arguments = Arguments that should be supplied to the executable.</li>
<li>days_of_week = A list of weekdays to run the task.</li>
<li>description = A uesful description for the purpose of the task.</li>
<li>enabled = Set the task to be enabled or not.</li>
<li>executable = The command the task should run.</li>
<li>frequency = The frequency to run the command.<ul>
<li>once</li>
<li>daily</li>
<li>weekly</li>
</ul>
</li>
<li><strong>name</strong> = The name of the task.</li>
<li>path = The folder to store the task in.</li>
<li><strong>state</strong><ul>
<li>absent = Delete the task.</li>
<li>present = Create the task.</li>
</ul>
</li>
<li>time = The time to run the task.</li>
<li>user = The user to run the task as.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_scheduled_task</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_scheduled_task</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">RestartIIS</span>
  <span class="l l-Scalar l-Scalar-Plain">executable</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">iisreset</span>
  <span class="l l-Scalar l-Scalar-Plain">arguments</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/restart</span>
  <span class="l l-Scalar l-Scalar-Plain">days_of_week</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">saturday</span>
  <span class="l l-Scalar l-Scalar-Plain">time</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">2am</span>
</pre></div>
</div>
<p>[48]</p>
</div>
<div class="section" id="id3">
<h4><a class="toc-backref" href="#id90">Service</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>Manage services on Windows.</p>
<p>All options:</p>
<ul class="simple">
<li>dependencies = A list of other services that are dependencies for
this service.</li>
<li>dependency_action<ul>
<li>add = Append these dependencies to the existing dependencies.</li>
<li>set = Set this list of dependencies as the only dependencies.</li>
<li>remove = Remove these dependencies from the service.</li>
</ul>
</li>
<li>description = A useful description of the service.</li>
<li>desktop_interact = Allow the LocalSystem user to interact with the
Windows desktop.</li>
<li>display_name = A user-friendly name for the service.</li>
<li>force_dependent_services = Changing the state of this service will
change the state of all of the dependencies.</li>
<li><strong>name</strong> = The actual name of the service.</li>
<li>password = The password to authenticate with. For the LocalService,
LocalSystem, and NetworkService users, the password has to be an
empty string and not undefined.</li>
<li>path = The path to the executable for the service.</li>
<li>start_mode<ul>
<li>auto = Automatically start on boot.</li>
<li>delayed = Automatically start on boot after all of the “auto”
services have started.</li>
<li>disabled = Do not allow this service to be run.</li>
<li>manual = The administrator has to manually start this task.</li>
</ul>
</li>
<li>state<ul>
<li>absent = Delete the service.</li>
<li>restarted = Restart the service.</li>
<li>started = Start the service.</li>
<li>stopped = Stop the service.</li>
</ul>
</li>
<li>username = The user to run the service as.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_service</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_service</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">CustomService</span>
  <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">C:\Program Files (x86)\myapp\myapp.exe</span>
  <span class="l l-Scalar l-Scalar-Plain">start_mode</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">auto</span>
  <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">.\Administrator</span>
  <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{{</span> <span class="nv">admin_pass</span> <span class="p p-Indicator">}}</span>
</pre></div>
</div>
<p>[48]</p>
</div>
<div class="section" id="user">
<h4><a class="toc-backref" href="#id91">User</a><a class="headerlink" href="#user" title="Permalink to this headline">¶</a></h4>
<p>Create, read, update, or delete (CRUD) a Windows user account.</p>
<p>All options:</p>
<ul class="simple">
<li>account_disabled = Disable the account. The user can no longer be
used.</li>
<li>account_locked = Lock the account. The user will no longer have
access to log into their account.</li>
<li>description = A description of the user’s purpose.</li>
<li>fullname = The full name of the user.</li>
<li>groups = A list of groups that the user should be added to or removed
from.</li>
<li>groups_actions<ul>
<li>replace = Add the user to each of the <code class="docutils literal notranslate"><span class="pre">groups</span></code> and remove them
from all others.</li>
<li>add = Add the user to each of the <code class="docutils literal notranslate"><span class="pre">groups</span></code>.</li>
<li>remove = Remove the user from all of the <code class="docutils literal notranslate"><span class="pre">groups</span></code>.</li>
</ul>
</li>
<li><strong>name</strong> = The name of the user to modify.</li>
<li>password = The the user’s password.</li>
<li>password_expired = Force the user’s password to be expired/changed.</li>
<li>password_never_expires = Determine if the user’s password should
ever expire.</li>
<li>state<ul>
<li>absent = Delete the user.</li>
<li>present = Create the user. This is the default option.</li>
<li>query = Look up information about the user account.</li>
</ul>
</li>
<li>update_password<ul>
<li>always = Change the password for a user.</li>
<li>on_create = Only change a password for a user that was just
created.</li>
</ul>
</li>
<li>user_cannot_change_password = Allow or disallow a user from
modifying their password.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_user</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">win_user</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name=&quot;default&quot; password=&quot;abc123xyz890&quot; user_cannot_change_password=&quot;yes&quot; groups=[&#39;privileged&#39;, &#39;shares&#39;] state=&quot;present&quot;</span>
</pre></div>
</div>
<p>[48]</p>
</div>
</div>
<div class="section" id="module-development">
<h3><a class="toc-backref" href="#id92">Module Development</a><a class="headerlink" href="#module-development" title="Permalink to this headline">¶</a></h3>
<p>Official Ansible module development documentation:</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.ansible.com/ansible/latest/dev_guide/index.html">http://docs.ansible.com/ansible/latest/dev_guide/index.html</a></li>
</ul>
<p>All of the helper libraries for Ansible can be found in
<a class="reference external" href="https://github.com/ansible/ansible/tree/devel/lib/ansible/module_utils">lib/ansible/modules_utils/</a>.
At the bare minimum, the <a class="reference external" href="https://github.com/ansible/ansible/blob/devel/lib/ansible/module_utils/basic.py">AnsibleModule
class</a>
should be used to create a new module object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansible.module_utils.basic</span> <span class="kn">import</span> <span class="n">AnsibleModule</span>
</pre></div>
</div>
<p>That basic syntax and layout of creating a module object looks like
this.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="o">=</span> <span class="n">AnsibleModule</span><span class="p">(</span>
    <span class="n">argument_spec</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="o">&lt;</span><span class="n">ARGUMENT_NAME</span><span class="o">&gt;=</span><span class="nb">dict</span><span class="p">(</span><span class="o">&lt;</span><span class="n">OPTIONS</span><span class="o">&gt;</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="o">&lt;</span><span class="n">OTHER_MODULE_OPTIONS</span><span class="o">&gt;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>These are all of the various settings that can be defined and used
AnsibleModule object.</p>
<p><strong>``AnsibleModule`` initialization:</strong></p>
<ul class="simple">
<li>argument_spec = A dictionary of arguments that can be provided by a
user using this module. Each argument can have it’s own settings.<ul>
<li><code class="docutils literal notranslate"><span class="pre">&lt;ARGUMENT_NAME&gt;</span></code> = A unique argument name should be given. This
will contain a dictionary of additional settings for this
argument.<ul>
<li>aliases = A list of other names that can be used to reference
this same argument.</li>
<li>choices = A list of explicit valid choices for this argument.
This is primarily used for documentation.</li>
<li>required = True or False. If this argument is required for the
module to work.</li>
<li>default = A default value to provide if the user does not
specify one.</li>
<li>type = The type of value that should be provided. This can be
any valid Python variable type. Common types include:<ul>
<li>bool = Boolean.</li>
<li>float = Float, a decimal number.</li>
<li>int = Integer, a whole number.</li>
<li>list</li>
<li>path = A path to a file or directory.</li>
<li>string</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>required_one_of = A list of arguments where at least one is
required for the module to work.</li>
<li>mutually_exclusive = A list of arguments that cannot be used
together.</li>
<li>supports_check_mode = Specify if this module supports Ansible’s
“check mode” where it can check to see if this module will change
anything without modifying the system. This sets the
<code class="docutils literal notranslate"><span class="pre">module.check_mode</span></code> boolean.</li>
</ul>
<p><strong>``module`` common object methods:</strong></p>
<ul class="simple">
<li>_deprecation = A dictionary of information for a deprecation
message.<ul>
<li>msg = The deprecation string.</li>
<li>version = The version this was / will be deprecated in.</li>
</ul>
</li>
<li>_warnings = A list of warnings to provide the end user.</li>
<li>append_to_file = Append text to a file.</li>
<li>atomic_move = Copy a source file to a destination. The new
destination file will use the same file attributes as the original
destination file.</li>
<li>debug = Debug a variable’s value.</li>
<li>digest_from_file = Return a checksum of a file.</li>
<li>exit_json = A dictionary of return data when the module finishes
successfully.<ul>
<li><em>kwargs</em> = Any variables can be passed to this method and will be
returned in the error message. Common variable names and values to
pass include:<ul>
<li>changed = A boolean stating if anything has changed.</li>
<li>changes = A dictionary of items that were changed.</li>
<li>results = A dictionary of results that should be returned to
the end user.</li>
</ul>
</li>
</ul>
</li>
<li>fail_json = A dictionary for when the module fails.<ul>
<li>msg = A string of a failure message.</li>
<li><em>kwargs</em> = Any other variables can be passed to this method and
will be returned in the error message.</li>
</ul>
</li>
<li>from_json = Convert JSON data into a dictionary.</li>
<li>get_bin_path = Find the path of a binary on the managed system.</li>
<li>jsonify = Convert a variable into JSON format.</li>
<li>run_command = Run a command on the managed system. This method will
return the return code, the standard output, and the standard error
from the process. Example:</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;echo Hello world&quot;</span>
<span class="n">rc</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>``module`` common object variables:</strong></p>
<ul class="simple">
<li>check_mode = Boolean. Determines if check_mode is supported based
on what <code class="docutils literal notranslate"><span class="pre">module.supports_check_mode</span></code> value is set to.</li>
<li>params = Dictionary. All of the module argument variables.</li>
</ul>
<p>[44]</p>
</div>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id93">Roles</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>Roles are used to accomplish and/or manage one specific item. Usually
this will be to install and setup a program. A Playbook can be created
to use multiple roles.</p>
<div class="section" id="galaxy">
<h3><a class="toc-backref" href="#id94">Galaxy</a><a class="headerlink" href="#galaxy" title="Permalink to this headline">¶</a></h3>
<p>Ansible Galaxy provides a way to easily manage remote Ansible Galaxy
roles from <a class="reference external" href="https://galaxy.ansible.com/">https://galaxy.ansible.com/</a> and other software configuration
management (SCM) sources. [27]</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy install &lt;USER_NAME&gt;.&lt;ROLE_NAME&gt;
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy install &lt;USER_NAME&gt;.&lt;ROLE_NAME&gt;,&lt;VERSION&gt;
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy install --roles-path &lt;PATH&gt; &lt;USER_NAME&gt;.&lt;ROLE_NAME&gt;
</pre></div>
</div>
<p>For a Role to work with Ansible Galaxy, it is required to have the
<code class="docutils literal notranslate"><span class="pre">meta/main.yml</span></code> file. This will define supported Ansible versions and
systems, dependencies on other Roles, the license, and other useful
information. [58]</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">galaxy_info</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">author</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">company</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">license</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">min_ansible_version</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">platforms</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;OS_NAME&gt;</span>
  <span class="l l-Scalar l-Scalar-Plain">versions</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;OS_VERSION&gt;</span>
  <span class="l l-Scalar l-Scalar-Plain">categories</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">dependencies</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">role</span><span class="p p-Indicator">:</span> <span class="nv">&lt;ROLE_NAME&gt;</span> <span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">role</span><span class="p p-Indicator">:</span> <span class="nv">&lt;ROLE_NAME&gt;</span><span class="p p-Indicator">,</span> <span class="nv">&lt;VARIABLE&gt;</span><span class="p p-Indicator">:</span> <span class="nv">&lt;VALUE&gt;</span> <span class="p p-Indicator">}</span>
</pre></div>
</div>
<div class="section" id="dependencies">
<h4><a class="toc-backref" href="#id95">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h4>
<p>Roles can define dependencies to other roles hosted remotely. By
default, the Ansible Galaxy repository is used to pull roles from.
Ansible Galaxy in itself uses GitHub.com as it’s back-end. Dependencies
can be defined in <code class="docutils literal notranslate"><span class="pre">requirements.yml</span></code> or inside the role at
<code class="docutils literal notranslate"><span class="pre">meta/main.yml</span></code>.</p>
<p>Install the dependencies by running:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy install -r requirements.yml
</pre></div>
</div>
<ul class="simple">
<li>Dependency options:<ul>
<li>src = The role to use. Valid formats are:<ul>
<li><code class="docutils literal notranslate"><span class="pre">&lt;USER_NAME&gt;.&lt;ROLE_PROJECT_NAME&gt;</span></code> = The user and project name
to use from GitHub.</li>
<li><code class="docutils literal notranslate"><span class="pre">https://github.com/&lt;USER&gt;/&lt;ROLE_PROJECT_NAME&gt;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">git+https://github.com/&lt;USER&gt;/&lt;ROLE_PROJECT_NAME&gt;.git</span></code> =
Explicitly use HTTPS for accessing GitHub.</li>
<li><code class="docutils literal notranslate"><span class="pre">git+ssh://git&#64;&lt;DOMAIN&gt;/&lt;USER&gt;/&lt;ROLE_PROJECT_NAME&gt;.git</span></code> = Use
SSH for accessing GitHub.</li>
</ul>
</li>
<li>version = The branch, tag, or commit to use. Default: master.</li>
<li>name = Provide the role a new custom name.</li>
<li>scm = The supply chain management (SCM) tool to use. Currently
only Git (git) and Mercurial (hg) are supported. This is useful
for using projects that are not hosted on GitHub.com. Default:
git.</li>
</ul>
</li>
</ul>
<p>Dependency syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">dependencies</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;USER_NAME&gt;.&lt;ROLE_NAME&gt;</span>
    <span class="l l-Scalar l-Scalar-Plain">version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;VERSION&gt;</span>
    <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;NEW_ROLE_NAME&gt;</span>
    <span class="l l-Scalar l-Scalar-Plain">scm</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;SCM&gt;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;USER_NAME2&gt;.&lt;ROLE_NAME2&gt;</span>
</pre></div>
</div>
<p>Dependency example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">https://github.com/hux/starkiller</span>
  <span class="l l-Scalar l-Scalar-Plain">version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3101u9e243r90adf0a98avn4bmz</span>
  <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">new_deathstar</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">https://example.tld/project</span>
  <span class="l l-Scalar l-Scalar-Plain">scm</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">hg</span>
  <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">project</span>
</pre></div>
</div>
<p>Git with SSH example (useful for GitLab):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">git+ssh://git@&lt;DOMAIN&gt;/&lt;USER&gt;/&lt;PROJECT&gt;.git</span>
  <span class="l l-Scalar l-Scalar-Plain">version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1.2.0</span>
  <span class="l l-Scalar l-Scalar-Plain">scm</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">git</span>
</pre></div>
</div>
<p>[27]</p>
</div>
<div class="section" id="community-roles">
<h4><a class="toc-backref" href="#id96">Community Roles</a><a class="headerlink" href="#community-roles" title="Permalink to this headline">¶</a></h4>
<p>Unofficial community Roles can be used within Playbooks. Most of these
can be found on <a class="reference external" href="https://galaxy.ansible.com/">Ansible Galaxy</a> or
<a class="reference external" href="https://github.com/">GitHub</a>. This section covers some useful Roles.</p>
<div class="section" id="network-interface">
<h5><a class="toc-backref" href="#id97">Network Interface</a><a class="headerlink" href="#network-interface" title="Permalink to this headline">¶</a></h5>
<p>URL: <a class="reference external" href="https://github.com/MartinVerges/ansible.network_interface">https://github.com/MartinVerges/ansible.network_interface</a></p>
<p>The <code class="docutils literal notranslate"><span class="pre">network_interface</span></code> role was created to help automate the
management of network interfaces on Debian and RHEL based systems. The
most up-to-date and currently maintained fork of the original project is
owned by the <a class="reference external" href="https://github.com/MartinVerges">GitHub user
MartinVerges</a>.</p>
<p>The role can be passed any of these dictionaries to configure the
network devices.</p>
<ul class="simple">
<li>network_ether_interfaces = Configure ethernet devices.</li>
<li>network_bridge_interfaces = Configure bridge devices.</li>
<li>network_bond_interfaces = Configure bond devices.</li>
<li>network_vlan_interfaces = Configure VLAN devices.</li>
</ul>
<p>Valid dictionary values:</p>
<ul class="simple">
<li>device = Required. This should define the device name to modify or
create.</li>
<li>bootproto = Required. <code class="docutils literal notranslate"><span class="pre">static</span></code> or <code class="docutils literal notranslate"><span class="pre">dhcp</span></code>.</li>
<li>address = Required for <code class="docutils literal notranslate"><span class="pre">static</span></code>. IP address.</li>
<li>netmask = Required for <code class="docutils literal notranslate"><span class="pre">static</span></code>. Subnet mask.</li>
<li>cidr = For <code class="docutils literal notranslate"><span class="pre">static</span></code>. Optionally use CIDR notation to specify the IP
address and subnet mask.</li>
<li>gateway = The default gateway for the IP address.</li>
<li>hwaddress = Use a custom MAC address.</li>
<li>mtu = Specify the MTU packet size.</li>
<li>vlan = Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> for creating the VLAN devices.</li>
<li>bond_ports = Required for bond interfaces. Specify the ethernet
devices to use for the unified bond.</li>
<li>bond_mode = For bond interfaces. Define the type of Linux bonding
method.</li>
<li>bridge_ports = Required for bridge interfaces. Specify the ethernet
device(s) to use for the bridge.</li>
<li>dns-nameserver = A Python list of DNS nameservers to use.</li>
</ul>
<p>Example:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">eth0</span></code> is configured to use DHCP and has it’s MTU set to 9000.</li>
<li><code class="docutils literal notranslate"><span class="pre">eth1</span></code> is added to the new bridge <code class="docutils literal notranslate"><span class="pre">br0</span></code> with the IP address
<code class="docutils literal notranslate"><span class="pre">10.0.0.1</span></code> and the subnet mask of <code class="docutils literal notranslate"><span class="pre">255.255.255.0</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">eth2</span></code> and <code class="docutils literal notranslate"><span class="pre">eth3</span></code> are configured to be in a bond, operating in
mode “6” (adaptive load balancing).</li>
<li><code class="docutils literal notranslate"><span class="pre">bond0.10</span></code> and <code class="docutils literal notranslate"><span class="pre">bond0.20</span></code> are created as VLAN tagged devices off
of the newly created bond.</li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">gluster01</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ansible.network_interfaces</span>
     <span class="l l-Scalar l-Scalar-Plain">network_ether_interfaces</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">device</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">eth0</span>
        <span class="l l-Scalar l-Scalar-Plain">bootproto</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">dhcp</span>
        <span class="l l-Scalar l-Scalar-Plain">mtu</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">9000</span>
     <span class="l l-Scalar l-Scalar-Plain">network_bridge_interfaces</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">device</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">br0</span>
        <span class="l l-Scalar l-Scalar-Plain">cidr</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.0.0.1/24</span>
        <span class="l l-Scalar l-Scalar-Plain">bridge_ports</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;eth1&quot;</span> <span class="p p-Indicator">]</span>
     <span class="l l-Scalar l-Scalar-Plain">network_bond_interfaces</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">device</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bond0</span>
        <span class="l l-Scalar l-Scalar-Plain">bootproto</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">static</span>
        <span class="l l-Scalar l-Scalar-Plain">bond_mode</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">6</span>
        <span class="l l-Scalar l-Scalar-Plain">bond_ports</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;eth2&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;eth3&quot;</span> <span class="p p-Indicator">]</span>
     <span class="l l-Scalar l-Scalar-Plain">network_vlan_interfaces</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">device</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bond0.10</span>
        <span class="l l-Scalar l-Scalar-Plain">vlan</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
        <span class="l l-Scalar l-Scalar-Plain">bootproto</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">static</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">device</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bond0.20</span>
        <span class="l l-Scalar l-Scalar-Plain">vlan</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
        <span class="l l-Scalar l-Scalar-Plain">bootproto</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">static</span>
</pre></div>
</div>
<p>[30]</p>
</div>
</div>
</div>
</div>
<div class="section" id="jinja2">
<h2><a class="toc-backref" href="#id98">Jinja2</a><a class="headerlink" href="#jinja2" title="Permalink to this headline">¶</a></h2>
<p>Jinja2 is the Python library used for variable manipulation and
substitution in Ansible. This is also commonly used when creating files
for the “<code class="docutils literal notranslate"><span class="pre">template</span></code>” module.</p>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id99">Variables</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Variables defined in Ansible can be single variables, lists, and
dictionaries. This can be referenced from the template.</p>
<ul>
<li><p class="first">Syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">DICTIONARY</span><span class="o">&gt;.&lt;</span><span class="n">KEY</span><span class="o">&gt;</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="o">&lt;</span><span class="n">DICTIONARY</span><span class="o">&gt;</span><span class="p">[</span><span class="s1">&#39;&lt;KEY&gt;&#39;</span><span class="p">]</span> <span class="p">}}</span>
</pre></div>
</div>
</li>
<li><p class="first">Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">certification</span><span class="o">.</span><span class="n">name</span> <span class="p">}}</span>
</pre></div>
</div>
</li>
</ul>
<p>Variables can be defined as a list or nested lists.</p>
<p>Syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;&lt;ITEM1&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;ITEM2&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;ITEM3&gt;&#39;</span> <span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;</span><span class="p">:</span>
 <span class="o">-</span> <span class="p">[</span> <span class="p">[</span> <span class="s1">&#39;&lt;ITEMA&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;ITEMB&gt;&#39;</span> <span class="p">]</span> <span class="p">]</span>
 <span class="o">-</span> <span class="p">[</span> <span class="p">[</span> <span class="s1">&#39;&lt;ITEM1&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;ITEM2&gt;&#39;</span> <span class="p">]</span> <span class="p">]</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">colors</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span> <span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cars</span><span class="p">:</span>
 <span class="o">-</span> <span class="p">[</span> <span class="s1">&#39;sports&#39;</span><span class="p">,</span> <span class="s1">&#39;sedan&#39;</span> <span class="p">]</span>
 <span class="o">-</span> <span class="p">[</span> <span class="s1">&#39;suv&#39;</span><span class="p">,</span> <span class="s1">&#39;pickup&#39;</span> <span class="p">]</span>
</pre></div>
</div>
<p>Lists can be called by their array position, starting at “0.”
Alternatively they can be called by the subvariable name.</p>
<p>Syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">item</span><span class="o">.</span><span class="mi">0</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">item</span><span class="o">.</span><span class="mf">0.</span><span class="o">&lt;</span><span class="n">SUBVARIABLE</span><span class="o">&gt;</span> <span class="p">}}</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">members</span><span class="p p-Indicator">:</span>
 <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Frank</span>
   <span class="l l-Scalar l-Scalar-Plain">contact</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">address</span><span class="p p-Indicator">:</span> <span class="s">&quot;111</span><span class="nv"> </span><span class="s">Puppet</span><span class="nv"> </span><span class="s">Drive&quot;</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">phone</span><span class="p p-Indicator">:</span> <span class="s">&quot;1111111111&quot;</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">msg=&quot;Contact {{ item.name }} at {{ item.contact.phone }}&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">with_items</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="p p-Indicator">{{</span> <span class="nv">members</span> <span class="p p-Indicator">}}</span>
</pre></div>
</div>
<p>[3]</p>
<p>Using a variable for a variable name is not possible with Jinja
templates. Only substitution for dictionary keys can be done with format
substitution.</p>
<p>Works:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">find interface facts</span>
  <span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">msg</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">hostvars[inventory_hostname][&#39;ansible_%s&#39;</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">format(item)]</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">with_items</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ansible_interfaces</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<p>Does not work:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">find interface facts</span>
  <span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">msg</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ansible_%s|</span><span class="nv"> </span><span class="s">format(item)]</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">with_items</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ansible_interfaces</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="filters">
<h3><a class="toc-backref" href="#id100">Filters</a><a class="headerlink" href="#filters" title="Permalink to this headline">¶</a></h3>
<p>In certain situations it is desired to apply filters to alert a variable
or expression. The syntax for running Jinja filters is
<code class="docutils literal notranslate"><span class="pre">&lt;VARIABLE&gt;|&lt;FUNCTION&gt;(&lt;OPTIONAL_PARAMETERS&gt;)</span></code>. Below are some of the
more common functions.</p>
<ul>
<li><p class="first">Convert to a different variable type.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;|</span><span class="n">string</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;|</span><span class="nb">list</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;|</span><span class="nb">int</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;|</span><span class="nb">float</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;|</span><span class="nb">bool</span> <span class="p">}}</span>
</pre></div>
</div>
</li>
<li><p class="first">Convert a list into a string and optionally separate each item by a
specified character.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;|</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;&lt;CHARACTER&gt;&quot;</span><span class="p">)</span> <span class="p">}}</span>
</pre></div>
</div>
</li>
<li><p class="first">Create a default variable if the variable is undefined.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;|</span><span class="n">default</span><span class="p">(</span><span class="s2">&quot;&lt;DEFAULT_VALUE&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Convert all characters in a string to lower or upper case.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;|</span><span class="n">lower</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;|</span><span class="n">upper</span> <span class="p">}}</span>
</pre></div>
</div>
</li>
<li><p class="first">Round numbers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;|</span><span class="nb">round</span> <span class="p">}}</span>
</pre></div>
</div>
</li>
<li><p class="first">Escape HTML characters.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;|</span><span class="n">escape</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">autoescape</span> <span class="n">true</span> <span class="o">%</span><span class="p">}</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span><span class="n">These</span> <span class="n">HTML</span> <span class="n">tags</span> <span class="n">will</span> <span class="n">be</span>
<span class="n">escaped</span> <span class="ow">and</span> <span class="n">visible</span> <span class="n">via</span> <span class="n">a</span> <span class="n">HTML</span> <span class="n">browser</span><span class="o">.&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endautoescape</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">String substitution.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">|</span><span class="nb">format</span><span class="p">(</span><span class="s2">&quot;I am this old:&quot;</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span> <span class="p">}}</span>
</pre></div>
</div>
</li>
<li><p class="first">Find the first or last value in a list.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">LIST</span><span class="o">&gt;|</span><span class="n">first</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">LIST</span><span class="o">&gt;|</span><span class="n">last</span> <span class="p">}}</span>
</pre></div>
</div>
</li>
<li><p class="first">Find the number of items in a variable.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;|</span><span class="n">length</span> <span class="p">}}</span>
</pre></div>
</div>
</li>
</ul>
<p>[20]</p>
</div>
<div class="section" id="comments">
<h3><a class="toc-backref" href="#id101">Comments</a><a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h3>
<p>Comments are template comments that will be removed when once a template
has been generated.</p>
<p>Syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="c1"># #}</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="c1"># this is a...</span>
    <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">ip</span> <span class="ow">is</span> <span class="s1">&#39;127.0.0.1&#39;</span> <span class="o">%</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span><span class="n">Welcome</span> <span class="n">to</span> <span class="n">localhost</span><span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
<span class="o">...</span><span class="n">example</span> <span class="n">comment</span> <span class="c1">#}</span>
</pre></div>
</div>
<p>Sometimes it is necessary to escape blocks of code, especially when
dealing with JSON or other similar formats. Jinja will not render
anything that is escaped.</p>
<p>Syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="s1">&#39;&#39;</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">raw</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endraw</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="s1">&#39;hello world&#39;</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">raw</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{{</span> <span class="n">jinja</span><span class="o">.</span><span class="n">wont</span><span class="o">.</span><span class="n">replace</span><span class="o">.</span><span class="n">this</span> <span class="p">}}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endraw</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>[20]</p>
</div>
<div class="section" id="blocks">
<h3><a class="toc-backref" href="#id102">Blocks</a><a class="headerlink" href="#blocks" title="Permalink to this headline">¶</a></h3>
<p>Templates can extend other templates by replacing “block” elements. At
least two files are required. The first file creates a place holder
block. The second file contains the content that will fill in that place
holder.</p>
<p>Syntax (file 1):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="o">&lt;</span><span class="n">DESCRIPTIVE_NAME</span><span class="o">&gt;</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>Syntax (file 2):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s2">&quot;&lt;FILE1&gt;&quot;</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="o">&lt;</span><span class="n">DESCRIPTIVE_NAME</span><span class="o">&gt;</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>Example (file 1):</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{% block header %}{% endblock %}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>{% block body %}{% endblock %}<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Example (file 2):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{% extends &quot;index.html&quot; %}
{% block header %}
Hello World
{% endblock %}
{% block body %}
Welcome to the Hello World page!
{% endblock %}
</pre></div>
</div>
<p>[20]</p>
</div>
<div class="section" id="loops">
<h3><a class="toc-backref" href="#id103">Loops</a><a class="headerlink" href="#loops" title="Permalink to this headline">¶</a></h3>
<p>Loops can use standard comparison and/or logic operators.</p>
<p>Comparison Operators:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">==</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">!=</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&gt;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">=&lt;</span></code></li>
</ul>
<p>Logic Operators:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">and</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">or</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">not</span></code></li>
</ul>
<p>“For” loops can be used to loop through a list or dictionary.</p>
<p>Syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="o">&lt;</span><span class="n">VALUE</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="p">{{</span> <span class="o">&lt;</span><span class="n">LIST_VARIABLE</span><span class="o">&gt;</span> <span class="p">}}</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="o">&lt;</span><span class="n">KEY</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">VALUE</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="p">{{</span> <span class="o">&lt;</span><span class="n">DICTIONARY_VARIABLES</span><span class="o">&gt;</span> <span class="p">}}</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/hosts</span>
<span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">host</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">[</span><span class="s1">&#39;ceph&#39;</span><span class="p">]</span> <span class="o">%</span><span class="p">}</span>
<span class="n">hostvars</span><span class="p">[</span><span class="n">host</span><span class="p">][</span><span class="s1">&#39;private_ip&#39;</span><span class="p">]</span> <span class="n">hostvars</span><span class="p">[</span><span class="n">host</span><span class="p">][</span><span class="s1">&#39;ansible_hostname&#39;</span><span class="p">]</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="o">%</span><span class="p">}</span>
<span class="p">[{{</span> <span class="n">groups</span><span class="p">[</span><span class="s1">&#39;db&#39;</span><span class="p">][{{</span> <span class="n">count</span> <span class="p">}}]</span> <span class="p">}}]</span>
<span class="nb">type</span><span class="o">=</span><span class="n">server</span>
<span class="n">priority</span><span class="o">=</span><span class="p">{{</span> <span class="n">count</span> <span class="p">}}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>“For” loops have special variables that can be referenced relating to
the index that the loop is on.</p>
<ul class="simple">
<li>loop.index = The current index of the loop, starting at 1.</li>
<li>loop.index0 = The current index of the loop, starting at 0.</li>
<li>loop.revindex = The same as “loop.index” but in reverse order.</li>
<li>loop.revindex = The same as “loop.index0” but in reverse order.</li>
<li>loop.first = This will be True if it is the first index.</li>
<li>loop.last = This will be True if is it the last index.</li>
</ul>
<p>“If” statements can be run if a certain condition is met.</p>
<p>Syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="o">&lt;</span><span class="n">VALUE</span><span class="o">&gt;</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="o">&lt;</span><span class="n">VALUE_1</span><span class="o">&gt;</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="k">elif</span> <span class="o">&lt;</span><span class="n">VALUE_2</span><span class="o">&gt;</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="k">else</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="p">{{</span> <span class="n">taco_day</span> <span class="p">}}</span> <span class="o">==</span> <span class="s2">&quot;Tuesday&quot;</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">Taco</span> <span class="n">day</span> <span class="ow">is</span> <span class="n">on</span> <span class="n">Tuesday</span><span class="o">.</span>
<span class="p">{</span><span class="o">%</span> <span class="k">else</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">Taco</span> <span class="n">day</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">on</span> <span class="n">a</span> <span class="n">Tuesday</span><span class="o">.</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>[20]</p>
</div>
</div>
<div class="section" id="python-api">
<h2><a class="toc-backref" href="#id104">Python API</a><a class="headerlink" href="#python-api" title="Permalink to this headline">¶</a></h2>
<p>Ansible is written in Python so it can be used programmatically to run Playbooks. This does not provide a thread-safe interface and is subject to change depending on the needs of the actual Ansible utilities. It is recommended to use a RESTful API from a dashboard such as the official AWX project. Using the direct Python libraries for Ansible is not recommended. [34]</p>
</div>
<div class="section" id="containers">
<h2><a class="toc-backref" href="#id105">Containers</a><a class="headerlink" href="#containers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ansible-container">
<h3><a class="toc-backref" href="#id106">Ansible Container</a><a class="headerlink" href="#ansible-container" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://docs.ansible.com/ansible-container/">official Ansible Container
project</a> aims to allow
Playbooks to be deployed directly to docker containers. This allows
Ansible to orchestrate both infrastructure and applications.</p>
<p>Install Ansible Container into a Python virtual environment. This helps
to separate Python packages provided by the operating system’s package
manager. Source the “activate” file to use the new Python environment.
[24]</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ virtualenv ansible-container
$ <span class="nb">source</span> ansible-container/bin/activate
$ pip install -U pip setuptools
$ pip install ansible-container<span class="o">[</span>docker,openshift<span class="o">]</span>
</pre></div>
</div>
<ul class="simple">
<li>Ansible Container directory structure:<ul>
<li>container.yml = An Ansible file that mirrors Docker Compose syntax
is used to define how to create the docker container. Common
settings include the image to use, ports to open, commands to run,
etc.</li>
<li>ansible-requirements.txt = Python dependencies to install for
Ansible.</li>
<li>requirements.yml = Ansible dependencies to install from Ansible
Galaxy.</li>
<li>ansible.cfg = Ansible configuration for the container.</li>
</ul>
</li>
</ul>
<p>Example <code class="docutils literal notranslate"><span class="pre">container.yml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">version</span><span class="p p-Indicator">:</span> <span class="s">&quot;2&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">web</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">from</span><span class="p p-Indicator">:</span> <span class="s">&quot;centos:7&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">ports</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;80:80&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">command</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;/usr/bin/dumb-init&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;/usr/sbin/apache2ctl&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;-D&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;FOREGROUND&quot;</span><span class="p p-Indicator">]</span>
    <span class="l l-Scalar l-Scalar-Plain">dev_overrides</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">environment</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;DEBUG=1&quot;</span>
</pre></div>
</div>
<p>All of the Docker Compose options as specified at
<a class="reference external" href="https://docs.docker.com/compose/compose-file/">https://docs.docker.com/compose/compose-file/</a>.</p>
<p>Common <code class="docutils literal notranslate"><span class="pre">container.yml</span></code> options:</p>
<ul>
<li><p class="first">version = The version of Docker Compose to use. Valid options are
<code class="docutils literal notranslate"><span class="pre">1</span></code> or <code class="docutils literal notranslate"><span class="pre">2</span></code> since Ansible Container 0.3.0.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">version</span><span class="p p-Indicator">:</span> <span class="s">&#39;2&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">settings = Project configuration settings.</p>
<ul class="simple">
<li>conductor_base = The container to run Ansible from. This should
mirror the development environment used for Ansible Container.</li>
</ul>
</li>
</ul>
<p>Example:</p>
<blockquote>
<div><blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">settings</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">conductor_base</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">centos:7</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>deployment_output_path = The directory mounted for placing the
generated Ansible Playbook(s). Default: <code class="docutils literal notranslate"><span class="pre">./ansible-deployment</span></code>.</li>
<li>project_name = The name of the Ansible project. By default, this
will use the name of the directory that the <code class="docutils literal notranslate"><span class="pre">container.yml</span></code> file
is in.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>services = This is where one or more docker containers are defined. A
unique name should be provided to each different container. These
names are used as the hosts in the Playbook file.</li>
</ul>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">&lt;GROUP_OR_HOST&gt;</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
</div></blockquote>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">mysql</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<ul class="simple">
<li>from = The docker image to use for a service.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">from</span><span class="p p-Indicator">:</span> <span class="s">&quot;&lt;IMAGE&gt;:&lt;VERSION&gt;&quot;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">from</span><span class="p p-Indicator">:</span> <span class="s">&quot;ubuntu:xenial&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li>roles = A list of Ansible roles to run on the container.</li>
<li><dl class="first docutils">
<dt>ports = The hypervisor port to bind to and the container port to</dt>
<dd>forward traffic to/from.</dd>
</dl>
</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">ports</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;DOCKER_PORT&gt;:&lt;HYPERVISOR_PORT&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">ports</span><span class="p p-Indicator">:</span> <span class="s">&quot;4444:443&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li>expose = Similar to <cite>ports</cite> but the port forwarding is only done on the hypervisor’s localhost address.</li>
<li>links = Directly connect container networks for container-to-container traffic.</li>
<li>command = Specify a shell command, providing all of the arguments separated via a list. This is the default command run to start the container. If this command stops then the container will be stopped.</li>
</ul>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">command</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;COMMAND&gt;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;ARGUMENT_1&gt;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;ARGUMENT_2&gt;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;ARGUMENT_3&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>entrypoint = Specify a shell command to run before starting the main <cite>command</cite>. This allows for checks to ensure dependencies are running.</li>
<li>depends_on = The services/containers that this container requires before starting. This helps to start services in a specific sequence.</li>
<li>volumes = Define all of the bind mounts from the hypervisor to the docker container.</li>
<li>volumes_from = Mount some or all all the same mounts that another container is using.</li>
</ul>
<p>The docker container(s) can be created after the <code class="docutils literal notranslate"><span class="pre">container.yml</span></code> file
is completed to describe the container deployment.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-container build
</pre></div>
</div>
<p>[25]</p>
</div>
</div>
<div class="section" id="dashboards">
<h2><a class="toc-backref" href="#id107">Dashboards</a><a class="headerlink" href="#dashboards" title="Permalink to this headline">¶</a></h2>
<p>Various dashboards are available that provide a graphical user interface
(GUI) and usually an API to help automate Ansible deployments. These can
be used for user access control lists (ACLs), scheduling automated
tasks, and having a visual representation of Ansible’s deployment
statistics.</p>
<div class="section" id="ansible-tower-3">
<h3><a class="toc-backref" href="#id108">Ansible Tower 3</a><a class="headerlink" href="#ansible-tower-3" title="Permalink to this headline">¶</a></h3>
<p>Ansible Tower is the official dashboard maintained by Red Hat. The
program requires PostgreSQL, Python, and RabbitMQ. A free trial of it
can be used to manage up to 10 servers for testing purposes only. A
license can be bought to use Tower for managing more servers and to
provide support.</p>
<p>Ansible Tower 3.1 Requirements:</p>
<ul class="simple">
<li>Red Hat Enterprise Linux (RHEL) 7, Ubuntu 14.04, and Ubuntu 16.04<ul>
<li>Support for RHEL 6 was dropped in 3.1.0</li>
</ul>
</li>
<li>Ansible &gt;= 2.1</li>
<li>PostgreSQL 9.4</li>
</ul>
<p>Ansible Tower 3.2 Requirements:</p>
<ul class="simple">
<li>Red Hat Enterprise Linux (RHEL) 7, Ubuntu 14.04, and Ubuntu 16.04</li>
<li>Ansible &gt;= 2.3</li>
<li>Access to some inventory sources, including Azure, requires &gt;= 2.4.</li>
<li>PostgreSQL 9.6</li>
</ul>
<p>Tower can be downloaded from <a class="reference external" href="http://releases.ansible.com/ansible-tower/">http://releases.ansible.com/ansible-tower/</a>.
The “setup” package only contains Ansible Tower. The “setup-bundle” has
all of the dependencies for offline installation on RHEL servers. At
least a free trial license will be required to use the software which
can be obtained from the <a class="reference external" href="https://www.ansible.com/license">Ansible Tower license
page</a>.</p>
<p>Once downloaded, it can be installed. This will at least setup a Nginx
server and a virtual host for serving Ansible Tower via HTTP.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ curl -O http://releases.ansible.com/ansible-tower/setup/ansible-tower-setup-latest.tar.gz
$ tar -x -z -v -f ansible-tower-setup-latest.tar.gz
$ <span class="nb">cd</span> ./ansible-tower-setup-3.*/
</pre></div>
</div>
<p>At a bare minimum for 1 node Ansible Tower installation, the passwords
to use for the various services need to be defined in the <code class="docutils literal notranslate"><span class="pre">inventory</span></code>
file.</p>
<ul class="simple">
<li>admin_password</li>
<li>pg_password</li>
<li>rabbitmq_password</li>
</ul>
<p>Ansible Tower supports clustering. This requires that the PostgreSQL
service is configured on a dedicated server that is not running Ansible
Tower. The Playbook that installs Tower can install PostgreSQL or use
credentials to an existing server. The PostgreSQL user for Ansible Tower
also requires <code class="docutils literal notranslate"><span class="pre">CREATEDB</span></code> access during the initial installation to
setup the necessary database and tables.</p>
<ul class="simple">
<li>Installing PostgreSQL:</li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[tower]</span>
<span class="na">&lt;TOWER1&gt;</span>
<span class="na">&lt;TOWER2&gt;</span>
<span class="na">&lt;TOWER3&gt;</span>

<span class="k">[database]</span>
<span class="na">&lt;POSTGRESQL1&gt;</span>

<span class="k">[all:vars]</span>
<span class="c1"># PostgreSQL</span>
<span class="na">pg_database</span><span class="o">=</span><span class="s">&quot;awx&quot;</span>
<span class="na">pg_username</span><span class="o">=</span><span class="s">&quot;awx&quot;</span>
<span class="na">pg_password</span><span class="o">=</span><span class="s">&quot;&lt;PASSWORD&gt;&quot;</span>
<span class="c1"># RabbitMQ</span>
<span class="na">rabbitmq_port</span><span class="o">=</span><span class="s">5672</span>
<span class="na">rabbitmq_vhost</span><span class="o">=</span><span class="s">&quot;tower&quot;</span>
<span class="na">rabbitmq_username</span><span class="o">=</span><span class="s">&quot;tower&quot;</span>
<span class="na">rabbitmq_password</span><span class="o">=</span><span class="s">&quot;&lt;PASSWORD&gt;&quot;</span>
<span class="na">rabbitmq_cookie</span><span class="o">=</span><span class="s">&quot;&lt;RANDOM_STRING&gt;&quot;</span>
<span class="c1">## Set to &quot;True&quot; if fully qualified domain names (FQDNs)</span>
<span class="c1">## are used in the inventory file. Otherwise this should</span>
<span class="c1">## be &quot;False&quot;</span>
<span class="na">rabbitmq_use_long_name</span><span class="o">=</span><span class="s">&quot;True&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li>Using an existing PostgreSQL server:</li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[tower]</span>
<span class="na">&lt;TOWER1&gt;</span>
<span class="na">&lt;TOWER2&gt;</span>
<span class="na">&lt;TOWER3&gt;</span>

<span class="k">[all:vars]</span>
<span class="c1"># PostgreSQL</span>
<span class="na">pg_host</span><span class="o">=</span><span class="s">&quot;&lt;HOST_OR_IP&gt;&quot;</span>
<span class="na">pg_port</span><span class="o">=</span><span class="s">5432</span>
<span class="na">pg_database</span><span class="o">=</span><span class="s">&quot;awx&quot;</span>
<span class="na">pg_username</span><span class="o">=</span><span class="s">&quot;awx&quot;</span>
<span class="na">pg_password</span><span class="o">=</span><span class="s">&quot;&lt;PASSWORD&gt;&quot;</span>
<span class="c1"># RabbitMQ</span>
<span class="na">rabbitmq_port</span><span class="o">=</span><span class="s">5672</span>
<span class="na">rabbitmq_vhost</span><span class="o">=</span><span class="s">&quot;tower&quot;</span>
<span class="na">rabbitmq_username</span><span class="o">=</span><span class="s">&quot;tower&quot;</span>
<span class="na">rabbitmq_password</span><span class="o">=</span><span class="s">&quot;&lt;PASSWORD&gt;&quot;</span>
<span class="na">rabbitmq_cookie</span><span class="o">=</span><span class="s">&quot;&lt;RANDOM_STRING&gt;&quot;</span>
<span class="c1">## Set to &quot;True&quot; if fully qualified domain names (FQDNs)</span>
<span class="c1">## are used in the inventory file. Otherwise this should</span>
<span class="c1">## be &quot;False&quot;</span>
<span class="na">rabbitmq_use_long_name</span><span class="o">=</span><span class="s">&quot;True&quot;</span>
</pre></div>
</div>
<p>The “ansible” package needs to be available in a package repository. On
RHEL systems, the Extra Packages for Enterprise Linux (EPEL) repository
should be installed.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo yum -y install epel-release
</pre></div>
</div>
<p>Then install Ansible Tower using the setup shell script. This will run
an Ansible Playbook to install Tower.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo ./setup.sh
</pre></div>
</div>
<p>When the installation is complete, Ansible Tower can be accessed by a
web browser. If no SSL certificate was defined, then a self-signed SSL
certificate will be used to encrypt the connection. The default username
is “admin” and the password is defined in the <code class="docutils literal notranslate"><span class="pre">inventory</span></code> file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">SERVER_IP_OR_HOSTNAME</span><span class="o">&gt;/</span>
</pre></div>
</div>
<p>For updating Ansible Tower, download the latest tarball release and
re-run the <code class="docutils literal notranslate"><span class="pre">setup.sh</span></code> script with the original inventory and
variables. Adding new nodes to the cluster should also have that script
run again so that all of the existing and new nodes will be configured
to know about each other. Automatically scaling and/or replicating
PostgreSQL is currently not supported by the Tower setup Playbook. Only
1 database node can be configured by this Playbook.</p>
<p>Logs are stored in <code class="docutils literal notranslate"><span class="pre">/var/log/tower/</span></code>. The main log file is
<code class="docutils literal notranslate"><span class="pre">/var/log/tower/tower.log</span></code>.</p>
<p>Ports:</p>
<ul class="simple">
<li>80/tcp = Unencyrpted Ansible Tower dashboard web traffic.</li>
<li>443/tcp = SSL encrypted Ansible Tower dashboard web traffic.</li>
<li>5432/tcp = PostgreSQL relational database server.</li>
</ul>
<p>Cluster ports:</p>
<ul class="simple">
<li>4369/tcp = Discovering other Ansible Tower nodes.</li>
<li>5672/tcp = Local RabbitMQ port.</li>
<li>25672/tcp = External RabbitMQ port.</li>
<li>15672/tcp = RabbitMQ dashboard.</li>
</ul>
<p>[35][37]</p>
<div class="section" id="gui">
<h4><a class="toc-backref" href="#id109">GUI</a><a class="headerlink" href="#gui" title="Permalink to this headline">¶</a></h4>
<p>There is a navigation bar that contains links to the most important
parts of Ansible Tower.</p>
<ul class="simple">
<li>Projects = Playbooks and, if applicable, credentials to access them
from different types of source code management (SCM) systems.<ul>
<li>Manual = Use the a Playbook from the local file system on the
Ansible Tower server.</li>
<li>Git = A SCM.</li>
<li>Mercurial (hg) = A SCM.</li>
<li>Subversion (svn) = A SCM.</li>
<li>Red Hat Insights = Use a Playbook from the Red Hat Insights
program to do validation checks.</li>
</ul>
</li>
<li>Inventories = Static and dynamic inventories can be defined here.<ul>
<li>Supported sources:<ul>
<li>Custom Script = Provide a custom script that outputs a valid
JSON or YAML inventory.</li>
<li>Sourced from a Project = Import inventory from an existing
Project (Playbook).</li>
<li>Amazon EC2</li>
<li>Google Compute Engine</li>
<li>Microsoft Azure Resource Manager</li>
<li>VMWare vCenter</li>
<li>Red Hat Satellite 6</li>
<li>OpenStack</li>
</ul>
</li>
</ul>
</li>
<li>Templates = Used for defining a Playbook to run, the hosts to run on,
any additional variables to use, and optionally a time interval to
automatically run the template.<ul>
<li>Workflow Template = Defines a workflow for determining when to run
a Playbook and what runs after depending on if the Playbook failed
or succeeded.</li>
</ul>
</li>
<li>Jobs = Templates that have been run (or are running) and their logs
and statistics.</li>
<li>(The gear/cog image) = Settings for configuring new users, teams,
dynamic inventory scripts, notifications, the license, and other
settings relating to the Ansible Tower installation.</li>
<li>(The book image) = A shortcut to Ansible Tower’s official
documentation.</li>
</ul>
<p>[50][51]</p>
<p>The default timeout for an authorization token is 30 minutes. After this
time, the token will expire and the end-user will need to re-login into
their account. This setting can be modified in the <code class="docutils literal notranslate"><span class="pre">settings.py</span></code> file.
[52]</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo vim /etc/tower/conf.d/settings.py
<span class="nv">AUTH_TOKEN_EXPIRATION</span> <span class="o">=</span> &lt;SECONDS_BEFORE_TIMEOUT&gt;
</pre></div>
</div>
</div>
<div class="section" id="security">
<h4><a class="toc-backref" href="#id110">Security</a><a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h4>
<div class="section" id="authentication">
<h5><a class="toc-backref" href="#id111">Authentication</a><a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h5>
<p>User authentication, by default, will store encrypted user information
into the PostgreSQL database. Instead of using this, Tower can be
configured to use an external authentication service by going into
<code class="docutils literal notranslate"><span class="pre">Settings</span> <span class="pre">&gt;</span> <span class="pre">CONFIGURE</span> <span class="pre">TOWER</span></code>. The available options are:</p>
<ul class="simple">
<li>Social<ul>
<li>GitHub<ul>
<li>GitHub [Users]</li>
<li>GitHub Org[anization]</li>
<li>GitHub Team</li>
</ul>
</li>
<li>Google OAuth2</li>
</ul>
</li>
<li>Enterprise<ul>
<li>Azure AD</li>
<li>LDAP</li>
<li>RADIUS</li>
<li>SAML</li>
<li>TACACS+</li>
</ul>
</li>
</ul>
<p>[52]</p>
</div>
<div class="section" id="acls">
<h5><a class="toc-backref" href="#id112">ACLs</a><a class="headerlink" href="#acls" title="Permalink to this headline">¶</a></h5>
<p>Every user in Tower is associated with at least one organization. The
level of access the user has to that organizations resources is defined
by one of the different access control lists (ACLs).</p>
<p>Hierarchy [1]:</p>
<ul class="simple">
<li>Organizations = A combination of Users, Teams, Projects, and
Inventories.<ul>
<li>Teams = Teams are a collection of users. Teams are not required.
Multiple users’ access can be modified easily and quickly via a
Team instead of individually modifying each user’s access.<ul>
<li>Users = Users are optionally associated with a Team and are
always associated with an Organization. An ACL is set for what
resources the user is allowed to use.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>User types / ACLs:</p>
<ul class="simple">
<li>System Administrator = Has full access to all organizations and the
Tower installation.</li>
<li>System Auditor = Has read-only access to an organization.</li>
<li>Normal User = Has read and write access to an organization.</li>
</ul>
<p>[51]</p>
</div>
<div class="section" id="ssl">
<h5><a class="toc-backref" href="#id113">SSL</a><a class="headerlink" href="#ssl" title="Permalink to this headline">¶</a></h5>
<p>By default, Tower creates a self-signed SSL certificate to secure web
traffic. [37] Most web browsers will mark this as an untrusted
connection. For using a different SSL that is trusted, the contents of
these two files need to be replaced on each Tower node:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">/etc/tower/tower.cert</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">/etc/tower/tower.key</span></code></li>
</ul>
</div>
</div>
<div class="section" id="api">
<h4><a class="toc-backref" href="#id114">API</a><a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h4>
<p>Ansible Tower has a strong focus on automating Ansible even more by
providing an API interface. Programs can interact with this by making
HTTP GET and PUT requests. All of the available endpoints can be viewed
by going to:</p>
<p><code class="docutils literal notranslate"><span class="pre">https://&lt;ANSIBLE_TOWER_HOST&gt;/api/v1/</span></code></p>
<p>Version 1 of the API provides these endpoints:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;authtoken&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/authtoken/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ping&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/ping/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/config/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;settings&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/settings/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;me&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/me/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dashboard&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/dashboard/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;organizations&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/organizations/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;users&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/users/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;projects&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/projects/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_updates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/project_updates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;teams&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/teams/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;credentials&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/credentials/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;inventory&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/inventories/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;inventory_scripts&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/inventory_scripts/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;inventory_sources&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/inventory_sources/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;inventory_updates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/inventory_updates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;groups&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/groups/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;hosts&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/hosts/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;job_templates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/job_templates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;jobs&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/jobs/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;job_events&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/job_events/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ad_hoc_commands&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/ad_hoc_commands/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;system_job_templates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/system_job_templates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;system_jobs&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/system_jobs/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;schedules&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/schedules/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;roles&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/roles/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;notification_templates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/notification_templates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;notifications&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/notifications/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;labels&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/labels/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;unified_job_templates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/unified_job_templates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;unified_jobs&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/unified_jobs/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;activity_stream&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/activity_stream/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;workflow_job_templates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/workflow_job_templates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;workflow_jobs&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/workflow_jobs/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;workflow_job_template_nodes&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/workflow_job_template_nodes/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;workflow_job_nodes&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v1/workflow_job_nodes/&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">https://&lt;ANSIBLE_TOWER_HOST&gt;/api/v2/</span></code></p>
<p>Version 2 of the API provides these endpoints:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;authtoken&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/authtoken/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ping&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/ping/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;instances&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/instances/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;instance_groups&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/instance_groups/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/config/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;settings&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/settings/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;me&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/me/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dashboard&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/dashboard/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;organizations&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/organizations/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;users&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/users/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;projects&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/projects/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_updates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/project_updates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;teams&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/teams/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;credentials&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/credentials/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;credential_types&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/credential_types/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;inventory&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/inventories/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;inventory_scripts&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/inventory_scripts/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;inventory_sources&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/inventory_sources/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;inventory_updates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/inventory_updates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;groups&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/groups/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;hosts&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/hosts/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;job_templates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/job_templates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;jobs&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/jobs/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;job_events&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/job_events/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ad_hoc_commands&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/ad_hoc_commands/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;system_job_templates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/system_job_templates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;system_jobs&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/system_jobs/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;schedules&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/schedules/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;roles&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/roles/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;notification_templates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/notification_templates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;notifications&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/notifications/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;labels&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/labels/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;unified_job_templates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/unified_job_templates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;unified_jobs&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/unified_jobs/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;activity_stream&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/activity_stream/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;workflow_job_templates&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/workflow_job_templates/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;workflow_jobs&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/workflow_jobs/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;workflow_job_template_nodes&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/workflow_job_template_nodes/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;workflow_job_nodes&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/v2/workflow_job_nodes/&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>[36]</p>
</div>
</div>
<div class="section" id="awx">
<h3><a class="toc-backref" href="#id115">AWX</a><a class="headerlink" href="#awx" title="Permalink to this headline">¶</a></h3>
<p>AWX is the upstream and open source version of Ansible Tower released by
Red Hat to the public on September 7, 2017. [41] The source code for the
project can be found in the
<a class="reference external" href="https://github.com/ansible/awx">ansible/awx</a> repository on GitHub.</p>
<div class="section" id="install">
<h4><a class="toc-backref" href="#id116">Install</a><a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h4>
<p>The “installer/inventory” file has an example inventory that can be used
without any configuration. These are many options that can be fine tuned
to change the environment and deploy it to different platforms.</p>
<p>Deployment inventory options:</p>
<ul class="simple">
<li>All<ul>
<li>default_admin_user = The administrator account’s username.</li>
<li>default_admin_password = The administrator account’s password.</li>
<li>awx_secret_key = A string that is used as a private key kept on
all of the AWX nodes for encrypting and decrypting information
that goes to/from the PostgreSQL database.</li>
<li>pg_username = The PostgreSQL username to use.</li>
<li>pg_password = The PostgreSQL password to use.</li>
<li>pg_database = The PostgreSQL database name.</li>
<li>pg_port = The PostgreSQL port to connect to.</li>
<li>http_proxy = A HTTP proxy to use.</li>
<li>https_proxy = A HTTPS proxy to use.</li>
<li>no_proxy = Websites that should not be proxied.</li>
</ul>
</li>
<li>docker (build)<ul>
<li>dockerhub_base and dockerhub_version = Comment out these
variables to build docker images from scratch instead of
downloading them from Docker Hub.</li>
<li>postgres_data_dir = The directory to store persistent PostgreSQL
data. By default, this is stored in the temporary file system at
<code class="docutils literal notranslate"><span class="pre">/tmp/</span></code>.</li>
<li>host_port = The local HTTP port that docker should bind to for
the AWX dashboard.</li>
<li>use_container_for_build = Use a container to deploy the other
container. This keeps dependencies installed for installation in
the container instead of the local system.</li>
<li>awx_official = Use the official AWX logos. The <a class="reference external" href="https://github.com/ansible/awx-logos">awx-logos GitHub
project</a> will need to be
cloned in the directory that “awx” was also cloned into.</li>
</ul>
</li>
<li>docker (prebuilt)<ul>
<li>dockerhub_base = The Docker Hub repository to use.</li>
<li>dockerhub_version = The version of AWX containers to use.</li>
<li>postgres_data_dir</li>
<li>host_port</li>
</ul>
</li>
<li>OpenShift<ul>
<li>openshift_host = The OpenShift cluster to connect to.</li>
<li>openshift_user = The username used to connect to OpenShift.</li>
<li>openshift_password = The password used to connect to OpenShift.</li>
<li>docker_registry = The Docker Registry to connect to.</li>
<li>docker_registry_repository = The Docker Repository to use.</li>
<li>docker_registry_username = The username to login into the Docker
Registry.</li>
<li>docker_registry_password = The password to login into the Docker
Registry.</li>
<li>awx_openshift_project = The name of the project to create and
use in OpenShift.</li>
<li>awx_node_port = The HTTP port to use inside of the AWX pod for
accessing the dashboard.</li>
</ul>
</li>
</ul>
<p>Install:</p>
<p>By default, AWX will install docker containers from Docker Hub. It is
also possible to have the installer build docker containers from scratch
an deploy them into a OpenShift cluster.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/ansible/awx.git
$ <span class="nb">cd</span> ./awx/installer/
$ sudo ansible-playbook -i inventory install.yml
</pre></div>
</div>
<p>After installation, the containers will be started. On a server, the
containers are configured to automatically restart up on boot if the
<code class="docutils literal notranslate"><span class="pre">docker</span></code> service is enabled. With workstations and other environments
where docker is not running on boot, the containers can still be started
and stopped manually.</p>
<p>Manually start:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ <span class="k">for</span> docker_container in postgres rabbitmq memcached awx_web awx_task<span class="p">;</span> <span class="k">do</span> sudo docker start <span class="si">${</span><span class="nv">docker_container</span><span class="si">}</span><span class="p">;</span> <span class="k">done</span>
</pre></div>
</div>
<p>Manually stop:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ <span class="k">for</span> docker_container in awx_task awx_web memcached rabbitmq postgres<span class="p">;</span> <span class="k">do</span> sudo docker stop <span class="si">${</span><span class="nv">docker_container</span><span class="si">}</span><span class="p">;</span> <span class="k">done</span>
</pre></div>
</div>
</div>
<div class="section" id="update">
<h4><a class="toc-backref" href="#id117">Update</a><a class="headerlink" href="#update" title="Permalink to this headline">¶</a></h4>
<p>AWX is the unstable development version of Ansible Tower so updates are not guaranteed to work. Before doing an update, the PostgreSQL database should be backed up. This contains all of the information that is stored by AWX.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ docker <span class="nb">exec</span> postgres pg_dump -U postgres -F t awx &gt; <span class="si">${</span><span class="nv">postgres_data_dir</span><span class="si">}</span>/awx_backup.sql
</pre></div>
</div>
<p>If there are issues with the update, then restore the database.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ docker <span class="nb">exec</span> postgres sh -c <span class="s2">&quot;pg_restore -U awx -C -d awx /var/lib/postgresql/data/awx_backup.sql&quot;</span>
</pre></div>
</div>
<p>Compare the latest “installer/inventory” file with the existing inventory file. Some settings may have changed that need to be updated.</p>
<p>Update AWX by re-running the installer Playbook from the latest clone of the GitHub repository clone. The default installation settings for using Docker Hub will download the latest images.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/ansible/awx
$ ansible-playbook -i inventory awx/installer/install.yml
</pre></div>
</div>
<p>[59]</p>
</div>
<div class="section" id="uninstall">
<h4><a class="toc-backref" href="#id118">Uninstall</a><a class="headerlink" href="#uninstall" title="Permalink to this headline">¶</a></h4>
<p>Stop and delete the AWX docker containers.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ <span class="k">for</span> docker_container in awx_task awx_web memcached rabbitmq postgres<span class="p">;</span> <span class="k">do</span> docker stop <span class="si">${</span><span class="nv">docker_container</span><span class="si">}</span><span class="p">;</span> docker rm <span class="si">${</span><span class="nv">docker_container</span><span class="si">}</span><span class="p">;</span> <span class="k">done</span>
</pre></div>
</div>
<p>The “postgres_data_dir” directory, as defined in the inventory file, will need to be manually deleted.</p>
</div>
</div>
<div class="section" id="rundeck">
<h3><a class="toc-backref" href="#id119">Rundeck</a><a class="headerlink" href="#rundeck" title="Permalink to this headline">¶</a></h3>
<p>Rundeck is an open source dashboard and API framework, programmed with
Java, for automating the execution of commands and scripts via SSH.
There is a community supported Ansible plugin for Rundeck that is
currently only <em>alpha</em> quality. It supports using Ansible inventory as
well as running modules and Playbooks. This can be tested out using a
pre-built docker image:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo docker pull batix/rundeck-ansible
$ sudo docker run -d --name rundeck-test -p <span class="m">127</span>.0.0.1:4440:4440 -e <span class="nv">RDECK_ADMIN_PASS</span><span class="o">=</span>password -v <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>:/data batix/rundeck-ansible
</pre></div>
</div>
<p>Log into the dashboard at <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:4440</span></code> and use the username
“admin” and the password that was set by the <code class="docutils literal notranslate"><span class="pre">RDECK_ADMIN_PASS</span></code>
variable.</p>
<p>[56]</p>
</div>
<div class="section" id="semaphore">
<h3><a class="toc-backref" href="#id120">Semaphore</a><a class="headerlink" href="#semaphore" title="Permalink to this headline">¶</a></h3>
<p>Semaphore was designed to be an unofficial open source alternative to
Ansible Tower, written in Go. The latest release can be found at
<a class="reference external" href="https://github.com/ansible-semaphore/semaphore/releases">https://github.com/ansible-semaphore/semaphore/releases</a>.</p>
<p>Requirements:</p>
<ul class="simple">
<li>Ansible</li>
<li>Git &gt;= 2.0</li>
<li>Go</li>
<li>MariaDB &gt;= 5.3 or MySQL &gt;= 5.6.4</li>
</ul>
<p>Installation:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo curl -L https://github.com/ansible-semaphore/semaphore/releases/download/v2.4.1/semaphore_linux_amd64 &gt; /usr/bin/semaphore
$ sudo /usr/bin/semaphore -setup
</pre></div>
</div>
<p>Semaphore will now be available at <code class="docutils literal notranslate"><span class="pre">http://&lt;SEMAPHORE_HOST&gt;:3000</span></code>.</p>
<p>[26]</p>
</div>
<div class="section" id="tensor">
<h3><a class="toc-backref" href="#id121">Tensor</a><a class="headerlink" href="#tensor" title="Permalink to this headline">¶</a></h3>
<p>Tensor is a open source dashboard and API for both Ansible and
Terraform, written in Go by Pearson. Most of the public facing
documentation on it’s GitHub page is either incomplete or missing.</p>
<p>Requirements:</p>
<ul class="simple">
<li>Ansible 2</li>
<li>Git</li>
<li>Go</li>
<li>MongoDB 3.3</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> supports building packages for Debian and RHEL based
distributions as well creating docker containers.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ make deb
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ make rpm
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ make docker
</pre></div>
</div>
<p>[57]</p>
</div>
</div>
<div class="section" id="errata">
<h2><a class="reference external" href="https://github.com/ekultails/rootpages/commits/master/src/ansible.rst">Errata</a><a class="headerlink" href="#errata" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="bibliography">
<h2><a class="toc-backref" href="#id123">Bibliography</a><a class="headerlink" href="#bibliography" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>“An Ansible Tutorial.” Servers for Hackers. August 26, 2014. Accessed June 24, 2016. <a class="reference external" href="https://serversforhackers.com/an-ansible-tutorial">https://serversforhackers.com/an-ansible-tutorial</a></li>
<li>“Intro to Playbooks.” Ansible Documentation. August 4, 2017. Accessed August 6, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/playbooks_intro.html">http://docs.ansible.com/ansible/playbooks_intro.html</a></li>
<li>“Inventory.” Ansible Docs. June 22, 2016. Accessed July 9, 2016. <a class="reference external" href="http://docs.ansible.com/ansible/intro_inventory.html">http://docs.ansible.com/ansible/intro_inventory.html</a></li>
<li>“Variables.” Ansible Documentation. June 1, 2017. Accessed June 17, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/playbooks_variables.html">http://docs.ansible.com/ansible/playbooks_variables.html</a></li>
<li>“Best Practices.” Ansible Documentation. June 4, 2017. Accessed June 4, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/playbooks_best_practices.html">http://docs.ansible.com/ansible/playbooks_best_practices.html</a></li>
<li>“Commands Modules.” Ansible Documentation. October 10, 2017. Accessed March 2, 2018. <a class="reference external" href="http://docs.ansible.com/ansible/latest/list_of_commands_modules.html">http://docs.ansible.com/ansible/latest/list_of_commands_modules.html</a></li>
<li>“Source Control Modules.” Ansible Documentation. October 10, 2017. Accessed March 2, 2018. <a class="reference external" href="http://docs.ansible.com/ansible/latest/list_of_source_control_modules.html">http://docs.ansible.com/ansible/latest/list_of_source_control_modules.html</a></li>
<li>“Tags.” Ansible Documentation. April 21, 2017. Accessed April 22, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/playbooks_tags.html">http://docs.ansible.com/ansible/playbooks_tags.html</a></li>
<li>“Prompts.” Ansible Documentation. August 05, 2016. Accessed August 13, 2016. <a class="reference external" href="http://docs.ansible.com/ansible/playbooks_prompts.html">http://docs.ansible.com/ansible/playbooks_prompts.html</a></li>
<li>“Loops.” Ansible Documentation. April 12, 2017. Accessed April 13, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/playbooks_loops.html">http://docs.ansible.com/ansible/playbooks_loops.html</a></li>
<li>“Conditionals.” Ansible Documentation. April 12, 2017. Accessed April 13, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/playbooks_conditionals.html">http://docs.ansible.com/ansible/playbooks_conditionals.html</a></li>
<li>“Error Handling In Playbooks.” Ansible Documentation. August 24, 2016. Accessed August 27, 2016. <a class="reference external" href="http://docs.ansible.com/ansible/playbooks_error_handling.html">http://docs.ansible.com/ansible/playbooks_error_handling.html</a></li>
<li>“Become (Privilege Escalation).” Ansible Documentation. August 24, 2016. Accessed August 27, 2016. <a class="reference external" href="http://docs.ansible.com/ansible/become.html">http://docs.ansible.com/ansible/become.html</a></li>
<li>“Delegation, Rolling Updates, and Local Actions.” Ansible Documentation. April 12, 2017. Accessed April 13, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/playbooks_delegation.html">http://docs.ansible.com/ansible/playbooks_delegation.html</a></li>
<li>“Asynchronous Actions and Polling.” Ansible Documentation. September 1, 2016. Accessed September 11, 2016. <a class="reference external" href="http://docs.ansible.com/ansible/playbooks_async.html">http://docs.ansible.com/ansible/playbooks_async.html</a></li>
<li>“mysql_db - Add or remove MySQL databases from a remote host.” Ansible Documentation. September 28, 2016. Accessed October 1, 2016. <a class="reference external" href="http://docs.ansible.com/ansible/mysql_db_module.html">http://docs.ansible.com/ansible/mysql_db_module.html</a></li>
<li>“mysql_user - Adds or removes a user from a MySQL database.” Ansible Documentation. September 28, 2016. Accessed October 1, 2016. <a class="reference external" href="http://docs.ansible.com/ansible/mysql_user_module.html">http://docs.ansible.com/ansible/mysql_user_module.html</a></li>
<li>“Ansible Installation.” Ansible Documentation. October 10, 2016. Accessed October 16, 2016. <a class="reference external" href="http://docs.ansible.com/ansible/intro_installation.html">http://docs.ansible.com/ansible/intro_installation.html</a></li>
<li>“Ansible 2.2.0 RC1 is ready for testing.” Ansible Development Group. October 3, 2016. Accessed October 16, 2016. <a class="reference external" href="https://groups.google.com/forum/#!searchin/ansible-devel/python$203$20support%7Csort:relevance/ansible-devel/Ca07JSmyxIQ/YjFfbb8TAAAJ">https://groups.google.com/forum/#!searchin/ansible-devel/python$203$20support%7Csort:relevance/ansible-devel/Ca07JSmyxIQ/YjFfbb8TAAAJ</a></li>
<li>“Jinja Template Designer Documentation.” Jinja2 Documentation. Accessed April 23, 2017. <a class="reference external" href="http://jinja.pocoo.org/docs/dev/templates/">http://jinja.pocoo.org/docs/dev/templates/</a></li>
<li>“Ansible Vault.” Ansible Documentation. October 10, 2017. Accessed March 2, 2018. <a class="reference external" href="http://docs.ansible.com/ansible/latest/vault.html">http://docs.ansible.com/ansible/latest/vault.html</a></li>
<li>“Organizing Group Vars Files in Ansible.” toja.io sysadmin, devops and videotapes. Accessed November 6, 2016. <a class="reference external" href="http://toja.io/using-host-and-group-vars-files-in-ansible/">http://toja.io/using-host-and-group-vars-files-in-ansible/</a></li>
<li>“Glossary.” Ansible Documentation. October 31, 2016. Accessed November 12, 2016. <a class="reference external" href="http://docs.ansible.com/ansible/intro_installation.html">http://docs.ansible.com/ansible/intro_installation.html</a></li>
<li>“Ansible Container README.” Ansible GitHub. October, 2016. Accessed November 19, 2016. <a class="reference external" href="https://github.com/ansible/ansible-container">https://github.com/ansible/ansible-container</a></li>
<li>“Ansible Container.” Ansible Documentation. June 3, 2017. Accessed June 3, 2017. <a class="reference external" href="http://docs.ansible.com/ansible-container/">http://docs.ansible.com/ansible-container/</a></li>
<li>“Semaphore Installation.” GitHub - ansible-semaphore/semaphore. June 1, 2017. Accessed August 14, 2017. <a class="reference external" href="https://github.com/ansible-semaphore/semaphore/wiki/Installation">https://github.com/ansible-semaphore/semaphore/wiki/Installation</a></li>
<li>“Ansible Galaxy.” Ansible Documentation. March 31, 2017. Accessed April 4, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/galaxy.html">http://docs.ansible.com/ansible/galaxy.html</a></li>
<li>“ANSIBLE PERFORMANCE TUNING (FOR FUN AND PROFIT).” Ansible Blog. July 10, 2014. Accessed January 25, 2017. <a class="reference external" href="https://www.ansible.com/blog/ansible-performance-tuning">https://www.ansible.com/blog/ansible-performance-tuning</a></li>
<li>“Configuration file.” Ansible Documentation. April 17, 2017. Accessed April 20, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/intro_configuration.html">http://docs.ansible.com/ansible/intro_configuration.html</a></li>
<li>“network_interface.” MartinVerges GitHub. January 24, 2017. Accessed April 4, 2017. <a class="reference external" href="https://github.com/MartinVerges/ansible.network_interface">https://github.com/MartinVerges/ansible.network_interface</a></li>
<li>“Check Mode (“Dry Run”).” Ansible Documentation. April 12, 2017. Accessed April 13, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/playbooks_checkmode.html">http://docs.ansible.com/ansible/playbooks_checkmode.html</a></li>
<li>“Return Values.” Ansible Documentation. April 17, 2017. Accessed April 18, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/common_return_values.html">http://docs.ansible.com/ansible/common_return_values.html</a></li>
<li>“Windows Support.” Ansible Documentation. August 4, 2017. Accessed August 10, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/latest/intro_windows.html">http://docs.ansible.com/ansible/latest/intro_windows.html</a></li>
<li>“Ansible Python API.” Ansible Documentation. March 29, 2018. Accessed March 30, 2018. <a class="reference external" href="http://docs.ansible.com/ansible/latest/dev_guide/developing_api.html">http://docs.ansible.com/ansible/latest/dev_guide/developing_api.html</a></li>
<li>“Installing and Configuring Ansible Tower Clusters - AnsbileFest London 2017.” YouTube - Ansible. July 19, 2017. Accessed August 10, 2017. <a class="reference external" href="https://www.youtube.com/watch?v=NiM4xNkauig">https://www.youtube.com/watch?v=NiM4xNkauig</a></li>
<li>“Ansible Tower API Guide.” Ansible Documentation. Accessed October 2, 2017. <a class="reference external" href="http://docs.ansible.com/ansible-tower/latest/html/towerapi/index.html">http://docs.ansible.com/ansible-tower/latest/html/towerapi/index.html</a></li>
<li>“Ansible Tower Installation and Reference Guide.” Ansible Documentation. February 20, 2018. Accessed March 2, 2018. <a class="reference external" href="http://docs.ansible.com/ansible-tower/latest/html/installandreference/index.html">http://docs.ansible.com/ansible-tower/latest/html/installandreference/index.html</a></li>
<li>“Ansible Strategies.” Ansible Documentation. August 16, 2017. Accessed August 24, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/latest/playbooks_strategies.html">http://docs.ansible.com/ansible/latest/playbooks_strategies.html</a></li>
<li>“Get-WindowsFeature.” MSDN Library. November 1, 2013. Accessed August 6, 2017. <a class="reference external" href="https://msdn.microsoft.com/en-us/library/ee662312.aspx">https://msdn.microsoft.com/en-us/library/ee662312.aspx</a></li>
<li>“Ansible Tower Job Templates.” Ansible Tower Documentation. Accessed September 7, 2017. <a class="reference external" href="http://docs.ansible.com/ansible-tower/latest/html/userguide/job_templates.html">http://docs.ansible.com/ansible-tower/latest/html/userguide/job_templates.html</a></li>
<li>“Ansible announces AWX open source project.” OpenSource.com. September 7, 2017. Accessed September 7, 2017. <a class="reference external" href="https://opensource.com/article/17/9/ansible-announces-awx-open-source-project">https://opensource.com/article/17/9/ansible-announces-awx-open-source-project</a></li>
<li>“Red Hat Ansible Engine.” Ansible. Accessed September 12, 2017. <a class="reference external" href="https://www.ansible.com/ansible-engine">https://www.ansible.com/ansible-engine</a></li>
<li>“Ansible Python 3 Support.” Ansible Documentation. September 12, 2017. Accessed September 14, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/latest/python_3_support.html">http://docs.ansible.com/ansible/latest/python_3_support.html</a></li>
<li>“Ansible [README.md].” Ansible GitHub. September 14, 2017. Accessed September 18, 2017. <a class="reference external" href="https://github.com/ansible/ansible">https://github.com/ansible/ansible</a></li>
<li>“Utilities Modules.” Ansible Documentation. September 18, 2017. Accessed September 26, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/latest/list_of_utilities_modules.html">http://docs.ansible.com/ansible/latest/list_of_utilities_modules.html</a></li>
<li>“Files Modules.” Ansible Documentation. September 18, 2017. Accessed September 21, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/latest/list_of_files_modules.html">http://docs.ansible.com/ansible/latest/list_of_files_modules.html</a></li>
<li>“Packaging Modules.” Ansible Documentation. September 18, 2017. Accessed September 21, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/latest/list_of_packaging_modules.html">http://docs.ansible.com/ansible/latest/list_of_packaging_modules.html</a></li>
<li>“Windows Modules.” Ansible Documentation. September 18, 2017. Accessed September 21, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/latest/list_of_windows_modules.html">http://docs.ansible.com/ansible/latest/list_of_windows_modules.html</a></li>
<li>“Creating Reusable Playbooks.” Ansible Documentation. September 18, 2017. Accessed September 21, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/latest/playbooks_reuse.html">http://docs.ansible.com/ansible/latest/playbooks_reuse.html</a></li>
<li>“Ansible Tower Quick Setup Guide.” Ansible Documentation. September 18, 2017. Accessed September 25, 2017. <a class="reference external" href="http://docs.ansible.com/ansible-tower/latest/html/quickstart/index.html">http://docs.ansible.com/ansible-tower/latest/html/quickstart/index.html</a></li>
<li>“Ansible Tower User Guide.” Ansible Documentation. September 18, 2017. Accessed September 25, 2017. <a class="reference external" href="http://docs.ansible.com/ansible-tower/latest/html/userguide/index.html">http://docs.ansible.com/ansible-tower/latest/html/userguide/index.html</a></li>
<li>“Ansible Tower Administration Guide.” Ansible Documentation. September 18, 2017. Accessed September 25, 2017. <a class="reference external" href="http://docs.ansible.com/ansible-tower/latest/html/administration/index.html">http://docs.ansible.com/ansible-tower/latest/html/administration/index.html</a></li>
<li>“Blocks.” Ansible Documentation. September 18, 2017. Accessed September 26, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/latest/playbooks_blocks.html">http://docs.ansible.com/ansible/latest/playbooks_blocks.html</a></li>
<li>“Net Tools Modules.” Ansible Documentation. September 18, 2017. Accessed September 26, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/latest/list_of_net_tools_modules.html">http://docs.ansible.com/ansible/latest/list_of_net_tools_modules.html</a></li>
<li>“System Modules.” Ansible Documentation. September 18, 2017. Accessed September 26, 2017. <a class="reference external" href="http://docs.ansible.com/ansible/latest/list_of_system_modules.html">http://docs.ansible.com/ansible/latest/list_of_system_modules.html</a></li>
<li>“Rundeck Ansible Plugin [README.md].” Batix GitHub. August 9, 2017. Accessed September 26, 2017. <a class="reference external" href="https://github.com/Batix/rundeck-ansible-plugin">https://github.com/Batix/rundeck-ansible-plugin</a></li>
<li>“Tensor [README.md].” PearsonAppEng GitHub. April 25, 2017. Accessed September 26, 2017. <a class="reference external" href="https://github.com/pearsonappeng/tensor">https://github.com/pearsonappeng/tensor</a></li>
<li>“Including and Importing.” Ansible Documentation. October 10, 2017. Accessed March 2, 2018. <a class="reference external" href="http://docs.ansible.com/ansible/latest/playbooks_reuse_includes.html">http://docs.ansible.com/ansible/latest/playbooks_reuse_includes.html</a></li>
<li>“Specify a PGDATA directory to prevent container re-create issues #535.” GitHub Ansible. February 22, 2018. Accessed March 9, 2018. <a class="reference external" href="https://github.com/ansible/awx/pull/535">https://github.com/ansible/awx/pull/535</a></li>
</ol>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="authentication.html" class="btn btn-neutral float-right" title="Authentication" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to Root Pages!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Luke Short. Documents licensed under GPLv3.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2018.04.01',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>