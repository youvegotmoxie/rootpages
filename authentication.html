

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Authentication &mdash; Root Pages 2018.04.01 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Root Pages 2018.04.01 documentation" href="index.html"/>
        <link rel="next" title="Bootloaders" href="bootloaders.html"/>
        <link rel="prev" title="Ansible" href="ansible.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Root Pages
          

          
          </a>

          
            
            
              <div class="version">
                2018.04.01
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ansible.html">Ansible</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#kerberos">Kerberos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#server">Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#client">Client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#openldap">OpenLDAP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#errata">Errata</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bibliography">Bibliography</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bootloaders.html">Bootloaders</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_and_c++.html">C and C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="databases.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustering.html">Clustering and High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="dns_servers.html">DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_systems.html">File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="http_servers.html">HTTP Servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="mail_servers.html">Mail Servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring.html">Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="openstack.html">OpenStack Queens</a></li>
<li class="toctree-l1"><a class="reference internal" href="operating_systems.html">Operating Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="packages.html">Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtualization.html">Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="wine.html">Wine</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Root Pages</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Authentication</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/authentication.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="authentication">
<h1><a class="toc-backref" href="#id2">Authentication</a><a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#authentication" id="id2">Authentication</a><ul>
<li><a class="reference internal" href="#kerberos" id="id3">Kerberos</a><ul>
<li><a class="reference internal" href="#server" id="id4">Server</a></li>
<li><a class="reference internal" href="#client" id="id5">Client</a></li>
</ul>
</li>
<li><a class="reference internal" href="#openldap" id="id6">OpenLDAP</a><ul>
<li><a class="reference internal" href="#id1" id="id7">Server</a></li>
</ul>
</li>
<li><a class="reference internal" href="#errata" id="id8">Errata</a></li>
<li><a class="reference internal" href="#bibliography" id="id9">Bibliography</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="kerberos">
<h2><a class="toc-backref" href="#id3">Kerberos</a><a class="headerlink" href="#kerberos" title="Permalink to this headline">¶</a></h2>
<p>Kerberos helps to facilitate a single sign-on and secure approach to
authenticating across multiple services. The Kerberos server is also
known as a Key Distribution Center (KDC) server that maintains a KDC
database of encrypted keys.</p>
<p>A client authenticates once to a KDC server with a username and
password. Once validated through a authentication service, an initial
“Ticket Granting Ticket” (TGT) is issued by the “Ticket Granting
Service” (TGS). This ticket contains information about the client
including their hostname, IP address, initial ticket creation time,
ticket expiration time, and more. When this client tries to access
access a remote resource (for example, FTP or SSH) the TGT’s access
privileges are verified by the TGS and then a “Service Ticket” is
issued. The client then uses this service ticket to access the remote
resource.</p>
<p>Ports:</p>
<ul class="simple">
<li>88/tcp+udp = Kerberos communication.</li>
<li>464/tcp+udp = Kerberos authentication.</li>
<li>749/tcp+udp = Kerberos administration.</li>
</ul>
<p>[1]</p>
<div class="section" id="server">
<h3><a class="toc-backref" href="#id4">Server</a><a class="headerlink" href="#server" title="Permalink to this headline">¶</a></h3>
<p>Install the Kerberos service.</p>
<p>RHEL:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo yum install krb5-server krb5-workstation
</pre></div>
</div>
<p>Modify the example Kerberos configuration files and replace the domain
“example.com” with a different domain. This domain needs to be
resolvable on both the server and client computers.</p>
<p>File: /etc/krb5.conf</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[logging]</span>
<span class="na">default</span> <span class="o">=</span> <span class="s">FILE:/var/log/krb5libs.log</span>
<span class="na">kdc</span> <span class="o">=</span> <span class="s">FILE:/var/log/krb5kdc.log</span>
<span class="na">admin_server</span> <span class="o">=</span> <span class="s">FILE:/var/log/kadmind.log</span>

<span class="k">[libdefaults]</span>
<span class="na">dns_lookup_realm</span> <span class="o">=</span> <span class="s">false</span>
<span class="na">ticket_lifetime</span> <span class="o">=</span> <span class="s">24h</span>
<span class="na">renew_lifetime</span> <span class="o">=</span> <span class="s">7d</span>
<span class="na">forwardable</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">rdns</span> <span class="o">=</span> <span class="s">false</span>
<span class="na">default_realm</span> <span class="o">=</span> <span class="s">EXAMPLE.COM</span>
<span class="na">default_ccache_name</span> <span class="o">=</span> <span class="s">KEYRING:persistent:%{uid}</span>

<span class="k">[realms]</span>
<span class="na">EXAMPLE.COM</span> <span class="o">=</span> <span class="s">{</span>
<span class="s"> kdc = kerberos.example.com</span>
<span class="s"> admin_server = kerberos.example.com</span>
<span class="na">}</span>

<span class="k">[domain_realm]</span>
<span class="na">.example.com</span> <span class="o">=</span> <span class="s">EXAMPLE.COM</span>
<span class="na">example.com</span> <span class="o">=</span> <span class="s">EXAMPLE.COM</span>
</pre></div>
</div>
<p>File: /var/kerberos/krb5kdc/kdc.conf</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[kdcdefaults]</span>
<span class="na">kdc_ports</span> <span class="o">=</span> <span class="s">88</span>
<span class="na">kdc_tcp_ports</span> <span class="o">=</span> <span class="s">88</span>

<span class="k">[realms]</span>
<span class="na">EXAMPLE.COM</span> <span class="o">=</span> <span class="s">{</span>
<span class="s"> #master_key_type = aes256-cts</span>
<span class="s"> acl_file = /var/kerberos/krb5kdc/kadm5.acl</span>
<span class="s"> dict_file = /usr/share/dict/words</span>
<span class="s"> admin_keytab = /var/kerberos/krb5kdc/kadm5.keytab</span>
<span class="s"> supported_enctypes = aes256-cts:normal aes128-cts:normal des3-hmac-sha1:normal arcfour-hmac:normal camellia256-cts:normal camellia128-cts:normal des-hmac-sha1:normal des-cbc-md5:normal des-cbc-crc:normal</span>
<span class="na">}</span>
</pre></div>
</div>
<p>File: /var/kerberos/krb5kdc/kadm5.acl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*/</span><span class="n">admin</span><span class="nd">@EXAMPLE</span><span class="o">.</span><span class="n">COM</span>     <span class="o">*</span>
</pre></div>
</div>
<p>On a new installation, create the KDC database and save the generated
master database password to a file called the “stash file.” By default,
the database will be saved to <code class="docutils literal notranslate"><span class="pre">/var/kerberos/krb5kdc/principal</span></code>.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo kdb5_util create -s
</pre></div>
</div>
<p>Start and enable the Kerberos service to start on boot.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl start krb5kdc
$ sudo systemctl <span class="nb">enable</span> krb5kdc
</pre></div>
</div>
<p>Create an administrator account.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo kadmin.local -q <span class="s2">&quot;addprinc root/admin&quot;</span>
</pre></div>
</div>
<p>Optionally start the remote “kadmin” administrator service.
Alternatively, the <code class="docutils literal notranslate"><span class="pre">kadmin.local</span></code> command be used exclusively for
manage Kerberos from the local system.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl start kadmin
</pre></div>
</div>
<p>Log into the administrator account to manage accounts.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo kadmin
</pre></div>
</div>
<p>It is also recommended to use a NTP service to keep time synchronized to
prevent authentication issues due to time drift.</p>
<p>[2]</p>
</div>
<div class="section" id="client">
<h3><a class="toc-backref" href="#id5">Client</a><a class="headerlink" href="#client" title="Permalink to this headline">¶</a></h3>
<p>Install the Kerberos client utilities.</p>
<p>RHEL:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo  yum install krb5-workstation
</pre></div>
</div>
<p>The client should have the same domain and realm settings configured
that the server does. The easiest way to ensure this is to copy the
<code class="docutils literal notranslate"><span class="pre">/etc/krb5.conf</span></code> file over.</p>
<p>When authenticating, the username has to be in lowercase and the domain
must be in uppercase. [3]</p>
<p>Syntax:</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;user&gt;&#64;&lt;DOMAIN&gt;</span></code></p>
<p>Example:</p>
<p><code class="docutils literal notranslate"><span class="pre">bob&#64;ENTERPRISE.TLD</span></code></p>
</div>
</div>
<div class="section" id="openldap">
<h2><a class="toc-backref" href="#id6">OpenLDAP</a><a class="headerlink" href="#openldap" title="Permalink to this headline">¶</a></h2>
<p>The Lightweight Directory Access Protocol (LDAP) is a network protocol
for accessing user information. OpenLDAP is an open source
implementation of this protocol.</p>
<p>OpenLDAP supports storing user information in many relational database
management systems (RDMSs) including IBM db2, MariaDB/MySQL, MS SQL
Server, Oracle Database, PostgreSQL and more. [4]</p>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id7">Server</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>RHEL:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo yum install compat-openldap openldap openldap-clients openldap-servers
</pre></div>
</div>
<p>For using a RDMS, install the required dependency:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo yum install openldap-servers-sql
</pre></div>
</div>
<p>Enable and start the service.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl <span class="nb">enable</span> slapd
$ sudo systemctl start slapd
</pre></div>
</div>
<p>[5]</p>
</div>
</div>
<div class="section" id="errata">
<h2><a class="reference external" href="https://github.com/ekultails/rootpages/commits/master/src/authentication.rst">Errata</a><a class="headerlink" href="#errata" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="bibliography">
<h2><a class="toc-backref" href="#id9">Bibliography</a><a class="headerlink" href="#bibliography" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Ghori, Asghar. <em>RHCSA &amp; RHCE Red Hat Enterprise Linux 7: Training and Exam Preparation Guide (EX200 and EX300)</em>. 3rd ed. Toronto, Canada: Asghar Ghori, 2015.</li>
<li>“Kerberos KDC Quickstart Guide.” Fedora Project Wiki. February 3, 2010. Accessed September 11, 2017. <a class="reference external" href="https://fedoraproject.org/wiki/Kerberos_KDC_Quickstart_Guide">https://fedoraproject.org/wiki/Kerberos_KDC_Quickstart_Guide</a></li>
<li>“Infrastructure/Kerberos.” Fedora Project Wiki. June 23, 2017. Accessed September 11, 2017. <a class="reference external" href="https://fedoraproject.org/wiki/Infrastructure/Kerberos">https://fedoraproject.org/wiki/Infrastructure/Kerberos</a></li>
<li>“slapd-sql(5) - Linux man page.” die.net. Accessed February 8, 2018. <a class="reference external" href="https://linux.die.net/man/5/slapd-sql">https://linux.die.net/man/5/slapd-sql</a></li>
<li>“Step By Step OpenLDAP Server Configuration On CentOS 7 / RHEL 7.” ItzGeek. September 14, 2017. Accessed September 20, 2017. <a class="reference external" href="http://www.itzgeek.com/how-tos/linux/centos-how-tos/step-step-openldap-server-configuration-centos-7-rhel-7.html">http://www.itzgeek.com/how-tos/linux/centos-how-tos/step-step-openldap-server-configuration-centos-7-rhel-7.html</a></li>
</ol>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="bootloaders.html" class="btn btn-neutral float-right" title="Bootloaders" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ansible.html" class="btn btn-neutral" title="Ansible" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Luke Short. Documents licensed under GPLv3.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2018.04.01',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>