

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Authentication &mdash; Root Pages 2018.01.26 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Root Pages 2018.01.26 documentation" href="index.html"/>
        <link rel="next" title="Bootloaders" href="bootloaders.html"/>
        <link rel="prev" title="Ansible" href="ansible.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Root Pages
          

          
          </a>

          
            
            
              <div class="version">
                2018.01.26
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ansible.html">Ansible</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#kerberos">Kerberos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#kerberos-server">Kerberos - Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kerberos-client">Kerberos - Client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#openldap">OpenLDAP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#openldap-server">OpenLDAP - Server</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bootloaders.html">Bootloaders</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_and_c++.html">C and C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustering.html">Clustering and High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="dns_servers.html">DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_systems.html">File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="http_servers.html">HTTP Servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="mail_servers.html">Mail Servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring.html">Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="nosql.html">NoSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="openstack.html">OpenStack Ocata</a></li>
<li class="toctree-l1"><a class="reference internal" href="operating_systems.html">Operating Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="packages.html">Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="sql.html">SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtualization.html">Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="wine.html">Wine</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Root Pages</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Authentication</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/authentication.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="authentication">
<h1>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="#kerberos">Kerberos</a><ul>
<li><a class="reference external" href="#kerberos---server">Server</a></li>
<li><a class="reference external" href="#kerberos---client">Client</a></li>
</ul>
</li>
<li><a class="reference external" href="#openldap">OpenLDAP</a><ul>
<li><a class="reference external" href="#openldap---server">Server</a></li>
</ul>
</li>
</ul>
<div class="section" id="kerberos">
<h2>Kerberos<a class="headerlink" href="#kerberos" title="Permalink to this headline">¶</a></h2>
<p>Kerberos helps to facilitate a single sign-on and secure approach to
authenticating across multiple services. The Kerberos server is also
known as a Key Distribution Center (KDC) server that maintains a KDC
database of encrypted keys.</p>
<p>A client authenticates once to a KDC server with a username and
password. Once validated through a authentication service, an initial
“Ticket Granting Ticket” (TGT) is issued by the “Ticket Granting
Service” (TGS). This ticket contains information about the client
including their hostname, IP address, initial ticket creation time,
ticket expiration time, and more. When this client tries to access
access a remote resource (for example, FTP or SSH) the TGT’s access
privileges are verified by the TGS and then a “Service Ticket” is
issued. The client then uses this service ticket to access the remote
resource.</p>
<p>Ports:</p>
<ul class="simple">
<li>88/tcp+udp = Kerberos communication.</li>
<li>464/tcp+udp = Kerberos authentication.</li>
<li>749/tcp+udp = Kerberos administration.</li>
</ul>
<p>[1]</p>
<p>Source:</p>
<ol class="arabic simple">
<li>Ghori, Asghar. <em>RHCSA &amp; RHCE Red Hat Enterprise Linux 7: Training and
Exam Preparation Guide (EX200 and EX300)</em>. 3rd ed. Toronto, Canada:
Asghar Ghori, 2015.</li>
</ol>
<div class="section" id="kerberos-server">
<h3>Kerberos - Server<a class="headerlink" href="#kerberos-server" title="Permalink to this headline">¶</a></h3>
<p>Install the Kerberos service.</p>
<p>RHEL:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># yum install krb5-server krb5-workstation</span>
</pre></div>
</div>
<p>Modify the example Kerberos configuration files and replace the domain
“example.com” with a different domain. This domain needs to be
resolvable on both the server and client computers.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># vim /etc/krb5.conf</span>
<span class="p">[</span><span class="n">logging</span><span class="p">]</span>
 <span class="n">default</span> <span class="o">=</span> <span class="n">FILE</span><span class="p">:</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">krb5libs</span><span class="o">.</span><span class="n">log</span>
 <span class="n">kdc</span> <span class="o">=</span> <span class="n">FILE</span><span class="p">:</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">krb5kdc</span><span class="o">.</span><span class="n">log</span>
 <span class="n">admin_server</span> <span class="o">=</span> <span class="n">FILE</span><span class="p">:</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">kadmind</span><span class="o">.</span><span class="n">log</span>

<span class="p">[</span><span class="n">libdefaults</span><span class="p">]</span>
 <span class="n">dns_lookup_realm</span> <span class="o">=</span> <span class="n">false</span>
 <span class="n">ticket_lifetime</span> <span class="o">=</span> <span class="mi">24</span><span class="n">h</span>
 <span class="n">renew_lifetime</span> <span class="o">=</span> <span class="mi">7</span><span class="n">d</span>
 <span class="n">forwardable</span> <span class="o">=</span> <span class="n">true</span>
 <span class="n">rdns</span> <span class="o">=</span> <span class="n">false</span>
 <span class="n">default_realm</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
 <span class="n">default_ccache_name</span> <span class="o">=</span> <span class="n">KEYRING</span><span class="p">:</span><span class="n">persistent</span><span class="p">:</span><span class="o">%</span><span class="p">{</span><span class="n">uid</span><span class="p">}</span>

<span class="p">[</span><span class="n">realms</span><span class="p">]</span>
 <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">kdc</span> <span class="o">=</span> <span class="n">kerberos</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
  <span class="n">admin_server</span> <span class="o">=</span> <span class="n">kerberos</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
 <span class="p">}</span>

<span class="p">[</span><span class="n">domain_realm</span><span class="p">]</span>
 <span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
 <span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">=</span> <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># vim /var/kerberos/krb5kdc/kdc.conf</span>
<span class="p">[</span><span class="n">kdcdefaults</span><span class="p">]</span>
 <span class="n">kdc_ports</span> <span class="o">=</span> <span class="mi">88</span>
 <span class="n">kdc_tcp_ports</span> <span class="o">=</span> <span class="mi">88</span>

<span class="p">[</span><span class="n">realms</span><span class="p">]</span>
 <span class="n">EXAMPLE</span><span class="o">.</span><span class="n">COM</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">#master_key_type = aes256-cts</span>
  <span class="n">acl_file</span> <span class="o">=</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">kerberos</span><span class="o">/</span><span class="n">krb5kdc</span><span class="o">/</span><span class="n">kadm5</span><span class="o">.</span><span class="n">acl</span>
  <span class="n">dict_file</span> <span class="o">=</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="nb">dict</span><span class="o">/</span><span class="n">words</span>
  <span class="n">admin_keytab</span> <span class="o">=</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">kerberos</span><span class="o">/</span><span class="n">krb5kdc</span><span class="o">/</span><span class="n">kadm5</span><span class="o">.</span><span class="n">keytab</span>
  <span class="n">supported_enctypes</span> <span class="o">=</span> <span class="n">aes256</span><span class="o">-</span><span class="n">cts</span><span class="p">:</span><span class="n">normal</span> <span class="n">aes128</span><span class="o">-</span><span class="n">cts</span><span class="p">:</span><span class="n">normal</span> <span class="n">des3</span><span class="o">-</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha1</span><span class="p">:</span><span class="n">normal</span> <span class="n">arcfour</span><span class="o">-</span><span class="n">hmac</span><span class="p">:</span><span class="n">normal</span> <span class="n">camellia256</span><span class="o">-</span><span class="n">cts</span><span class="p">:</span><span class="n">normal</span> <span class="n">camellia128</span><span class="o">-</span><span class="n">cts</span><span class="p">:</span><span class="n">normal</span> <span class="n">des</span><span class="o">-</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha1</span><span class="p">:</span><span class="n">normal</span> <span class="n">des</span><span class="o">-</span><span class="n">cbc</span><span class="o">-</span><span class="n">md5</span><span class="p">:</span><span class="n">normal</span> <span class="n">des</span><span class="o">-</span><span class="n">cbc</span><span class="o">-</span><span class="n">crc</span><span class="p">:</span><span class="n">normal</span>
 <span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># vim /var/kerberos/krb5kdc/kadm5.acl</span>
<span class="o">*/</span><span class="n">admin</span><span class="nd">@EXAMPLE</span><span class="o">.</span><span class="n">COM</span>     <span class="o">*</span>
</pre></div>
</div>
<p>On a new installation, create the KDC database and save the generated
master database password to a file called the “stash file.” By default,
the database will be saved to <code class="docutils literal"><span class="pre">/var/kerberos/krb5kdc/principal</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># kdb5_util create -s</span>
</pre></div>
</div>
<p>Start and enable the Kerberos service to start on boot.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># systemctl start krb5kdc</span>
<span class="c1"># systemctl enable krb5kdc</span>
</pre></div>
</div>
<p>Create an administrator account.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># kadmin.local -q &quot;addprinc root/admin&quot;</span>
</pre></div>
</div>
<p>Optionally start the remote “kadmin” administrator service.
Alternatively, the <code class="docutils literal"><span class="pre">kadmin.local</span></code> command be used exclusively for
manage Kerberos from the local system.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># systemctl start kadmin</span>
</pre></div>
</div>
<p>Log into the administrator account to manage accounts.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># kadmin</span>
</pre></div>
</div>
<p>It is also recommended to use a NTP service to keep time synchronized to
prevent authentication issues due to time drift.</p>
<p>[1]</p>
<p>Source:</p>
<ol class="arabic simple">
<li>“Kerberos KDC Quickstart Guide.” Fedora Project Wiki. Februray 3,
2010. Accessed September 11, 2017.
<a class="reference external" href="https://fedoraproject.org/wiki/Kerberos_KDC_Quickstart_Guide">https://fedoraproject.org/wiki/Kerberos_KDC_Quickstart_Guide</a></li>
</ol>
</div>
<div class="section" id="kerberos-client">
<h3>Kerberos - Client<a class="headerlink" href="#kerberos-client" title="Permalink to this headline">¶</a></h3>
<p>Install the Kerberos client utilities.</p>
<p>RHEL:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># yum install krb5-workstation</span>
</pre></div>
</div>
<p>The client should have the same domain and realm settings configured
that the server does. The easiest way to ensure this is to copy the
<code class="docutils literal"><span class="pre">/etc/krb5.conf</span></code> file over.</p>
<p>When authenticating, the username has to be in lowercase and the domain
must be in uppercase. [1]</p>
<p>Syntax:</p>
<p><code class="docutils literal"><span class="pre">&lt;user&gt;&#64;&lt;DOMAIN&gt;</span></code></p>
<p>Example:</p>
<p><code class="docutils literal"><span class="pre">bob&#64;ENTERPRISE.TLD</span></code></p>
<p>Source:</p>
<ol class="arabic simple">
<li>“Infrastructure/Kerberos.” Fedora Project Wiki. June 23, 2017.
Accessed September 11, 2017.
<a class="reference external" href="https://fedoraproject.org/wiki/Infrastructure/Kerberos">https://fedoraproject.org/wiki/Infrastructure/Kerberos</a></li>
</ol>
</div>
</div>
<div class="section" id="openldap">
<h2>OpenLDAP<a class="headerlink" href="#openldap" title="Permalink to this headline">¶</a></h2>
<p>The Lightweight Directory Access Protocol (LDAP) is a network protocol
for accessing user information. OpenLDAP is an open source
implementation of this protocol.</p>
<p>OpenLDAP supports storing user information in many relational database
management systems (RDMSs) including IBM db2, MariaDB/MySQL, MS SQL
Server, Oracle Database, PostgreSQL and more. [2]</p>
<p>Source:</p>
<ol class="arabic simple">
<li></li>
<li><a class="reference external" href="https://linux.die.net/man/5/slapd-sql">https://linux.die.net/man/5/slapd-sql</a></li>
</ol>
<div class="section" id="openldap-server">
<h3>OpenLDAP - Server<a class="headerlink" href="#openldap-server" title="Permalink to this headline">¶</a></h3>
<p>RHEL:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># yum install compat-openldap openldap openldap-clients openldap-servers</span>
</pre></div>
</div>
<p>For using a RDMS, install the required dependency:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># yum install openldap-servers-sql</span>
</pre></div>
</div>
<p>Enable and start the service.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># systemctl enable slapd</span>
<span class="c1"># systemctl start slapd</span>
</pre></div>
</div>
<p>[1]</p>
<p>Source:</p>
<ol class="arabic simple">
<li>“Step By Step OpenLDAP Server Configuration On CentOS 7 / RHEL 7.”
ItzGeek. September 14, 2017. Accessed September 20, 2017.
<a class="reference external" href="http://www.itzgeek.com/how-tos/linux/centos-how-tos/step-step-openldap-server-configuration-centos-7-rhel-7.html">http://www.itzgeek.com/how-tos/linux/centos-how-tos/step-step-openldap-server-configuration-centos-7-rhel-7.html</a></li>
</ol>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="bootloaders.html" class="btn btn-neutral float-right" title="Bootloaders" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ansible.html" class="btn btn-neutral" title="Ansible" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Luke Short.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2018.01.26',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>